

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/avatar.jpg">
  <link rel="icon" href="/img/avatar.jpg">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="亮亮678">
  <meta name="keywords" content="">
  
    <meta name="description" content="写在前面 《计算机体系结构：量化研究方法》（Computer Architecture: A Quantitative Approach）一直被称为计算机体系结构领域的圣经。在研究生一年级组里没有布置任务，所以购买了英文第六版阅读。本书从指令级并行，数据级并行和任务级并行的角度分析了处理器的设计，并讲解了近年来热门的仓库级计算机和特定领域加速器的内容。在阅读本书之前，应该有计算机组成原理的基础知识">
<meta property="og:type" content="article">
<meta property="og:title" content="《计算机体系结构：量化研究方法》读书笔记">
<meta property="og:url" content="https://liangliang678.github.io/2022/10/27/index.html">
<meta property="og:site_name" content="亮亮678的博客">
<meta property="og:description" content="写在前面 《计算机体系结构：量化研究方法》（Computer Architecture: A Quantitative Approach）一直被称为计算机体系结构领域的圣经。在研究生一年级组里没有布置任务，所以购买了英文第六版阅读。本书从指令级并行，数据级并行和任务级并行的角度分析了处理器的设计，并讲解了近年来热门的仓库级计算机和特定领域加速器的内容。在阅读本书之前，应该有计算机组成原理的基础知识">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-10-26T16:00:00.000Z">
<meta property="article:modified_time" content="2023-06-15T10:45:55.297Z">
<meta property="article:author" content="亮亮678">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>《计算机体系结构：量化研究方法》读书笔记 - 亮亮678的博客</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"liangliang678.github.io","root":"/","version":"1.9.3","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":2},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>亮亮678的博客</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="《计算机体系结构：量化研究方法》读书笔记"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-10-27 00:00" pubdate>
          2022-10-27
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          33k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          274 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar category-bar" style="margin-right: -1rem">
    





<div class="category-list">
  
  
    
    
    
    <div class="category row nomargin-x">
      <a class="category-item 
          list-group-item category-item-action col-10 col-md-11 col-xm-11" title="读书笔记"
        id="heading-f44d4b523ff110f3126ff57530ea5253" role="tab" data-toggle="collapse" href="#collapse-f44d4b523ff110f3126ff57530ea5253"
        aria-expanded="true"
      >
        读书笔记
        <span class="list-group-count">(3)</span>
        <i class="iconfont icon-arrowright"></i>
      </a>
      
      <div class="category-collapse collapse show" id="collapse-f44d4b523ff110f3126ff57530ea5253"
           role="tabpanel" aria-labelledby="heading-f44d4b523ff110f3126ff57530ea5253">
        
        
          
  <div class="category-post-list">
    
    
      
      
        <a href="/2022/10/20/" title="关于《深入理解计算机系统》"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">关于《深入理解计算机系统》</span>
        </a>
      
    
      
      
        <a href="/2022/10/27/" title="《计算机体系结构：量化研究方法》读书笔记"
           class="list-group-item list-group-item-action
           active">
          <span class="category-post">《计算机体系结构：量化研究方法》读书笔记</span>
        </a>
      
    
      
      
        <a href="/2023/02/19/" title="《超标量处理器设计》读书笔记"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">《超标量处理器设计》读书笔记</span>
        </a>
      
    
  </div>

        
      </div>
    </div>
  
</div>


  </aside>


    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">《计算机体系结构：量化研究方法》读书笔记</h1>
            
              <p class="note note-info">
                
                  
                    本文最后更新于：2023年6月15日 晚上
                  
                
              </p>
            
            
              <div class="markdown-body">
                
                <h2 id="写在前面">写在前面</h2>
<p>《计算机体系结构：量化研究方法》（<em>Computer Architecture: A Quantitative Approach</em>）一直被称为计算机体系结构领域的圣经。在研究生一年级组里没有布置任务，所以购买了英文第六版阅读。本书从指令级并行，数据级并行和任务级并行的角度分析了处理器的设计，并讲解了近年来热门的仓库级计算机和特定领域加速器的内容。在阅读本书之前，应该有计算机组成原理的基础知识。</p>
<p>本文是笔者为了日后复习所写的“索引”性质的读书笔记，因为阅读的是英文版，一些概念是作者个人的翻译，不甚准确。另外，全书贯彻了<strong>量化</strong>的思想，笔记中亦没有体现。</p>
<h2 id="Chapter1-Fundamentals-of-Quantitative-Design-and-Analysis">Chapter1: Fundamentals of Quantitative Design and Analysis</h2>
<h3 id="1-1-Introduction">1.1 Introduction</h3>
<p>在第一台电子计算机被发明以来的70年间，计算机技术取得了惊人的进步。更好的计算机体系结构和和更先进的集成电路技术共同推动着微处理器的进步。汇编语言的淘汰和平台无关的操作系统为新的计算机体系结构铺平了道路，促成了RISC的诞生。微处理器的发展使用户获得了更多的算力；引入了新的计算机，包括PC、手机等；取代了其他电子电路设计；催生了软件工业。</p>
<p>但硬件的文艺复兴可能面临终结，因为两个重要的定律不复存在。一是Dennard定律：得益于更小的晶体管尺寸，相同硅片面积下晶体管数量的增加不会引起功耗的增加。Dennard定律在2004年终结，因为电压不再随着晶体管尺寸的缩小而降低。二是Moore定律：每两年芯片上的晶体管数量会翻倍。Moore定律将于近期终结。领域特定加速可能有机会破局。</p>
<h3 id="1-2-Classes-of-Computers">1.2 Classes of Computers</h3>
<h4 id="Internet-of-Things-Embedded-Computers">Internet of Things/Embedded Computers</h4>
<p>IoT设备从真实世界中收集有用的数据并与真实世界进行互动，催生了很多智能应用。在嵌入式领域，价格是关键因素。</p>
<h4 id="Personal-Mobile-Device">Personal Mobile Device</h4>
<p>PMD中价格和功耗至关重要，其应用多是面向网络的或是基于媒体的。响应性和可预测性是媒体应用的关键，所以实时处理性能很重要。</p>
<h4 id="Desktop-Computing">Desktop Computing</h4>
<p>个人电脑市场目前超过一半被笔记本电脑占据，性价比在该领域是关键。</p>
<h4 id="Servers">Servers</h4>
<p>服务器领域关心可靠性和可扩展性，将吞吐量作为性能指标。</p>
<h4 id="Clusters-Warehouse-Scala-Computers">Clusters/Warehouse-Scala Computers</h4>
<p>SaaS应用的增长催生了机群和仓库级计算机，其注重功耗、性价比和可靠性。</p>
<h4 id="Classes-of-Parallelism-and-Parallel-Architecture">Classes of Parallelism and Parallel Architecture</h4>
<p>软件中有两种并行性：数据级并行和任务级并行。计算机通过四种方式挖掘软件中的并行性：指令级并行；向量架构、GPU和多媒体指令；线程级并行；任务级并行。Flynn将计算机分为四类：SISD，SIMD，MISD和MIMD。</p>
<h3 id="1-3-Defining-Computer-Architecture">1.3 Defining Computer Architecture</h3>
<p>早些年将计算机体系结构定义为指令集体系结构，这是片面的。</p>
<h4 id="Instruction-Set-Architecture-The-Myopic-View-of-Computer-Architecture">Instruction Set Architecture: The Myopic View of Computer Architecture</h4>
<p>ISA是软硬件的界面，本书中采用RISC-V作为示例：</p>
<ul>
<li>ISA的分类：寄存器-内存型和load-store型。</li>
<li>内存索引：按字节索引。</li>
<li>索引方式：寄存器、立即数、偏移量等。</li>
<li>操作数：字节、半字、字、双字和IEEE 754浮点数。</li>
<li>操作类型：数据传输、算术运算、控制流和浮点运算。</li>
<li>控制流指令：条件跳转、无条件跳转、过程调用和返回。</li>
<li>编码方式：定长和变长。</li>
</ul>
<h4 id="Genuine-Computer-Architecture-Designing-the-Organization-and-Hardware-to-Meet-Goals-and-Functional-Requirements">Genuine Computer Architecture: Designing the Organization and Hardware to Meet Goals and Functional Requirements</h4>
<p>组织架构或微架构指处理器的设计，包括内存系统、处理器核设计等内容，例如同一ISA的不同处理器。硬件架构指计算机的规格，例如同一系列的不同处理器。</p>
<h3 id="1-4-Trends-in-Technology">1.4 Trends in Technology</h3>
<p>五个实现技术如今正以惊人的速度改变着半导体行业：</p>
<ol>
<li>集成电路技术</li>
<li>半导体DRAM</li>
<li>半导体闪存</li>
<li>磁盘技术</li>
<li>网络技术</li>
</ol>
<h4 id="Performance-Trends-Bandwidth-Over-Latency">Performance Trends: Bandwidth Over Latency</h4>
<p>带宽的增长速度比延迟的降低速度更快</p>
<h4 id="Scaling-of-Transistor-Performance-and-Wires">Scaling of Transistor Performance and Wires</h4>
<p>晶体管密度随晶体管尺寸的缩小按平方增加，晶体管性能随晶体管尺寸的缩小按线性增加，但连线延迟不会随之降低，导致连线延迟如今成为棘手的问题。</p>
<h3 id="1-5-Trends-in-Power-and-Energy-in-Integrated-Circuits">1.5 Trends in Power and Energy in Integrated Circuits</h3>
<h4 id="Power-and-Energy-A-System-Perspective">Power and Energy: A System Perspective</h4>
<p>对于系统设计者而言，有三个问题值得关注：处理器的最高功耗是多少？处理器的正常功耗（TDP）是多少？处理器的能效比（以消耗的能量计算）是多少？</p>
<h4 id="Energy-and-Power-Within-a-Microprocessor">Energy and Power Within a Microprocessor</h4>
<p>动态功耗：</p>
<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.667ex;" xmlns="http://www.w3.org/2000/svg" width="49.666ex" height="2.554ex" role="img" focusable="false" viewbox="0 -833.9 21952.5 1128.9" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-1-TEX-I-1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"/><path id="MJX-1-TEX-I-1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/><path id="MJX-1-TEX-I-1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"/><path id="MJX-1-TEX-I-1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"/><path id="MJX-1-TEX-I-1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"/><path id="MJX-1-TEX-I-1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"/><path id="MJX-1-TEX-N-221D" d="M56 124T56 216T107 375T238 442Q260 442 280 438T319 425T352 407T382 385T406 361T427 336T442 315T455 297T462 285L469 297Q555 442 679 442Q687 442 722 437V398H718Q710 400 694 400Q657 400 623 383T567 343T527 294T503 253T495 235Q495 231 520 192T554 143Q625 44 696 44Q717 44 719 46H722V-5Q695 -11 678 -11Q552 -11 457 141Q455 145 454 146L447 134Q362 -11 235 -11Q157 -11 107 56ZM93 213Q93 143 126 87T220 31Q258 31 292 48T349 88T389 137T413 178T421 196Q421 200 396 239T362 288Q322 345 288 366T213 387Q163 387 128 337T93 213Z"/><path id="MJX-1-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"/><path id="MJX-1-TEX-N-2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"/><path id="MJX-1-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"/><path id="MJX-1-TEX-N-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"/><path id="MJX-1-TEX-I-1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"/><path id="MJX-1-TEX-I-1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"/><path id="MJX-1-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/><path id="MJX-1-TEX-I-1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/><path id="MJX-1-TEX-N-A0" d=""/><path id="MJX-1-TEX-I-1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"/><path id="MJX-1-TEX-I-1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"/><path id="MJX-1-TEX-I-1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D438" xlink:href="#MJX-1-TEX-I-1D438"/></g><g data-mml-node="mi" transform="translate(764,0)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="mi" transform="translate(1364,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(1830,0)"><use data-c="1D45F" xlink:href="#MJX-1-TEX-I-1D45F"/></g><g data-mml-node="mi" transform="translate(2281,0)"><use data-c="1D454" xlink:href="#MJX-1-TEX-I-1D454"/></g><g data-mml-node="msub" transform="translate(2758,0)"><g data-mml-node="mi"><use data-c="1D466" xlink:href="#MJX-1-TEX-I-1D466"/></g><g data-mml-node="TeXAtom" transform="translate(523,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D451" xlink:href="#MJX-1-TEX-I-1D451"/></g><g data-mml-node="mi" transform="translate(520,0)"><use data-c="1D466" xlink:href="#MJX-1-TEX-I-1D466"/></g><g data-mml-node="mi" transform="translate(1010,0)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="mi" transform="translate(1610,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(2139,0)"><use data-c="1D45A" xlink:href="#MJX-1-TEX-I-1D45A"/></g><g data-mml-node="mi" transform="translate(3017,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(3362,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g></g></g><g data-mml-node="mo" transform="translate(6292.2,0)"><use data-c="221D" xlink:href="#MJX-1-TEX-N-221D"/></g><g data-mml-node="mn" transform="translate(7348,0)"><use data-c="31" xlink:href="#MJX-1-TEX-N-31"/></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(7848,0)"><g data-mml-node="mo"><use data-c="2F" xlink:href="#MJX-1-TEX-N-2F"/></g></g><g data-mml-node="mn" transform="translate(8348,0)"><use data-c="32" xlink:href="#MJX-1-TEX-N-32"/></g><g data-mml-node="mo" transform="translate(9070.2,0)"><use data-c="D7" xlink:href="#MJX-1-TEX-N-D7"/></g><g data-mml-node="mi" transform="translate(10070.5,0)"><use data-c="1D436" xlink:href="#MJX-1-TEX-I-1D436"/></g><g data-mml-node="mi" transform="translate(10830.5,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(11359.5,0)"><use data-c="1D45D" xlink:href="#MJX-1-TEX-I-1D45D"/></g><g data-mml-node="mi" transform="translate(11862.5,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(12391.5,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g><g data-mml-node="mi" transform="translate(12824.5,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(13169.5,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(13530.5,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(13875.5,0)"><use data-c="1D463" xlink:href="#MJX-1-TEX-I-1D463"/></g><g data-mml-node="mi" transform="translate(14360.5,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mtext" transform="translate(14826.5,0)"><use data-c="A0" xlink:href="#MJX-1-TEX-N-A0"/></g><g data-mml-node="mi" transform="translate(15076.5,0)"><use data-c="1D459" xlink:href="#MJX-1-TEX-I-1D459"/></g><g data-mml-node="mi" transform="translate(15374.5,0)"><use data-c="1D45C" xlink:href="#MJX-1-TEX-I-1D45C"/></g><g data-mml-node="mi" transform="translate(15859.5,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(16388.5,0)"><use data-c="1D451" xlink:href="#MJX-1-TEX-I-1D451"/></g><g data-mml-node="mo" transform="translate(17130.7,0)"><use data-c="D7" xlink:href="#MJX-1-TEX-N-D7"/></g><g data-mml-node="mi" transform="translate(18130.9,0)"><use data-c="1D449" xlink:href="#MJX-1-TEX-I-1D449"/></g><g data-mml-node="mi" transform="translate(18899.9,0)"><use data-c="1D45C" xlink:href="#MJX-1-TEX-I-1D45C"/></g><g data-mml-node="mi" transform="translate(19384.9,0)"><use data-c="1D459" xlink:href="#MJX-1-TEX-I-1D459"/></g><g data-mml-node="mi" transform="translate(19682.9,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(20043.9,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(20572.9,0)"><use data-c="1D454" xlink:href="#MJX-1-TEX-I-1D454"/></g><g data-mml-node="msup" transform="translate(21049.9,0)"><g data-mml-node="mi"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mn" transform="translate(499,363) scale(0.707)"><use data-c="32" xlink:href="#MJX-1-TEX-N-32"/></g></g></g></g></svg></mjx-container>
<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.667ex;" xmlns="http://www.w3.org/2000/svg" width="71.536ex" height="2.554ex" role="img" focusable="false" viewbox="0 -833.9 31618.9 1128.9" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-1-TEX-I-1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z"/><path id="MJX-1-TEX-I-1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"/><path id="MJX-1-TEX-I-1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"/><path id="MJX-1-TEX-I-1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/><path id="MJX-1-TEX-I-1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"/><path id="MJX-1-TEX-I-1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"/><path id="MJX-1-TEX-I-1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"/><path id="MJX-1-TEX-N-221D" d="M56 124T56 216T107 375T238 442Q260 442 280 438T319 425T352 407T382 385T406 361T427 336T442 315T455 297T462 285L469 297Q555 442 679 442Q687 442 722 437V398H718Q710 400 694 400Q657 400 623 383T567 343T527 294T503 253T495 235Q495 231 520 192T554 143Q625 44 696 44Q717 44 719 46H722V-5Q695 -11 678 -11Q552 -11 457 141Q455 145 454 146L447 134Q362 -11 235 -11Q157 -11 107 56ZM93 213Q93 143 126 87T220 31Q258 31 292 48T349 88T389 137T413 178T421 196Q421 200 396 239T362 288Q322 345 288 366T213 387Q163 387 128 337T93 213Z"/><path id="MJX-1-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"/><path id="MJX-1-TEX-N-2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"/><path id="MJX-1-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"/><path id="MJX-1-TEX-N-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"/><path id="MJX-1-TEX-I-1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"/><path id="MJX-1-TEX-I-1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"/><path id="MJX-1-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/><path id="MJX-1-TEX-I-1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/><path id="MJX-1-TEX-N-A0" d=""/><path id="MJX-1-TEX-I-1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"/><path id="MJX-1-TEX-I-1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/><path id="MJX-1-TEX-I-1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"/><path id="MJX-1-TEX-I-1D439" d="M48 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H742Q749 676 749 669Q749 664 736 557T722 447Q720 440 702 440H690Q683 445 683 453Q683 454 686 477T689 530Q689 560 682 579T663 610T626 626T575 633T503 634H480Q398 633 393 631Q388 629 386 623Q385 622 352 492L320 363H375Q378 363 398 363T426 364T448 367T472 374T489 386Q502 398 511 419T524 457T529 475Q532 480 548 480H560Q567 475 567 470Q567 467 536 339T502 207Q500 200 482 200H470Q463 206 463 212Q463 215 468 234T473 274Q473 303 453 310T364 317H309L277 190Q245 66 245 60Q245 46 334 46H359Q365 40 365 39T363 19Q359 6 353 0H336Q295 2 185 2Q120 2 86 2T48 1Z"/><path id="MJX-1-TEX-I-1D45E" d="M33 157Q33 258 109 349T280 441Q340 441 372 389Q373 390 377 395T388 406T404 418Q438 442 450 442Q454 442 457 439T460 434Q460 425 391 149Q320 -135 320 -139Q320 -147 365 -148H390Q396 -156 396 -157T393 -175Q389 -188 383 -194H370Q339 -192 262 -192Q234 -192 211 -192T174 -192T157 -193Q143 -193 143 -185Q143 -182 145 -170Q149 -154 152 -151T172 -148Q220 -148 230 -141Q238 -136 258 -53T279 32Q279 33 272 29Q224 -10 172 -10Q117 -10 75 30T33 157ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"/><path id="MJX-1-TEX-I-1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"/><path id="MJX-1-TEX-I-210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"/></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D443" xlink:href="#MJX-1-TEX-I-1D443"/></g><g data-mml-node="mi" transform="translate(751,0)"><use data-c="1D45C" xlink:href="#MJX-1-TEX-I-1D45C"/></g><g data-mml-node="mi" transform="translate(1236,0)"><use data-c="1D464" xlink:href="#MJX-1-TEX-I-1D464"/></g><g data-mml-node="mi" transform="translate(1952,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="msub" transform="translate(2418,0)"><g data-mml-node="mi"><use data-c="1D45F" xlink:href="#MJX-1-TEX-I-1D45F"/></g><g data-mml-node="TeXAtom" transform="translate(484,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D451" xlink:href="#MJX-1-TEX-I-1D451"/></g><g data-mml-node="mi" transform="translate(520,0)"><use data-c="1D466" xlink:href="#MJX-1-TEX-I-1D466"/></g><g data-mml-node="mi" transform="translate(1010,0)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="mi" transform="translate(1610,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(2139,0)"><use data-c="1D45A" xlink:href="#MJX-1-TEX-I-1D45A"/></g><g data-mml-node="mi" transform="translate(3017,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(3362,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g></g></g><g data-mml-node="mo" transform="translate(5913.2,0)"><use data-c="221D" xlink:href="#MJX-1-TEX-N-221D"/></g><g data-mml-node="mn" transform="translate(6969,0)"><use data-c="31" xlink:href="#MJX-1-TEX-N-31"/></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(7469,0)"><g data-mml-node="mo"><use data-c="2F" xlink:href="#MJX-1-TEX-N-2F"/></g></g><g data-mml-node="mn" transform="translate(7969,0)"><use data-c="32" xlink:href="#MJX-1-TEX-N-32"/></g><g data-mml-node="mo" transform="translate(8691.2,0)"><use data-c="D7" xlink:href="#MJX-1-TEX-N-D7"/></g><g data-mml-node="mi" transform="translate(9691.5,0)"><use data-c="1D436" xlink:href="#MJX-1-TEX-I-1D436"/></g><g data-mml-node="mi" transform="translate(10451.5,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(10980.5,0)"><use data-c="1D45D" xlink:href="#MJX-1-TEX-I-1D45D"/></g><g data-mml-node="mi" transform="translate(11483.5,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(12012.5,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g><g data-mml-node="mi" transform="translate(12445.5,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(12790.5,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(13151.5,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(13496.5,0)"><use data-c="1D463" xlink:href="#MJX-1-TEX-I-1D463"/></g><g data-mml-node="mi" transform="translate(13981.5,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mtext" transform="translate(14447.5,0)"><use data-c="A0" xlink:href="#MJX-1-TEX-N-A0"/></g><g data-mml-node="mi" transform="translate(14697.5,0)"><use data-c="1D459" xlink:href="#MJX-1-TEX-I-1D459"/></g><g data-mml-node="mi" transform="translate(14995.5,0)"><use data-c="1D45C" xlink:href="#MJX-1-TEX-I-1D45C"/></g><g data-mml-node="mi" transform="translate(15480.5,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(16009.5,0)"><use data-c="1D451" xlink:href="#MJX-1-TEX-I-1D451"/></g><g data-mml-node="mo" transform="translate(16751.7,0)"><use data-c="D7" xlink:href="#MJX-1-TEX-N-D7"/></g><g data-mml-node="mi" transform="translate(17751.9,0)"><use data-c="1D449" xlink:href="#MJX-1-TEX-I-1D449"/></g><g data-mml-node="mi" transform="translate(18520.9,0)"><use data-c="1D45C" xlink:href="#MJX-1-TEX-I-1D45C"/></g><g data-mml-node="mi" transform="translate(19005.9,0)"><use data-c="1D459" xlink:href="#MJX-1-TEX-I-1D459"/></g><g data-mml-node="mi" transform="translate(19303.9,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(19664.9,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(20193.9,0)"><use data-c="1D454" xlink:href="#MJX-1-TEX-I-1D454"/></g><g data-mml-node="msup" transform="translate(20670.9,0)"><g data-mml-node="mi"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mn" transform="translate(499,363) scale(0.707)"><use data-c="32" xlink:href="#MJX-1-TEX-N-32"/></g></g><g data-mml-node="mo" transform="translate(21795.7,0)"><use data-c="D7" xlink:href="#MJX-1-TEX-N-D7"/></g><g data-mml-node="mi" transform="translate(22795.9,0)"><use data-c="1D439" xlink:href="#MJX-1-TEX-I-1D439"/></g><g data-mml-node="mi" transform="translate(23544.9,0)"><use data-c="1D45F" xlink:href="#MJX-1-TEX-I-1D45F"/></g><g data-mml-node="mi" transform="translate(23995.9,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(24461.9,0)"><use data-c="1D45E" xlink:href="#MJX-1-TEX-I-1D45E"/></g><g data-mml-node="mi" transform="translate(24921.9,0)"><use data-c="1D462" xlink:href="#MJX-1-TEX-I-1D462"/></g><g data-mml-node="mi" transform="translate(25493.9,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(25959.9,0)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="mi" transform="translate(26559.9,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g><g data-mml-node="mi" transform="translate(26992.9,0)"><use data-c="1D466" xlink:href="#MJX-1-TEX-I-1D466"/></g><g data-mml-node="mtext" transform="translate(27482.9,0)"><use data-c="A0" xlink:href="#MJX-1-TEX-N-A0"/></g><g data-mml-node="mi" transform="translate(27732.9,0)"><use data-c="1D460" xlink:href="#MJX-1-TEX-I-1D460"/></g><g data-mml-node="mi" transform="translate(28201.9,0)"><use data-c="1D464" xlink:href="#MJX-1-TEX-I-1D464"/></g><g data-mml-node="mi" transform="translate(28917.9,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(29262.9,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(29623.9,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g><g data-mml-node="mi" transform="translate(30056.9,0)"><use data-c="210E" xlink:href="#MJX-1-TEX-I-210E"/></g><g data-mml-node="mi" transform="translate(30632.9,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(31098.9,0)"><use data-c="1D451" xlink:href="#MJX-1-TEX-I-1D451"/></g></g></g></svg></mjx-container>
<p>现代处理器提供多种方式来提升能效比：</p>
<ul>
<li>暗硅</li>
<li>DVFS</li>
<li>低功耗模式</li>
<li>超频</li>
</ul>
<p>随着漏电电流的增加，静态功耗也增加：</p>
<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.464ex;" xmlns="http://www.w3.org/2000/svg" width="36.583ex" height="2.059ex" role="img" focusable="false" viewbox="0 -705 16169.7 910" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-1-TEX-I-1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z"/><path id="MJX-1-TEX-I-1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"/><path id="MJX-1-TEX-I-1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"/><path id="MJX-1-TEX-I-1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/><path id="MJX-1-TEX-I-1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"/><path id="MJX-1-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/><path id="MJX-1-TEX-I-1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"/><path id="MJX-1-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"/><path id="MJX-1-TEX-N-221D" d="M56 124T56 216T107 375T238 442Q260 442 280 438T319 425T352 407T382 385T406 361T427 336T442 315T455 297T462 285L469 297Q555 442 679 442Q687 442 722 437V398H718Q710 400 694 400Q657 400 623 383T567 343T527 294T503 253T495 235Q495 231 520 192T554 143Q625 44 696 44Q717 44 719 46H722V-5Q695 -11 678 -11Q552 -11 457 141Q455 145 454 146L447 134Q362 -11 235 -11Q157 -11 107 56ZM93 213Q93 143 126 87T220 31Q258 31 292 48T349 88T389 137T413 178T421 196Q421 200 396 239T362 288Q322 345 288 366T213 387Q163 387 128 337T93 213Z"/><path id="MJX-1-TEX-I-1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"/><path id="MJX-1-TEX-I-1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-N-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"/><path id="MJX-1-TEX-I-1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/><path id="MJX-1-TEX-I-1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"/><path id="MJX-1-TEX-I-1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"/></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D443" xlink:href="#MJX-1-TEX-I-1D443"/></g><g data-mml-node="mi" transform="translate(751,0)"><use data-c="1D45C" xlink:href="#MJX-1-TEX-I-1D45C"/></g><g data-mml-node="mi" transform="translate(1236,0)"><use data-c="1D464" xlink:href="#MJX-1-TEX-I-1D464"/></g><g data-mml-node="mi" transform="translate(1952,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="msub" transform="translate(2418,0)"><g data-mml-node="mi"><use data-c="1D45F" xlink:href="#MJX-1-TEX-I-1D45F"/></g><g data-mml-node="TeXAtom" transform="translate(484,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D460" xlink:href="#MJX-1-TEX-I-1D460"/></g><g data-mml-node="mi" transform="translate(469,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(830,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(1359,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(1720,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(2065,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g></g></g><g data-mml-node="mo" transform="translate(4996.1,0)"><use data-c="221D" xlink:href="#MJX-1-TEX-N-221D"/></g><g data-mml-node="mi" transform="translate(6051.9,0)"><use data-c="1D436" xlink:href="#MJX-1-TEX-I-1D436"/></g><g data-mml-node="mi" transform="translate(6811.9,0)"><use data-c="1D462" xlink:href="#MJX-1-TEX-I-1D462"/></g><g data-mml-node="mi" transform="translate(7383.9,0)"><use data-c="1D45F" xlink:href="#MJX-1-TEX-I-1D45F"/></g><g data-mml-node="mi" transform="translate(7834.9,0)"><use data-c="1D45F" xlink:href="#MJX-1-TEX-I-1D45F"/></g><g data-mml-node="mi" transform="translate(8285.9,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(8751.9,0)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="msub" transform="translate(9351.9,0)"><g data-mml-node="mi"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="TeXAtom" transform="translate(394,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D460" xlink:href="#MJX-1-TEX-I-1D460"/></g><g data-mml-node="mi" transform="translate(469,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(830,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(1359,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(1720,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(2065,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g></g></g><g data-mml-node="mo" transform="translate(11784.5,0)"><use data-c="D7" xlink:href="#MJX-1-TEX-N-D7"/></g><g data-mml-node="mi" transform="translate(12784.7,0)"><use data-c="1D449" xlink:href="#MJX-1-TEX-I-1D449"/></g><g data-mml-node="mi" transform="translate(13553.7,0)"><use data-c="1D45C" xlink:href="#MJX-1-TEX-I-1D45C"/></g><g data-mml-node="mi" transform="translate(14038.7,0)"><use data-c="1D459" xlink:href="#MJX-1-TEX-I-1D459"/></g><g data-mml-node="mi" transform="translate(14336.7,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(14697.7,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(15226.7,0)"><use data-c="1D454" xlink:href="#MJX-1-TEX-I-1D454"/></g><g data-mml-node="mi" transform="translate(15703.7,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g></g></g></svg></mjx-container>
<h4 id="The-Shift-in-Computer-Architecture-Because-of-Limits-of-Energy">The Shift in Computer Architecture Because of Limits of Energy</h4>
<p>能效比的追求使得DSA成为未来的希望。</p>
<h3 id="1-6-Trends-in-Cost">1.6 Trends in Cost</h3>
<h4 id="The-Impact-of-Time-Volume-and-Commoditization">The Impact of Time, Volume, and Commoditization</h4>
<p>电子元件的价格会随着时间下降，因为随着学习曲线，制造的良率会提升。生产量的提升也会造成价格的降低，因为更快的学习曲线，更多的谈判空间和更少的均摊成本。商品化意味着激烈的竞争，使得价格进一步降低。</p>
<h4 id="Cost-of-an-Integrated-Circuit">Cost of an Integrated Circuit</h4>
<p>集成电路的成本包括晶片成本，测试成本和封装成本。晶片成本与晶圆成本，晶片面积，良率有关。晶片面积的缩小可以有效提高良率，冗余的方法也可以提升良率。对于设计人员来说，只需要关注芯片面积，成本随芯片面积的增加呈平方增加。另外，对于低产量的芯片，掩膜成本也是不可忽视的一部分。</p>
<h4 id="Cost-Versus-Price">Cost Versus Price</h4>
<p>商品化导致利润空间缩小。</p>
<h4 id="Cost-of-Manufacturing-Versus-Cost-of-Operation">Cost of Manufacturing Versus Cost of Operation</h4>
<p>WSC中的运营成本很高。</p>
<h3 id="1-7-Dependability">1.7 Dependability</h3>
<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.912ex;" xmlns="http://www.w3.org/2000/svg" width="35.051ex" height="2.896ex" role="img" focusable="false" viewbox="0 -877 15492.6 1279.9" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-1-TEX-I-1D440" d="M289 629Q289 635 232 637Q208 637 201 638T194 648Q194 649 196 659Q197 662 198 666T199 671T201 676T203 679T207 681T212 683T220 683T232 684Q238 684 262 684T307 683Q386 683 398 683T414 678Q415 674 451 396L487 117L510 154Q534 190 574 254T662 394Q837 673 839 675Q840 676 842 678T846 681L852 683H948Q965 683 988 683T1017 684Q1051 684 1051 673Q1051 668 1048 656T1045 643Q1041 637 1008 637Q968 636 957 634T939 623Q936 618 867 340T797 59Q797 55 798 54T805 50T822 48T855 46H886Q892 37 892 35Q892 19 885 5Q880 0 869 0Q864 0 828 1T736 2Q675 2 644 2T609 1Q592 1 592 11Q592 13 594 25Q598 41 602 43T625 46Q652 46 685 49Q699 52 704 61Q706 65 742 207T813 490T848 631L654 322Q458 10 453 5Q451 4 449 3Q444 0 433 0Q418 0 415 7Q413 11 374 317L335 624L267 354Q200 88 200 79Q206 46 272 46H282Q288 41 289 37T286 19Q282 3 278 1Q274 0 267 0Q265 0 255 0T221 1T157 2Q127 2 95 1T58 0Q43 0 39 2T35 11Q35 13 38 25T43 40Q45 46 65 46Q135 46 154 86Q158 92 223 354T289 629Z"/><path id="MJX-1-TEX-I-1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"/><path id="MJX-1-TEX-I-1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"/><path id="MJX-1-TEX-I-1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"/><path id="MJX-1-TEX-I-1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/><path id="MJX-1-TEX-N-A0" d=""/><path id="MJX-1-TEX-I-1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"/><path id="MJX-1-TEX-I-1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/><path id="MJX-1-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"/><path id="MJX-1-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/><path id="MJX-1-TEX-I-1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/><path id="MJX-1-TEX-I-1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/><path id="MJX-1-TEX-I-1D439" d="M48 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H742Q749 676 749 669Q749 664 736 557T722 447Q720 440 702 440H690Q683 445 683 453Q683 454 686 477T689 530Q689 560 682 579T663 610T626 626T575 633T503 634H480Q398 633 393 631Q388 629 386 623Q385 622 352 492L320 363H375Q378 363 398 363T426 364T448 367T472 374T489 386Q502 398 511 419T524 457T529 475Q532 480 548 480H560Q567 475 567 470Q567 467 536 339T502 207Q500 200 482 200H470Q463 206 463 212Q463 215 468 234T473 274Q473 303 453 310T364 317H309L277 190Q245 66 245 60Q245 46 334 46H359Q365 40 365 39T363 19Q359 6 353 0H336Q295 2 185 2Q120 2 86 2T48 1Z"/><path id="MJX-1-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"/><path id="MJX-1-TEX-I-1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"/></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D440" xlink:href="#MJX-1-TEX-I-1D440"/></g><g data-mml-node="mi" transform="translate(1051,0)"><use data-c="1D45C" xlink:href="#MJX-1-TEX-I-1D45C"/></g><g data-mml-node="mi" transform="translate(1536,0)"><use data-c="1D451" xlink:href="#MJX-1-TEX-I-1D451"/></g><g data-mml-node="mi" transform="translate(2056,0)"><use data-c="1D462" xlink:href="#MJX-1-TEX-I-1D462"/></g><g data-mml-node="mi" transform="translate(2628,0)"><use data-c="1D459" xlink:href="#MJX-1-TEX-I-1D459"/></g><g data-mml-node="mi" transform="translate(2926,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mtext" transform="translate(3392,0)"><use data-c="A0" xlink:href="#MJX-1-TEX-N-A0"/></g><g data-mml-node="mi" transform="translate(3642,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(4171,0)"><use data-c="1D463" xlink:href="#MJX-1-TEX-I-1D463"/></g><g data-mml-node="mi" transform="translate(4656,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(5185,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(5530,0)"><use data-c="1D459" xlink:href="#MJX-1-TEX-I-1D459"/></g><g data-mml-node="mi" transform="translate(5828,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(6357,0)"><use data-c="1D44F" xlink:href="#MJX-1-TEX-I-1D44F"/></g><g data-mml-node="mi" transform="translate(6786,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(7131,0)"><use data-c="1D459" xlink:href="#MJX-1-TEX-I-1D459"/></g><g data-mml-node="mi" transform="translate(7429,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(7774,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(8135,0)"><use data-c="1D466" xlink:href="#MJX-1-TEX-I-1D466"/></g><g data-mml-node="mo" transform="translate(8902.8,0)"><use data-c="3D" xlink:href="#MJX-1-TEX-N-3D"/></g><g data-mml-node="mfrac" transform="translate(9958.6,0)"><g data-mml-node="mrow" transform="translate(1632.8,394) scale(0.707)"><g data-mml-node="mi"><use data-c="1D440" xlink:href="#MJX-1-TEX-I-1D440"/></g><g data-mml-node="mi" transform="translate(1051,0)"><use data-c="1D447" xlink:href="#MJX-1-TEX-I-1D447"/></g><g data-mml-node="mi" transform="translate(1755,0)"><use data-c="1D447" xlink:href="#MJX-1-TEX-I-1D447"/></g><g data-mml-node="mi" transform="translate(2459,0)"><use data-c="1D439" xlink:href="#MJX-1-TEX-I-1D439"/></g></g><g data-mml-node="mrow" transform="translate(220,-345) scale(0.707)"><g data-mml-node="mi"><use data-c="1D440" xlink:href="#MJX-1-TEX-I-1D440"/></g><g data-mml-node="mi" transform="translate(1051,0)"><use data-c="1D447" xlink:href="#MJX-1-TEX-I-1D447"/></g><g data-mml-node="mi" transform="translate(1755,0)"><use data-c="1D447" xlink:href="#MJX-1-TEX-I-1D447"/></g><g data-mml-node="mi" transform="translate(2459,0)"><use data-c="1D439" xlink:href="#MJX-1-TEX-I-1D439"/></g><g data-mml-node="mo" transform="translate(3208,0)"><use data-c="2B" xlink:href="#MJX-1-TEX-N-2B"/></g><g data-mml-node="mi" transform="translate(3986,0)"><use data-c="1D440" xlink:href="#MJX-1-TEX-I-1D440"/></g><g data-mml-node="mi" transform="translate(5037,0)"><use data-c="1D447" xlink:href="#MJX-1-TEX-I-1D447"/></g><g data-mml-node="mi" transform="translate(5741,0)"><use data-c="1D447" xlink:href="#MJX-1-TEX-I-1D447"/></g><g data-mml-node="mi" transform="translate(6445,0)"><use data-c="1D445" xlink:href="#MJX-1-TEX-I-1D445"/></g></g><rect width="5294" height="60" x="120" y="220"/></g></g></g></svg></mjx-container>
<p>冗余可以有效提升系统的可靠性。</p>
<h3 id="1-8-Measuring-Reporting-and-Summarizing-Performance">1.8 Measuring, Reporting, and Summarizing Performance</h3>
<p>不同人对性能的定义是不同的，我们坚持性能是运行真实程序的时间。时间可能是真实流逝的时间，也可能是CPU时间。</p>
<h4 id="Benchmarks">Benchmarks</h4>
<p>运行简化的程序来测试计算机的性能是不准确的。编译选项、是否允许修改源码也会影响运行基准测试程序的性能。基准测试程序套件包含许多不同的测试程序，避免将鸡蛋放在一个篮子里。SPEC推出了很多成功的基准测试程序套件。</p>
<p>个人电脑的测试程序分为处理器密集型和图像密集型。SPEC89是测试处理器性能的程序，已进行了6次迭代。最新的SPEC2017包含10个整数测试程序和17个浮点测试程序，但其可能不能量化21世纪的电脑性能，因为其甚至未使用动态链接。</p>
<p>服务器有不同的用途，也有不同的性能指标。最简单的方式是运行多个SPEC2017的拷贝来测试吞吐率，称为SPECrate。服务器通常还有大量的IO和文件操作，SPEC也提供测试文件系统、Java性能的测试程序。TPC是一套测试交易处理性能的测试程序。</p>
<h4 id="Reporting-Performance-Results">Reporting Performance Results</h4>
<p>实验要具备可重复性。</p>
<h4 id="Summarizing-Performance-Results">Summarizing Performance Results</h4>
<p>将待测电脑运行SPEC程序的时间除以参考电脑运行SPEC程序的时间，得到的比值称为SPECRatio。比较两台电脑的性能时，参考电脑的选择不会有任何影响。SPEC分数的计算使用几何平均。</p>
<h3 id="1-9-Quantitative-Principles-of-Computer-Design">1.9 Quantitative Principles of Computer Design</h3>
<h4 id="Take-Advantage-of-Parallelism">Take Advantage of Parallelism</h4>
<p>挖掘多个层级的并行性。</p>
<h4 id="Principle-of-Locality">Principle of Locality</h4>
<p>时间相关性和空间相关性。</p>
<h4 id="Focus-on-the-Common-Case">Focus on the Common Case</h4>
<p>优先考虑常见的情况。</p>
<h4 id="Amdahl’s-Law">Amdahl’s Law</h4>
<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -2.298ex;" xmlns="http://www.w3.org/2000/svg" width="43.073ex" height="4.255ex" role="img" focusable="false" viewbox="0 -864.9 19038.3 1880.7" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-1-TEX-I-1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"/><path id="MJX-1-TEX-I-1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"/><path id="MJX-1-TEX-I-1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/><path id="MJX-1-TEX-I-1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"/><path id="MJX-1-TEX-I-1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"/><path id="MJX-1-TEX-I-1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/><path id="MJX-1-TEX-I-1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"/><path id="MJX-1-TEX-I-1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"/><path id="MJX-1-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/><path id="MJX-1-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"/><path id="MJX-1-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/><path id="MJX-1-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"/><path id="MJX-1-TEX-I-1D439" d="M48 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H742Q749 676 749 669Q749 664 736 557T722 447Q720 440 702 440H690Q683 445 683 453Q683 454 686 477T689 530Q689 560 682 579T663 610T626 626T575 633T503 634H480Q398 633 393 631Q388 629 386 623Q385 622 352 492L320 363H375Q378 363 398 363T426 364T448 367T472 374T489 386Q502 398 511 419T524 457T529 475Q532 480 548 480H560Q567 475 567 470Q567 467 536 339T502 207Q500 200 482 200H470Q463 206 463 212Q463 215 468 234T473 274Q473 303 453 310T364 317H309L277 190Q245 66 245 60Q245 46 334 46H359Q365 40 365 39T363 19Q359 6 353 0H336Q295 2 185 2Q120 2 86 2T48 1Z"/><path id="MJX-1-TEX-I-1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"/><path id="MJX-1-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/><path id="MJX-1-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"/><path id="MJX-1-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"/><path id="MJX-1-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D446" xlink:href="#MJX-1-TEX-I-1D446"/></g><g data-mml-node="mi" transform="translate(645,0)"><use data-c="1D45D" xlink:href="#MJX-1-TEX-I-1D45D"/></g><g data-mml-node="mi" transform="translate(1148,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(1614,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(2080,0)"><use data-c="1D451" xlink:href="#MJX-1-TEX-I-1D451"/></g><g data-mml-node="mi" transform="translate(2600,0)"><use data-c="1D462" xlink:href="#MJX-1-TEX-I-1D462"/></g><g data-mml-node="msub" transform="translate(3172,0)"><g data-mml-node="mi"><use data-c="1D45D" xlink:href="#MJX-1-TEX-I-1D45D"/></g><g data-mml-node="TeXAtom" transform="translate(536,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D45C" xlink:href="#MJX-1-TEX-I-1D45C"/></g><g data-mml-node="mi" transform="translate(485,0)"><use data-c="1D463" xlink:href="#MJX-1-TEX-I-1D463"/></g><g data-mml-node="mi" transform="translate(970,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(1436,0)"><use data-c="1D45F" xlink:href="#MJX-1-TEX-I-1D45F"/></g><g data-mml-node="mi" transform="translate(1887,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(2416,0)"><use data-c="1D459" xlink:href="#MJX-1-TEX-I-1D459"/></g><g data-mml-node="mi" transform="translate(2714,0)"><use data-c="1D459" xlink:href="#MJX-1-TEX-I-1D459"/></g></g></g><g data-mml-node="mo" transform="translate(6165.6,0)"><use data-c="3D" xlink:href="#MJX-1-TEX-N-3D"/></g><g data-mml-node="mfrac" transform="translate(7221.4,0)"><g data-mml-node="mn" transform="translate(5731.7,394) scale(0.707)"><use data-c="31" xlink:href="#MJX-1-TEX-N-31"/></g><g data-mml-node="mrow" transform="translate(220,-596.1) scale(0.707)"><g data-mml-node="mo"><use data-c="28" xlink:href="#MJX-1-TEX-N-28"/></g><g data-mml-node="mn" transform="translate(389,0)"><use data-c="31" xlink:href="#MJX-1-TEX-N-31"/></g><g data-mml-node="mo" transform="translate(889,0)"><use data-c="2212" xlink:href="#MJX-1-TEX-N-2212"/></g><g data-mml-node="mi" transform="translate(1667,0)"><use data-c="1D439" xlink:href="#MJX-1-TEX-I-1D439"/></g><g data-mml-node="mi" transform="translate(2416,0)"><use data-c="1D45F" xlink:href="#MJX-1-TEX-I-1D45F"/></g><g data-mml-node="mi" transform="translate(2867,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(3396,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g><g data-mml-node="mi" transform="translate(3829,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(4190,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(4535,0)"><use data-c="1D45C" xlink:href="#MJX-1-TEX-I-1D45C"/></g><g data-mml-node="msub" transform="translate(5020,0)"><g data-mml-node="mi"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="TeXAtom" transform="translate(633,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(466,0)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="mi" transform="translate(1066,0)"><use data-c="210E" xlink:href="#MJX-1-TEX-I-210E"/></g><g data-mml-node="mi" transform="translate(1642,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(2171,0)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="mi" transform="translate(2771,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g><g data-mml-node="mi" transform="translate(3204,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(3670,0)"><use data-c="1D451" xlink:href="#MJX-1-TEX-I-1D451"/></g></g></g><g data-mml-node="mo" transform="translate(8665.8,0)"><use data-c="2B" xlink:href="#MJX-1-TEX-N-2B"/></g><g data-mml-node="mfrac" transform="translate(9443.8,0)"><g data-mml-node="mrow" transform="translate(220,588.5) scale(0.707)"><g data-mml-node="mi"><use data-c="1D439" xlink:href="#MJX-1-TEX-I-1D439"/></g><g data-mml-node="mi" transform="translate(749,0)"><use data-c="1D45F" xlink:href="#MJX-1-TEX-I-1D45F"/></g><g data-mml-node="mi" transform="translate(1200,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(1729,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g><g data-mml-node="mi" transform="translate(2162,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(2523,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(2868,0)"><use data-c="1D45C" xlink:href="#MJX-1-TEX-I-1D45C"/></g><g data-mml-node="msub" transform="translate(3353,0)"><g data-mml-node="mi"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(633,-340.4)"><g data-mml-node="mi"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(466,0)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="mi" transform="translate(1066,0)"><use data-c="210E" xlink:href="#MJX-1-TEX-I-210E"/></g><g data-mml-node="mi" transform="translate(1642,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(2171,0)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="mi" transform="translate(2771,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g><g data-mml-node="mi" transform="translate(3204,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(3670,0)"><use data-c="1D451" xlink:href="#MJX-1-TEX-I-1D451"/></g></g></g></g><g data-mml-node="mrow" transform="translate(318.3,-345) scale(0.707)"><g data-mml-node="mi"><use data-c="1D446" xlink:href="#MJX-1-TEX-I-1D446"/></g><g data-mml-node="mi" transform="translate(645,0)"><use data-c="1D45D" xlink:href="#MJX-1-TEX-I-1D45D"/></g><g data-mml-node="mi" transform="translate(1148,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(1614,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(2080,0)"><use data-c="1D451" xlink:href="#MJX-1-TEX-I-1D451"/></g><g data-mml-node="mi" transform="translate(2600,0)"><use data-c="1D462" xlink:href="#MJX-1-TEX-I-1D462"/></g><g data-mml-node="msub" transform="translate(3172,0)"><g data-mml-node="mi"><use data-c="1D45D" xlink:href="#MJX-1-TEX-I-1D45D"/></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(536,-340.4)"><g data-mml-node="mi"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(466,0)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="mi" transform="translate(1066,0)"><use data-c="210E" xlink:href="#MJX-1-TEX-I-210E"/></g><g data-mml-node="mi" transform="translate(1642,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(2171,0)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="mi" transform="translate(2771,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g><g data-mml-node="mi" transform="translate(3204,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(3670,0)"><use data-c="1D451" xlink:href="#MJX-1-TEX-I-1D451"/></g></g></g></g><rect width="6016.7" height="60" x="120" y="220"/></g><g data-mml-node="mo" transform="translate(15700.4,0)"><use data-c="29" xlink:href="#MJX-1-TEX-N-29"/></g></g><rect width="11577" height="60" x="120" y="220"/></g></g></g></svg></mjx-container>
<h4 id="The-Processor-Performance-Equation">The Processor Performance Equation</h4>
<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.464ex;" xmlns="http://www.w3.org/2000/svg" width="76.033ex" height="2.059ex" role="img" focusable="false" viewbox="0 -705 33606.4 910" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-1-TEX-I-1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"/><path id="MJX-1-TEX-I-1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z"/><path id="MJX-1-TEX-I-1D448" d="M107 637Q73 637 71 641Q70 643 70 649Q70 673 81 682Q83 683 98 683Q139 681 234 681Q268 681 297 681T342 682T362 682Q378 682 378 672Q378 670 376 658Q371 641 366 638H364Q362 638 359 638T352 638T343 637T334 637Q295 636 284 634T266 623Q265 621 238 518T184 302T154 169Q152 155 152 140Q152 86 183 55T269 24Q336 24 403 69T501 205L552 406Q599 598 599 606Q599 633 535 637Q511 637 511 648Q511 650 513 660Q517 676 519 679T529 683Q532 683 561 682T645 680Q696 680 723 681T752 682Q767 682 767 672Q767 650 759 642Q756 637 737 637Q666 633 648 597Q646 592 598 404Q557 235 548 205Q515 105 433 42T263 -22Q171 -22 116 34T60 167V183Q60 201 115 421Q164 622 164 628Q164 635 107 637Z"/><path id="MJX-1-TEX-N-A0" d=""/><path id="MJX-1-TEX-I-1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/><path id="MJX-1-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/><path id="MJX-1-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/><path id="MJX-1-TEX-I-1D43C" d="M43 1Q26 1 26 10Q26 12 29 24Q34 43 39 45Q42 46 54 46H60Q120 46 136 53Q137 53 138 54Q143 56 149 77T198 273Q210 318 216 344Q286 624 286 626Q284 630 284 631Q274 637 213 637H193Q184 643 189 662Q193 677 195 680T209 683H213Q285 681 359 681Q481 681 487 683H497Q504 676 504 672T501 655T494 639Q491 637 471 637Q440 637 407 634Q393 631 388 623Q381 609 337 432Q326 385 315 341Q245 65 245 59Q245 52 255 50T307 46H339Q345 38 345 37T342 19Q338 6 332 0H316Q279 2 179 2Q143 2 113 2T65 2T43 1Z"/><path id="MJX-1-TEX-I-1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"/><path id="MJX-1-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/><path id="MJX-1-TEX-I-1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"/><path id="MJX-1-TEX-I-1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"/><path id="MJX-1-TEX-N-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"/><path id="MJX-1-TEX-I-1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"/><path id="MJX-1-TEX-I-1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"/><path id="MJX-1-TEX-I-1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"/></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D436" xlink:href="#MJX-1-TEX-I-1D436"/></g><g data-mml-node="mi" transform="translate(760,0)"><use data-c="1D443" xlink:href="#MJX-1-TEX-I-1D443"/></g><g data-mml-node="mi" transform="translate(1511,0)"><use data-c="1D448" xlink:href="#MJX-1-TEX-I-1D448"/></g><g data-mml-node="mtext" transform="translate(2278,0)"><use data-c="A0" xlink:href="#MJX-1-TEX-N-A0"/></g><g data-mml-node="mi" transform="translate(2528,0)"><use data-c="1D447" xlink:href="#MJX-1-TEX-I-1D447"/></g><g data-mml-node="mi" transform="translate(3232,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(3577,0)"><use data-c="1D45A" xlink:href="#MJX-1-TEX-I-1D45A"/></g><g data-mml-node="mi" transform="translate(4455,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mo" transform="translate(5198.8,0)"><use data-c="3D" xlink:href="#MJX-1-TEX-N-3D"/></g><g data-mml-node="mi" transform="translate(6254.6,0)"><use data-c="1D43C" xlink:href="#MJX-1-TEX-I-1D43C"/></g><g data-mml-node="mi" transform="translate(6758.6,0)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="mi" transform="translate(7358.6,0)"><use data-c="1D460" xlink:href="#MJX-1-TEX-I-1D460"/></g><g data-mml-node="mi" transform="translate(7827.6,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(8188.6,0)"><use data-c="1D45F" xlink:href="#MJX-1-TEX-I-1D45F"/></g><g data-mml-node="mi" transform="translate(8639.6,0)"><use data-c="1D462" xlink:href="#MJX-1-TEX-I-1D462"/></g><g data-mml-node="mi" transform="translate(9211.6,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g><g data-mml-node="mi" transform="translate(9644.6,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(10005.6,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(10350.6,0)"><use data-c="1D45C" xlink:href="#MJX-1-TEX-I-1D45C"/></g><g data-mml-node="mi" transform="translate(10835.6,0)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="mtext" transform="translate(11435.6,0)"><use data-c="A0" xlink:href="#MJX-1-TEX-N-A0"/></g><g data-mml-node="mi" transform="translate(11685.6,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g><g data-mml-node="mi" transform="translate(12118.6,0)"><use data-c="1D45C" xlink:href="#MJX-1-TEX-I-1D45C"/></g><g data-mml-node="mi" transform="translate(12603.6,0)"><use data-c="1D462" xlink:href="#MJX-1-TEX-I-1D462"/></g><g data-mml-node="mi" transform="translate(13175.6,0)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="mi" transform="translate(13775.6,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mo" transform="translate(14358.8,0)"><use data-c="D7" xlink:href="#MJX-1-TEX-N-D7"/></g><g data-mml-node="mi" transform="translate(15359,0)"><use data-c="1D436" xlink:href="#MJX-1-TEX-I-1D436"/></g><g data-mml-node="mi" transform="translate(16119,0)"><use data-c="1D466" xlink:href="#MJX-1-TEX-I-1D466"/></g><g data-mml-node="mi" transform="translate(16609,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g><g data-mml-node="mi" transform="translate(17042,0)"><use data-c="1D459" xlink:href="#MJX-1-TEX-I-1D459"/></g><g data-mml-node="mi" transform="translate(17340,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(17806,0)"><use data-c="1D460" xlink:href="#MJX-1-TEX-I-1D460"/></g><g data-mml-node="mtext" transform="translate(18275,0)"><use data-c="A0" xlink:href="#MJX-1-TEX-N-A0"/></g><g data-mml-node="mi" transform="translate(18525,0)"><use data-c="1D45D" xlink:href="#MJX-1-TEX-I-1D45D"/></g><g data-mml-node="mi" transform="translate(19028,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(19494,0)"><use data-c="1D45F" xlink:href="#MJX-1-TEX-I-1D45F"/></g><g data-mml-node="mtext" transform="translate(19945,0)"><use data-c="A0" xlink:href="#MJX-1-TEX-N-A0"/></g><g data-mml-node="mi" transform="translate(20195,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(20540,0)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="mi" transform="translate(21140,0)"><use data-c="1D460" xlink:href="#MJX-1-TEX-I-1D460"/></g><g data-mml-node="mi" transform="translate(21609,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(21970,0)"><use data-c="1D45F" xlink:href="#MJX-1-TEX-I-1D45F"/></g><g data-mml-node="mi" transform="translate(22421,0)"><use data-c="1D462" xlink:href="#MJX-1-TEX-I-1D462"/></g><g data-mml-node="mi" transform="translate(22993,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g><g data-mml-node="mi" transform="translate(23426,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(23787,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(24132,0)"><use data-c="1D45C" xlink:href="#MJX-1-TEX-I-1D45C"/></g><g data-mml-node="mi" transform="translate(24617,0)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="mo" transform="translate(25439.2,0)"><use data-c="D7" xlink:href="#MJX-1-TEX-N-D7"/></g><g data-mml-node="mi" transform="translate(26439.4,0)"><use data-c="1D436" xlink:href="#MJX-1-TEX-I-1D436"/></g><g data-mml-node="mi" transform="translate(27199.4,0)"><use data-c="1D459" xlink:href="#MJX-1-TEX-I-1D459"/></g><g data-mml-node="mi" transform="translate(27497.4,0)"><use data-c="1D45C" xlink:href="#MJX-1-TEX-I-1D45C"/></g><g data-mml-node="mi" transform="translate(27982.4,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g><g data-mml-node="mi" transform="translate(28415.4,0)"><use data-c="1D458" xlink:href="#MJX-1-TEX-I-1D458"/></g><g data-mml-node="mtext" transform="translate(28936.4,0)"><use data-c="A0" xlink:href="#MJX-1-TEX-N-A0"/></g><g data-mml-node="mi" transform="translate(29186.4,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g><g data-mml-node="mi" transform="translate(29619.4,0)"><use data-c="1D466" xlink:href="#MJX-1-TEX-I-1D466"/></g><g data-mml-node="mi" transform="translate(30109.4,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g><g data-mml-node="mi" transform="translate(30542.4,0)"><use data-c="1D459" xlink:href="#MJX-1-TEX-I-1D459"/></g><g data-mml-node="mi" transform="translate(30840.4,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mtext" transform="translate(31306.4,0)"><use data-c="A0" xlink:href="#MJX-1-TEX-N-A0"/></g><g data-mml-node="mi" transform="translate(31556.4,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(31917.4,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(32262.4,0)"><use data-c="1D45A" xlink:href="#MJX-1-TEX-I-1D45A"/></g><g data-mml-node="mi" transform="translate(33140.4,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g></g></g></svg></mjx-container>
<p>其中，时钟周期和硬件工艺、组成结构有关，CPI和组成结构、ISA有关，指令数和ISA、编译器有关。</p>
<h3 id="1-10-Putting-It-All-Together-Performance-Price-and-Power">1.10 Putting It All Together: Performance, Price, and Power</h3>
<p>比较了三个戴尔服务器的各项指标。</p>
<h2 id="Chapter2-Memory-Hierarchy-Design">Chapter2: Memory Hierarchy Design</h2>
<h3 id="2-1-Introduction">2.1 Introduction</h3>
<p>如今的存储器层次结构一般包含“寄存器-L1$-L2$-L3$-内存-硬盘/闪存”几部分，大部分情况下下层的存储器的内容是上层的存储器的内容的超集。尽管近年来单核性能的停滞不前使得处理器和内存之间的“剪刀差”不再扩大，但是多核的趋势其实对内存造成了更大的压力。如今的处理器通过流水化的Cache，更多的Cache层次等方式来解决内存访问的瓶颈，预计使用嵌入式DRAM实现的L4$将会是未来的一个趋势。传统意义上，设计者只需关注Cache的性能，即“内存平均访问时间”，也就是Cache的命中延迟、命中率和缺失惩罚，但如今更大的Cache造成了可观的功耗，在可移动设备的CPU中甚至达到25%-50%，功耗也成为设计者的重要考虑因素之一。</p>
<h4 id="Basics-of-Memory-Hierarchies-A-Quick-Review">Basics of Memory Hierarchies: A Quick Review</h4>
<p>一个Cache行由若干个字组成，其包含一个<code>tag</code>域。最受欢迎的Cache组织结构是组相联结构，直接映射和全相联结构是其特殊情况。Cache的写策略有写回和写穿透，两者都可以用写缓存来加速。</p>
<p>缺失率是Cache性能的重量衡量指标，根据3C模型将Cache缺失分为三类：强制缺失、容量缺失和冲突缺失。随着超线程和多核技术的广泛应用，我们也可以增加第四个C：一致性缺失。</p>
<p>用缺失率来衡量Cache性能具有误导性，设计者也会使用“每千条指令缺失数”和“内存平均访问时间”作为衡量指标。但由于动态调度和超线程，这些指标也不能和真正的程序运行时间相关联。</p>
<p>以下六种简单的方法可以优化Cache，但这六种方法都有一定的副作用。</p>
<ol>
<li>更大的Cache行以减小缺失率</li>
<li>更大的Cache以减小缺失率</li>
<li>更大的组相联度以减小缺失率</li>
<li>更多的Cache层次以减小缺失惩罚</li>
<li>读缺失的优先度高于写缺失以减小缺失惩罚</li>
<li>避免虚实地址翻译后再索引Cache以减小命中延迟</li>
</ol>
<h3 id="2-2-Memory-Technology-and-Optimizations">2.2 Memory Technology and Optimizations</h3>
<p>随着突发传输的广泛应用，内存延迟用两个维度来描述：访问时间和周期时间。访问时间指发送读请求到读数据返回的时间；周期时间指两个不相关的读请求之间的最小间隔。所有的计算机都用DRAM组成内存，用SRAM组成Cache。</p>
<h4 id="SRAM-Technology">SRAM Technology</h4>
<p>SRAM的访问时间和周期时间基本相同，它一般使用6个晶体管来存储一个bit。Cache的访问时间和Cache行数量呈正相关，而功耗和Cache大小（静态功耗）和Cache行数量（动态功耗）相关。</p>
<h4 id="DRAM-Technology">DRAM Technology</h4>
<p>访问DRAM的地址被分为行地址和列地址，行地址在RAS期间被使用，列地址在CAS期间被使用。DRAM在读取数据时读取线必须经过预充电，读取的一行数据被放在行缓冲中，由于读取的过程损坏了行中的数据，所以如果行缓冲中的数据要被替换，需要先将旧的数据写回到对应的行中而不是直接丢弃。由于漏电，DRAM还需要定期刷新每一行，即将它读出然后重新写入，设计者一般将刷新所用的时间控制在5%以内。</p>
<h4 id="Improving-Memory-Performance-Inside-a-DRAM-Chip-SDRAMs">Improving Memory Performance Inside a DRAM Chip: SDRAMs</h4>
<p>最早的DRAM是异步的，在90年代中期设计者加入了时钟，发明了同步DRAM（SDRAM），还加入了突发传输模式。内存带宽需求的增长使得DRAM单次传输的比特数逐渐增长，从4bits一直到16bits，在00年代还引入了DDR技术，在时钟的上升沿和下降沿都传输数据。最后，SDRAM还引入了bank来控制功耗和减少访问时间。每个bank都有单独的行缓冲，可以并行访问不同bank。</p>
<p>电压和SDRAM的功耗紧密相关，从DDR1到DDR4，内存电压不断下降。近期的SDRAM还支持power-down模式，屏蔽了刷新以外的所有操作。</p>
<h4 id="Graphics-Data-RAMs">Graphics Data RAMs</h4>
<p>GDDR使用更宽的数据总线和更快的时钟频率来进一步提高带宽，以满足GPU的需求。</p>
<h4 id="Packaging-Innovation-Stacked-or-Embedded-DRAMs">Packaging Innovation: Stacked or Embedded DRAMs</h4>
<p>将DRAM和处理器一起封装可以进一步降低延迟，增加带宽，这种内存称为HBM。DRAM可以直接堆叠在处理器上方（3D），也可以和处理器通过衬底相连（2.5D）。</p>
<h4 id="Flash-Memory">Flash Memory</h4>
<p>闪存是一种EEPROM，其与DRAM最大的不同在于：</p>
<ol>
<li>读取闪存是顺序的，一次读取一整页内容，其读取速度在DRAM和硬盘之间。</li>
<li>闪存必须先被擦除才能重新写入，擦除以块为单位，其写入速度在DRAM和硬盘之间，但比读取速度优势小得多。</li>
<li>闪存是非易失性的，待机功耗很小。</li>
<li>闪存的块只能被写入有限次，所以需要平衡写入负载。</li>
<li>闪存的价格在SDRAM和硬盘之间。</li>
</ol>
<p>DRAM和闪存芯片都有冗余的块用于替换损坏的块。</p>
<h4 id="Phase-Change-Memory-Technology">Phase-Change Memory Technology</h4>
<p>PCM已经被研究了数十年，它使用一个加热装置让介质在晶体和非晶体之间切换，读取数据通过检测两种状态电阻的不同来实现。</p>
<h4 id="Enhancing-Dependability-in-Memory-Systems">Enhancing Dependability in Memory Systems</h4>
<p>更大的Cache和内存使得生产过程中和使用过程中的错误发生的更频繁。电路的变化造成的错误称为hard errors或permanent faults，其可通过重映射空闲的行来解决。存储数据的随机变化称为soft errors或transient faults，其可以通过ECC解决，近年来还引入了Chipkill技术来进一步增加可靠性，其思想与RAID类似。</p>
<h3 id="2-3-Ten-Advanced-Optimizations-of-Cache-Performance">2.3 Ten Advanced Optimizations of Cache Performance</h3>
<p>我们可以从以下五个维度来提升Cache性能：</p>
<ol>
<li>减少命中延迟</li>
<li>增加Cache带宽</li>
<li>减少缺失惩罚</li>
<li>增加命中率</li>
<li>通过并行来减少缺失惩罚或缺失率</li>
</ol>
<h4 id="First-Optimization-Small-and-Simple-First-Level-Caches-to-Reduce-Hit-Time-and-Power">First Optimization: Small and Simple First-Level Caches to Reduce Hit Time and Power</h4>
<p>高时钟频率和功耗限制的压力使得一级Cache的大小一般不大。目前的处理器的一级Cache容量基本不再增长，设计者转而追求更高的组相联度。Cache命中的关键路径分为三部分：使用地址索引Tag SRAM，Tag对比和数据选择。CACTI可以量化Cache的命中延迟，将其表示为一个Cache大小、组相联度，读写端口数等参数的函数。功耗是Cache设计的重要因素，除了组相联度外，更少的Cache行（更大的Cache行）可以减少功耗，但这也增加了缺失率。另一个方法是将Cache分为bank实现。</p>
<p>如今的Cache设计注重更高的组相联度有以下三个原因：如今的处理器会花费至少2个周期来访问Cache，使得命中延迟不会是关键路径；VIPT的Cache容量受到限制，增大组相联度是增加Cache容量的最有效的方式；超线程技术使得冲突缺失变得更加频繁。</p>
<h4 id="Second-Optimization-Way-Prediction-to-Reduce-Hit-Time">Second Optimization: Way Prediction to Reduce Hit Time</h4>
<p>路预测指在每个Cache行中使用额外的bit来预测下一个Cache访问会命中哪一路，直接输出预测的路的数据，预测失败会引入一周期的惩罚。模拟器结果表明对于2路组相联Cache，预测正确率在90%以上；对于4路组相联Cache，预测正确率在80%以上；ICache的预测正确率比DCache高。如果只访问预测正确的Cache行的数据，虽然会造成预测失败时更大的惩罚，但可以显著降低Cache的功耗，在低功耗领域可以得到应用。</p>
<h4 id="Third-Optimization-Pipelined-Access-and-Multibanked-Caches-to-Increase-Bandwidth">Third Optimization: Pipelined Access and Multibanked Caches to Increase Bandwidth</h4>
<p>流水化和Multibank一般应用在L1 Cache上，因为这可以增加超标量乱序流水线的指令吞吐率。Multibank也用于L2和L3 Cache以减小功耗。ICache的流水化增加了分支预测错误的惩罚，DCache的流水化增加了Load-to-Use，但高时钟频率使现代处理器都需要多级流水访问Cache。Multibank使得对于Cache的访问可以交叠，允许Cache在一拍内处理多个读写请求。</p>
<h4 id="Fourth-Optimization-Nonblocking-Caches-ot-Increase-Cache-Bandwidth">Fourth Optimization: Nonblocking Caches ot Increase Cache Bandwidth</h4>
<p>&quot;hit under miss&quot;和&quot;miss under miss&quot;的非阻塞Cache可以显著降低超标量处理器的缺失惩罚，但优化的幅度难以量化。一般来说，乱序处理器可以弥补L1数据Cache缺失、L2数据Cache命中造成的惩罚，但是不能弥补更低层次的Cache缺失造成的惩罚。</p>
<p>为了实现非阻塞Cache，我们需要考察两个问题：一是仲裁命中和缺失之间的冲突，二是记录正在进行的缺失。现代处理器使用MSHR来记录一个进行中的缺失，包括数据将被写回哪个Cache行，哪些指令正在等待该缺失返回的信息。在多核处理器中，非原子的缺失和一致性请求可能会引入死锁。</p>
<h4 id="Fifth-Optimization-Critical-Word-First-and-Early-Restart-to-Reduce-Miss-Penalty">Fifth Optimization: Critical Word First and Early Restart to Reduce Miss Penalty</h4>
<ul>
<li>关键字优先：先发出缺失的字的读请求，再处理Cache行中的其他字。</li>
<li>提前重启：按原来的方式发出读请求，但在缺失的字返回时马上返回给流水线。</li>
</ul>
<p>该技术取得的性能提升取决于Cache行的大小和程序的访存行为。由于空间相关性，可能马上会收到第二个对该Cache行的访问，使得关键字优先技术不能提高Cache性能。</p>
<h4 id="Sixth-Optimization-Merging-Write-Buffer-to-Reduce-Miss-Penalty">Sixth Optimization: Merging Write Buffer to Reduce Miss Penalty</h4>
<p>写缺失会先检查写缓存中已有的Cache行，如果地址相同则将写数据合并。但I/O地址不能使用该技术。</p>
<h4 id="Seventh-Optimization-Compiler-Optimizations-to-Reduce-Miss-Rate">Seventh Optimization: Compiler Optimizations to Reduce Miss Rate</h4>
<p>按行优先/列优先数组在内存中的顺序访问数组元素。如算法不允许如此（例如矩阵乘法），也可以用分块的方式减少Cache缺失。</p>
<h4 id="Eighth-Optimization-Hardware-Prefetching-of-Instructions-and-Data-to-Reduce-Miss-Penalty-or-Miss-Rate">Eighth Optimization: Hardware Prefetching of Instructions and Data to Reduce Miss Penalty or Miss Rate</h4>
<p>在Cache缺失时可以取出当前缺失的Cache行和下一个Cache行，将下一个Cache行放入一个Buffer中。一般指令Cache只需一行Buffer，数据Cache需要多行Buffer。Intel尝试过更为激进的预取策略，但性能提升十分有限。</p>
<h4 id="Ninth-Optimization-Compiler-Controlled-Prefetching-to-Reduce-Miss-Penalty-or-Miss-Rate">Ninth Optimization: Compiler-Controlled Prefetching to Reduce Miss Penalty or Miss Rate</h4>
<p>软件预取可分为预取至寄存器/预取至Cache，可产生例外/不可产生例外，主流的做法是提供不可产生例外的预取至Cache的指令。因为预取指令的额外开销，编译器必须判断哪些访存指令容易造成Cache缺失，也要考虑预取的数据何时能够到达，这是较为困难的。</p>
<h4 id="Tenth-Optimization-Using-HBM-to-Extend-the-Memory-Hierarchy">Tenth Optimization: Using HBM to Extend the Memory Hierarchy</h4>
<p>HBM的大小可达到128MiB至1GiB，必须要足够大的Cache行来减少存储Tag的开销，但这导致两个问题：一个Cache行内的数据可能不都是有用的，导致浪费；Cache缺失会变得更多。一个解决方案是子Cache行——用多位有效位来指示一个Cache行，允许其部分有效，但这没有解决第二个问题。</p>
<p>若是将Tag也存在HBM中则不用担心Tag的开销问题。我们可以将每一路的Tag和数据存在SDRAM的同一行内，首先打开行，读取Tag判断命中哪一路，然后发送对应的列选择信号，这可以避免一次Cache命中读取多个SDRAM的行。也可以直接做成直接映射的Cache，一次读取一整行，包括Tag和数据，实验表明这种实现的性能最好。另一个问题是Cache缺失的惩罚过大，我们可以使用缺失预测器来解决这一问题。</p>
<h4 id="Cache-Optimization-Summry">Cache Optimization Summry</h4>
<p>从命中延迟、带宽、缺失惩罚、缺失率、功耗和复杂度几个方面总结了上述技术。</p>
<h3 id="2-4-Virtual-Memory-and-Virtual-Machines">2.4 Virtual Memory and Virtual Machines</h3>
<p>本节将侧重于保护和隐私方面的内容。</p>
<h4 id="Protection-via-Virtual-Memory">Protection via Virtual Memory</h4>
<p>包括TLB的页式内存管理是隔离不同进程的基本机制。为了隔离用户和内核进程，体系结构必须：</p>
<ul>
<li>提供至少两种模式区分内核和用户</li>
<li>提供用户只读，内核可读写的接口</li>
<li>提供在用户态和内核态之间切换的机制</li>
<li>提供对内存访问的限制</li>
</ul>
<p>一般内存保护通过对每一页增加权限限制来实现，包括读权限、写权限和执行权限。为了避免一次内存访问需要两倍的时间：一次读取页表项和一次读取数据，我们可以利用相关性，使用TLB作为页表的缓存。TLB由操作系统进行管理，但操作系统不可避免的也有bug，所以我们需要虚拟机。</p>
<h4 id="Protection-via-Virtual-Machines">Protection via Virtual Machines</h4>
<p>虚拟机在近些年重新获得热度，主要因为：</p>
<ul>
<li>现代系统中隔离和安全变得更重要</li>
<li>标准的操作系统在安全和可靠性方面表现不佳</li>
<li>在数据中心和云上许多不同的用户共用一台计算机</li>
<li>处理器速度的大幅提高使得虚拟机的额外开销变得可以接受</li>
</ul>
<p>使用虚拟机系统，多个操作系统可以共享硬件资源。提供虚拟机系统的软件称为VMM，硬件平台称为主机，它被所有客户虚拟机共享。VMM的规模比传统的操作系统更小，通常只有万行代码。一般的，用户态指令在虚拟机上运行没有额外开销，IO指令和特权指令在虚拟机上运行的额外开销较高。</p>
<p>除了安全性，虚拟机在以下两个方面也有优势：</p>
<ol>
<li>管理软件：虚拟机提供了完整的软件栈的抽象</li>
<li>管理硬件：不同的软件栈共享一套硬件</li>
</ol>
<h4 id="Requirements-of-a-Virtual-Machine-Monitor">Requirements of a Virtual Machine Monitor</h4>
<p>基本的两个要求是：</p>
<ol>
<li>客户软件在虚拟机上运行时和在原生硬件上运行时应该表现一致</li>
<li>客户软件不能直接改变真实的系统资源</li>
</ol>
<h4 id="Instruction-Set-Architecture-Support-for-Virtual-Machines">Instruction Set Architecture Support for Virtual Machines</h4>
<p>可以直接运行虚拟机的体系结构称为可虚拟化的。一般的，VMM可以捕获客户操作系统执行的特权指令并作出相应的支持。若硬件支持三个特权等级，客户操作系统执行特定特权指令（那些不影响其他客户操作系统的指令）时可以不经过VMM。</p>
<h4 id="Impact-of-Virtual-Machines-on-Virtual-Memory-and-I-O">Impact of Virtual Machines on Virtual Memory and I/O</h4>
<p>可将内存分为三级：虚拟内存-物理内存-机器内存。另一种实现是引入影子页表（shadow page table），影子页表捕获用户操作系统对其页表的修改，直接将虚拟内存映射到机器内存。VMM保存了所有客户操作系统的TLB内容。IO设备之间的映射可以是分时的（网口），也可以是分块的（硬盘）。</p>
<h4 id="Extending-the-Instruction-Set-for-Efficient-Virtualization-and-Better-Security">Extending the Instruction Set for Efficient Virtualization and Better Security</h4>
<p>近年来的指令集的虚拟化扩展主要关注页表和TLB处理的性能和IO性能。虚拟内存管理方面，避免了不必要的TLB刷新，采用了嵌入页表机制（nested page table）。IO方面，客户操作系统可以使用DMA，也可以直接处理中断。</p>
<p>安全方面，VMM提供了不同客户操作系统之间的隔离。Intel提出了SGX扩展，将代码和数据进行加密。</p>
<h4 id="An-Example-VMM-The-Xen-Virtual-Machine">An Example VMM: The Xen Virtual Machine</h4>
<p>通过修改操作系统的少量代码，VMM可以实现的更为简单高效。</p>
<h3 id="2-5-Cross-Cutting-Issues-The-Design-of-Memory-Hierarchy">2.5 Cross-Cutting Issues: The Design of Memory Hierarchy</h3>
<h4 id="Protection-Virtualization-and-Instruction-Set-Architecture">Protection, Virtualization, and Instruction Set Architecture</h4>
<p>保护是体系结构和操作系统的共同努力，IBM主流的硬件采取以下措施提高虚拟机的性能：</p>
<ol>
<li>减少处理器虚拟化的开销</li>
<li>减少因虚拟化造成的中断的额外开销</li>
<li>通过直接将中断传递给正确的虚拟机来减少中断的开销</li>
</ol>
<h4 id="Autonomous-Instruction-Fetch-Units">Autonomous Instruction Fetch Units</h4>
<p>乱序处理器一般将取指操作解耦合。取指单元一般从指令Cache中取出整个Cache行。</p>
<h4 id="Speculation-and-Memory-Access">Speculation and Memory Access</h4>
<p>猜测执行可能造成不必要的内存访问，造成Cache缺失率虚高。</p>
<h4 id="Special-Instruction-Caches">Special Instruction Caches</h4>
<p>现代处理器可以使用一个较小的Cache存储译码后的微操作。</p>
<h4 id="Coherency-of-Cached-Data">Coherency of Cached Data</h4>
<p>多核和IO都会造成一致性问题。</p>
<h3 id="2-6-Putting-It-All-Together-Memory-Hierarchies-in-the-ARM-Cortex-A53-and-Intel-Core-i7-6700">2.6 Putting It All Together: Memory Hierarchies in the ARM Cortex-A53 and Intel Core i7 6700</h3>
<h4 id="The-ARM-Cortex-A53">The ARM Cortex-A53</h4>
<p>Cortex-A53是一个IP核，IP核是可移动设备领域的主流形式，分为硬核和软核，前者对特定代工厂做了优化，是一个黑盒，后者可以为不同代工厂编译并做少量修改。Cortex-A53每拍可以发射两条指令，支持两级TLB和两级Cache。</p>
<h4 id="The-Intel-Core-i7-6700">The Intel Core i7 6700</h4>
<p>i7是一个四核处理器，每个核每拍可以执行4条指令，使用多发射、动态调度、超线程技术，16级流水线。它支持三个内存通道，峰值内存带宽超过25GB/s。它支持2级TLB，一级Cache使用VIPT索引，二级和三级Cache使用PIPT索引。评估该处理器的访存子系统性能是比较困难的，因为非写分配的一级数据Cache和激进的预取策略，但数据表明激进的预取策略对其性能有较大帮助。</p>
<h2 id="Chapter3-Instruction-Level-Parallelism-and-Its-Exploitation">Chapter3: Instruction-Level Parallelism and Its Exploitation</h2>
<h3 id="3-1-Instruction-Level-Parallelism-Concepts-and-Challenges">3.1 Instruction-Level Parallelism: Concepts and Challenges</h3>
<p>本章将探讨数据冲突和控制冲突，探讨软硬件增加指令级并行度（ILP）的方式。开发ILP有两种主要的途径：一是硬件动态的，二是软件在编译时静态的。这两种方式开发的ILP都是有上限的。</p>
<h4 id="What-Is-Instruction-Level-Parallelism">What Is Instruction-Level Parallelism?</h4>
<p>由于RISC程序的基本块都很小，而且基本块内的指令很可能有数据相关，我们能在基本块内开发的ILP非常有限，必须要在多个基本块间开发ILP。增加ILP最简单的方法是在循环的多次执行中寻找并行性。</p>
<h4 id="Data-Dependences-and-Hazards">Data Dependences and Hazards</h4>
<p>指令j对指令i数据相关，如果任意一条成立：</p>
<ul>
<li>指令j会用到指令i产生的结果</li>
<li>指令j对指令k数据相关，指令k对指令i数据相关</li>
</ul>
<p>数据相关的指令不能（完全地）交叠执行。数据相关是程序的固有属性，它限制了ILP的开发。数据相关可以是寄存器间的，也可以是内存间的，后者会造成更大的挑战。</p>
<p>名字相关指两条指令使用了相同的寄存器或内存地址，但它们之间没有数据之间的关联。对于指令i和指令j有两种名字相关，假设指令i的程序序在前：</p>
<ul>
<li>反相关指指令j写了某一寄存器或内存地址，而指令i要读取它</li>
<li>输出相关指指令i和指令j写了同一寄存器或内存地址</li>
</ul>
<p>当数据相关或名字相关的指令在程序中足够靠近时，它们就会发生数据冲突。我们在开发并行性的时候要避免数据冲突，保持程序序，即保持程序的输出顺序不变。我们将数据冲突分为三种：RAW，WAW和WAR。</p>
<h4 id="Control-Dependences">Control Dependences</h4>
<p>控制相关提出了两个限制：</p>
<ol>
<li>一条对分支指令控制相关的指令不能移到该分支指令之前</li>
<li>一条不对分支指令控制相关的指令不能移到该分支指令之后</li>
</ol>
<p>有两个关键的属性要求我们遵守数据相关和控制相关：例外和数据流。如果执行的指令不影响程序的正确性，我们也可以违反控制相关。</p>
<h3 id="3-2-Basic-Compiler-Techniques-for-Exposing-ILP">3.2 Basic Compiler Techniques for Exposing ILP</h3>
<p>编译优化来开发ILP对静态发射和静态调度的处理器来说是非常关键的。</p>
<h4 id="Basic-Pipeline-Scheduling-and-Loop-Unrolling">Basic Pipeline Scheduling and Loop Unrolling</h4>
<p>循环展开可以减少循环的额外开销，还有利于指令的调度。</p>
<h4 id="Summary-of-Loop-Unrolling-and-Scheduling">Summary of Loop Unrolling and Scheduling</h4>
<p>在实践中，进行循环展开时需要做出以下决策：</p>
<ul>
<li>循环间是不相关的</li>
<li>展开后使用不同寄存器来消除名字相关</li>
<li>消除额外的分支指令并修改循环代码</li>
<li>检查循环间的Load和Store指令的地址以确保它们不相关</li>
<li>调度代码以减少阻塞</li>
</ul>
<p>循环展开有以下限制：</p>
<ul>
<li>边际效用</li>
<li>代码大小</li>
<li>编译器限制（寄存器数量限制）</li>
</ul>
<h3 id="3-3-Reducing-Branch-Costs-With-Advanced-Branch-Prediction">3.3 Reducing Branch Costs With Advanced Branch Prediction</h3>
<h4 id="Correlating-Branch-Predictor">Correlating Branch Predictor</h4>
<p>在进行分支预测时不仅需要考察本地历史，还要考察全局历史。一个(m,n)预测器使用最近m个分支的信息索引<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="2.724ex" height="1.528ex" role="img" focusable="false" viewbox="0 -675.5 1203.8 675.5" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-1-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"/><path id="MJX-1-TEX-I-1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-1-TEX-N-32"/></g><g data-mml-node="mi" transform="translate(533,363) scale(0.707)"><use data-c="1D45A" xlink:href="#MJX-1-TEX-I-1D45A"/></g></g></g></g></svg></mjx-container>个预测表，每个预测表有若干项（用分支地址低位索引），每项用n位来预测一个分支指令。我们可以连接（或哈希）分支地址的低位和全局历史来索引整个分支预测表。GShare预测器使用分支地址的低位和全局历史的异或来索引，它的效果非常好，成为了分支预测器的baseline。</p>
<h4 id="Tournament-Predictors-Adaptively-Combining-Local-and-Global-Predictors">Tournament Predictors: Adaptively Combining Local and Global Predictors</h4>
<p>全局预测器通过全局历史进行索引，本地预测器使用分支地址进行索引，一个选择器选择它们的预测结果之一作为最终结果。一般的，每个循环都有一个2位的计数器来作为选择器。本地预测器可以做成2层，第一层使用分支地址索引，记录分支的本地历史信息，用分支的本地历史信息去索引第二层预测表，得到更准确的结果。</p>
<h4 id="Tagged-Hybrid-Predictors">Tagged Hybrid Predictors</h4>
<p>TAGE预测器使用多个用不同全局历史长度来索引的预测器，首先通过PC低位和i位全局历史的哈希来索引预测表，然后通过PC低位和i位全局历史的（另一个）哈希来对比tag。TAGE的预测结果由tag匹配的全局历史长度最长的预测器提供，第0级预测器作为后备预测器没有tag域。预测表还有use域来记录表项是否最近被使用。当预测表的容量不断增加，预测表的初始化对性能也有较大影响。</p>
<h4 id="The-Evolution-of-the-Intel-Core-i7-Branch-Predictor">The Evolution of the Intel Core i7 Branch Predictor</h4>
<p>Core i7 920使用了两级预测器，每一级包含三种不同的预测器：本地历史，全局历史和循环退出，通过竞争选择预测结果。Core i7 6700可能采用了TAGE预测器。</p>
<h3 id="3-4-Overcoming-Data-Hazards-With-Dynamic-Scheduling">3.4 Overcoming Data Hazards With Dynamic Scheduling</h3>
<p>动态调度的优点有：</p>
<ul>
<li>不用为每一种微架构编译一个二进制文件</li>
<li>可以解决编译时无法确定的依赖关系</li>
<li>解决无法预测的延迟，例如Cache缺失</li>
</ul>
<h4 id="Dynamic-Scheduling-The-Idea">Dynamic Scheduling: The Idea</h4>
<p>动态调度时，指令仍是按序发射的，但是当它的源操作数准备好后就可以马上执行，即指令是乱序执行，乱序结束的。乱序执行引入了WAR和WAW冲突，乱序结束引入了非精确例外的问题。</p>
<p>为了允许乱序执行，我们将ID级拆分为两级：</p>
<ul>
<li>发射：译码，检查结构相关</li>
<li>读操作数：等待数据冲突解决，读取源操作数</li>
</ul>
<p>为发挥动态调度的优势，需要多个流水的功能部件以允许多条指令同时执行。<strong>计分板</strong>是最初的动态调度算法，此处我们重点讨论<strong>Tomasulo算法</strong>，它能通过重命名寄存器解决输出相关和反相关，也可以引入猜测执行。</p>
<h4 id="Dynamic-Scheduling-Using-Tomasulo’s-Approach">Dynamic Scheduling Using Tomasulo’s Approach</h4>
<p>Tomasulo算法的基本原理是动态判断指令何时准备好执行和使用重命名寄存器来避免不必要的冲突。寄存器重命名会重命名所有目的寄存器，解决WAW和WAR冲突。Tomasulo算法的实现中，寄存器重命名通过保留站实现，保留站可以缓存指令的源操作数。指令发射时，需要它的结果的指令的源操作数被标记为它的保留站号，该指令执行完成后将结果写入这些指令的源操作数域中。</p>
<p>在Tomasulo算法中，冲突检测和执行控制是分开的，每个功能部件的保留站决定其中的指令是否可以执行；操作数由保留站直接提供给功能部件而不需要经过寄存器堆，意味着需要CDB将功能部件的输出载入到保留站的源操作数域中。</p>
<p>Tomasulo算法主要包含三步：</p>
<ul>
<li>发射（分发）：将指令从IQ中发送到保留站中（如果有空位），如果源操作数已准备好，则读取寄存器，如果未准备好，则记录相应的保留站号</li>
<li>执行：将准备好的指令发送到功能部件</li>
<li>写回：将结果发送到CDB上</li>
</ul>
<p>Tomasulo算法导致了相关的指令之间至少有一拍的延迟。</p>
<h3 id="3-5-Dynamic-Scheduling-Examples-and-the-Algorithm">3.5 Dynamic Scheduling: Examples and the Algorithm</h3>
<h4 id="Tomasulo’s-Algorithm-The-Details">Tomasulo’s Algorithm: The Details</h4>
<p>算法伪代码。</p>
<h4 id="Tomasulo’s-Algorithm-A-Loop-Based-Example">Tomasulo’s Algorithm: A Loop-Based Example</h4>
<p>如果Load和Store的地址不同，它们可以安全地乱序执行，但地址相同的Load和Store之间也会有RAW，WAR，WAW冲突。假设Load和Store的地址按照程序序被计算出来，那么Load需要检查Store Buffer中所有的地址，Store需要检查Load Buffer和Store Buffer中所有的地址。</p>
<p>Tomasulo算法在360/91之后许多年都无人使用，但随着多发射的流行，它被广泛采用，因为：</p>
<ul>
<li>需要减小Cache缺失的影响</li>
<li>处理器有更多的晶体管</li>
<li>不需要编译器对特定流水线结构优化也可以取得高性能</li>
</ul>
<h3 id="3-6-Hardware-Based-Speculation">3.6 Hardware-Based Speculation</h3>
<p>硬件的猜测执行有三个重要思想：</p>
<ol>
<li>动态的分支预测来选择执行哪些指令</li>
<li>猜测地允许指令在控制相关解决前执行</li>
<li>在多个基本块间动态调度</li>
</ol>
<p>为了支持猜测执行，我们需要区分指令产生（可前递的）结果和指令真正完成。在指令不再处于猜测状态时，我们才可以让它产生不可撤销的更新。真正地更新寄存器或内存的阶段称为指令提交。为了在指令产生结果和指令提交之间暂存指令的结果，我们引入了ROB，ROB可以作为重命名寄存器使用。</p>
<p>指令的执行有四个阶段：</p>
<ol>
<li>发射（分发）：从IQ中获取指令，将其发送到保留站和ROB中</li>
<li>执行：等待操作数准备好后发送到功能部件</li>
<li>写回：将结果发送到CDB上</li>
<li>提交：指令位于ROB头且结果已准备好时即可提交，若是分支预测错则取消后续指令</li>
</ol>
<p>引入ROB还可以支持精确例外。为了提高流水线的效率，分支指令预测错会在执行时就清除后续指令，因为分支指令预测错比例外出现的更多。为了维持访存指令的顺序性，我们要求：</p>
<ul>
<li>不允许Load指令开始访存，如果有效的ROB指令中有相同地址的Store指令</li>
<li>维持计算访存指令地址的操作是按程序序的</li>
</ul>
<h3 id="3-7-Exploiting-ILP-Using-Multiple-Issue-and-Static-Scheduling">3.7 Exploiting ILP Using Multiple Issue and Static Scheduling</h3>
<p>多发射处理器主要有三种类型：</p>
<ol>
<li>静态的超标量处理器</li>
<li>VLIW处理器</li>
<li>动态的超标量处理器</li>
</ol>
<h4 id="The-Basic-VLIW-Approach">The Basic VLIW Approach</h4>
<p>VLIW指将多个操作放入一个非常长的指令中，并要求这些操作满足一些限制。为了尽可能占满VLIW的指令槽，需要编译器调度代码。在一个基本块内调度称为本地调度技术，在多个基本块间调度称为全局调度技术。</p>
<p>VLIW技术的问题包括增加了指令的大小和同步操作的限制。需要大量的循环展开来有效利用指令槽，以及空闲的指令槽占用大量空间。早期的硬件没有冲突检测逻辑，VLIW指令中一个操作阻塞会造成其他操作同步阻塞。VLIW技术也有一些应用问题，包括二进制兼容性问题。</p>
<h3 id="3-8-Exploiting-ILP-Using-Dynamic-Scheduling-Multiple-Issue-and-Speculation">3.8 Exploiting ILP Using Dynamic Scheduling, Multiple Issue, and Speculation</h3>
<p>由于指令组内相关性，指令的多发射（分发）逻辑会变得非常复杂。对于n发射的处理器：对于组内的每一条指令预先分配保留站号和ROB号，分析组内相关性，若某指令与组内在它之前的指令相关，则使用预先分配的ROB号来填写保留站，无相关则用原先的保留站和ROB信息来填写保留站。指令的多提交则相对简单。</p>
<h3 id="3-9-Advanced-Techniques-for-Instruction-Delivery-and-Speculation">3.9 Advanced Techniques for Instruction Delivery and Speculation</h3>
<h4 id="Increasing-Instruction-Fetch-Bandwidth">Increasing Instruction Fetch Bandwidth</h4>
<p>BTB存储预测跳转的分支指令的目标地址，在取指时，通过对比PC判断是否命中BTB，若BTB中没有相应的表项，则nextPC是顺序的，若BTB中有相应的表项，则nextPC是目标地址。一类BTB的变种是存储目标地址和目标指令，这样BTB不用当拍返回结果，使得BTB可以做的更大，并应用<strong>分支折叠</strong>技术。</p>
<h4 id="Specialized-Branch-Predictors-Predicting-Procedure-Returns-Indirect-Jumps-and-Loop-Branches">Specialized Branch Predictors: Predicting Procedure Returns, Indirect Jumps, and Loop Branches</h4>
<p>返回地址栈在call指令执行时将返回地址入栈，在return指令执行时将地址出栈，有效预测返回指令的跳转地址。很多处理器也加入了预测间接跳转指令的专门预测器，而循环分支指令的预测工作近年来由Tage承担。</p>
<p>最近的设计将取指单元设计成一个单独的模块，拥有以下功能：</p>
<ul>
<li>分支预测单元</li>
<li>指令预取单元</li>
<li>指令缓存单元</li>
</ul>
<h4 id="Speculation-Implementation-Issues-and-Extensions">Speculation: Implementation Issues and Extensions</h4>
<p>除了使用ROB进行寄存器重命名外，我们也可以用额外的物理寄存器重命名。体系结构上可见的寄存器（逻辑寄存器）和指令产生的临时值都存储在物理寄存器中，ROB仅承担指令按序完成的作用。寄存器重命名表承担着映射物理寄存器和逻辑寄存器的任务。相比于ROB重命名，物理寄存器重命名的实现可以简化指令提交，它只需要修改寄存器映射表并释放旧的物理寄存器（该逻辑寄存器之前对应的物理寄存器）。同样的，组内相关性检测也是物理寄存器重命名的一个瓶颈。</p>
<p>现代处理器继续提高发射宽度的主要瓶颈在于：更大的发射宽度造成更复杂的组内相关性检查，使得重命名逻辑变得复杂，重命名的过程必须在一拍内完成，更高的频率限制了重命名的复杂度。</p>
<p>猜测执行需要消耗面积和功耗，而错误的猜测执行造成的例外事件（例如Cache缺失或TLB缺失）会降低性能。很多流水线只允许低开销的例外事件（例如L1 Cache缺失）猜测执行，昂贵的例外事件（L2 Cache缺失或TLB缺失）发生时处理器会等待它不再是猜测状态后再执行。</p>
<p>考虑到更高的分支频率，分支指令的聚集性和功能部件的长延迟，一拍内预测多个分支指令可以提高性能，但至2017年还没有处理器实现。</p>
<p>猜测执行会增加能耗，因为执行了不需要的指令，并且额外消耗了恢复状态的能量。但考虑到总体上指令执行的更快，如果不需要的指令被执行得比较少，那总体能效比可能是更优的，不过现实情况是30%的指令执行最终没有被用到，降低了能效比。</p>
<p>目前处理器也加入了地址预测：预测两个Store或者一个Load和一个Store的地址是不是相同的。值预测指在数据相关解决前预测指令的源操作数，尽管在学术界有诸多研究，但没有出现在真实的处理器中。</p>
<h3 id="3-10-Cross-Cutting-Issues">3.10 Cross-Cutting Issues</h3>
<h4 id="Hardware-Versus-Software-Speculation">Hardware Versus Software Speculation</h4>
<ul>
<li>为了更有效地猜测执行，我们必须消除内存引用之间的相关性，这在编译时是很难做到的。硬件支持可以让内存访问猜测执行，但需要谨慎设计以免恢复的额外开销超过猜测执行带来的优势。</li>
<li>基于硬件的猜测执行在执行流不可预测时更有优势，因为基于硬件的转移猜测比基于软件的转移猜测正确率更高。</li>
<li>基于硬件的猜测执行有利于保持精确例外。</li>
<li>基于软件的猜测执行可以利用更大的指令窗口。</li>
<li>基于硬件的猜测执行对于没有精心设计的（任意的）代码序列也可以进行动态调度。</li>
</ul>
<h4 id="Speculative-Execution-and-the-Memory-System">Speculative Execution and the Memory System</h4>
<p>猜测执行可能发送错误的内存访问，造成正确性和性能方面的问题。</p>
<h3 id="3-11-Multithreading-Exploiting-Thread-Level-Parallelism-to-Improve-Uniprocessor-Throughput">3.11 Multithreading: Exploiting Thread-Level Parallelism to Improve Uniprocessor Throughput</h3>
<p>线程有独立的寄存器状态和PC，但和进程内的其他线程共享内存空间。超线程指多个线程共用一个处理器而不用进行线程切换。由于动态调度难以隐藏过长的内存访问时间，设计者企图通过其他方式提高ILP。超线程允许多个线程交叠地共享一个处理器内的功能部件，但有着私有的寄存器和PC。</p>
<p>超线程有三种实现：细粒度超线程，粗粒度超线程和同步超线程。细粒度超线程以轮询的方式每周期切换进程，在面向多线程负载的处理器中有所应用；粗粒度超线程只在长时间阻塞的情况下才会切换线程，但由于启动的额外开销，并没有实际应用。最常见的是同步多线程（SMT），它在寄存器重命名和动态调度的时候不区分来自不同进程的指令。</p>
<h4 id="Effectiveness-of-Simultaneous-Multithreading-on-Superscalar-Processors">Effectiveness of Simultaneous Multithreading on Superscalar Processors</h4>
<p>SMT带来的性能和能耗比的提升比较有限，但也是宝贵的。</p>
<h3 id="3-12-Putting-It-All-Together-The-Intel-Core-i7-6700-and-ARM-Cortex-A53">3.12 Putting It All Together: The Intel Core i7 6700 and ARM Cortex-A53</h3>
<h4 id="The-ARM-Cortex-A53-2">The ARM Cortex-A53</h4>
<p>ARM Cortex-A53是一款静态双发射处理器核，有八个流水级。共有四种预测器：一项的带有2条分支目标指令的分支目标缓存，3072项的混合预测器，256项的间接分支指令预测器和8项的返回地址栈。分支预测错的惩罚是8个时钟周期。</p>
<h4 id="The-Intel-Core-i7-6700-2">The Intel Core i7 6700</h4>
<p>i7是一款激进的乱序超标量处理器核，共有14个流水级，每周期最多4条微码重命名，6条微码执行。取指单元配备多层的分支预测器和返回地址栈，每周期取出16字节的指令。16字节的指令被放入预译码缓存中，进行宏融合，然后通过预译码分为单独的x86指令并放入指令队列中。三个译码器和一个译码引擎将x86指令翻译成RISC形式的微码，并放入64项的微码缓存中，微码缓存还承担了循环检测和微融合的工作。随后指令被重命名、发射、执行，i7使用了集中式保留站。由于充足的缓存和队列，性能损失主要来自于分支预测错和Cache缺失。</p>
<h2 id="Chapter4-Data-Level-Parallelism-in-Vector-SIMD-and-GPU-Architectures">Chapter4: Data-Level Parallelism in Vector, SIMD, and GPU Architectures</h2>
<h3 id="4-1-Introduction">4.1 Introduction</h3>
<p>不仅在科学计算中面向矩阵的运算具有DLP，面向媒体的图像和音频处理，机器学习算法也有DLP。SIMD架构可以降低功耗，更重要的是它方便程序员以顺序思维进行编程。本章将介绍三种SIMD的变种：向量体系结构、多媒体指令扩展和GPU。</p>
<h3 id="4-2-Vector-Architecture">4.2 Vector Architecture</h3>
<p>向量体系结构将内存中分散的元素取到一个更大的寄存器堆中，对寄存器堆中的数据进行操作并将结果写回内存中。</p>
<h4 id="RV64V-Extension">RV64V Extension</h4>
<p>RV64V指RISC-V基础指令集加上向量扩展RVV。RV64V指令集由以下部分组成：</p>
<ul>
<li>向量寄存器</li>
<li>向量功能部件</li>
<li>向量访存部件</li>
<li>标量寄存器</li>
</ul>
<p>RV64V的创新是使用了动态寄存器类型，它可以减少向量指令的类型。动态寄存器类型还可以减少上下文切换的时间，实现隐式类型转换。</p>
<h4 id="How-Vector-Processor-Work-An-Example">How Vector Processor Work: An Example</h4>
<p>当循环中没有<strong>循环体间相关</strong>时，循环是可向量化的。向量体系结构将元素之间相关数据的前递称为<strong>链接</strong>。最大向量长度（mvl）是硬件确定的，如果向量长度不等于mvl，可以将向量长度存储在<em>vl</em>寄存器中。由较窄的数据向较宽的数据的类型转换是自动的。</p>
<h4 id="Vector-Execution-Time">Vector Execution Time</h4>
<p>向量操作的执行时间主要由以下三点确定：</p>
<ol>
<li>向量的长度</li>
<li>结构相关</li>
<li>数据相关</li>
</ol>
<p>给定向量的长度和执行速率，我们就可以算出一条向量指令执行的时间。现代的处理器的向量功能部件都有多条流水线，每周期可以产生两个甚至更多的结果。为了简化，我们的RV64V实现只有一条流水线，每拍产生一个结果，那么一条向量指令的执行时间约等于向量长度。</p>
<p>此处我们引入convoy的概念，一个chovoy内的指令可以并行地执行，没有结构相关，其中的数据相关由链接解决。现代处理器都实现了灵活链接，一条向量指令可以向任何正在执行的其他向量指令前递结果。一个convoy执行的时间称为chime，它忽略了发射指令的开销，因为处理器一次只能发射一条向量指令。另一类不可忽略的开销是功能部件的启动延迟（但chime也忽略了）。</p>
<h4 id="Multiple-Lanes-Beyond-One-Element-per-Clock-Cycle">Multiple Lanes: Beyond One Element per Clock Cycle</h4>
<p>使用多条通道可以加速向量指令的执行，每条通道包括向量寄存器堆的读写端口和每个向量执行部件的一条流水线。每个向量寄存器的0号元素都使用通道0，如此定位可以避免跨通道的通讯（前递），减少连线开销。</p>
<h4 id="Vector-Length-Registers-Handling-Loops-Not-Equal-to-32">Vector-Length Registers: Handling Loops Not Equal to 32</h4>
<p>*vector-length register (vl)*控制向量操作的长度。使用strip mining来处理向量长度比mvl大的情况，<em>setvl</em>指令可以简化这个过程。</p>
<h4 id="Predicate-Registers-Handling-IF-Statements-in-Vector-Loops">Predicate Registers: Handling IF Statements in Vector Loops</h4>
<p>谓词寄存器用于存储向量操作的掩码，初始为全1。</p>
<h4 id="Memory-Banks-Supplying-Bandwidth-for-Vector-Load-Store-Unit">Memory Banks: Supplying Bandwidth for Vector Load/Store Unit</h4>
<p>分Bank实现可以增加访存带宽。</p>
<h4 id="Stride-Handling-Multidimensional-Arrays-in-Vector-Architectures">Stride: Handling Multidimensional Arrays in Vector Architectures</h4>
<p>矩阵乘法中stride用于访问在内存中间隔一定距离的数组元素。</p>
<h4 id="Gather-Scatter-Handling-Sparse-Matrices-in-Vector-Architectures">Gather-Scatter: Handling Sparse Matrices in Vector Architectures</h4>
<p>gather操作将索引寄存器中的偏移量和基地址相加，将向量取至寄存器中；scatter操作则同样将索引寄存器中的偏移量和基地址相加，将向量存回内存中。gather-scatter操作需要程序员给编译器显式提示，而且执行速度远慢于常规访存。</p>
<h4 id="Programming-Vector-Architectures">Programming Vector Architectures</h4>
<p>使用向量编程的一个优势是，编译器会给出提示，指示为什么代码不能被向量化，程序员可根据提示修改程序。</p>
<h3 id="4-3-SIMD-Instruction-Set-Extensions-for-Multimedia">4.3 SIMD Instruction Set Extensions for Multimedia</h3>
<p>SIMD指令源于简单的观察：图像和声音处理系统使用的数据位宽通常小于32bits。相比向量指令，SIMD指令使用更小的寄存器堆，没有向量长度寄存器，没有stride和gather-scatter操作，也没有谓词寄存器。</p>
<p>MMX指令将64bits的浮点寄存器分为8个8bits或者4个16bits。SSE使用额外的128bits的寄存器（XMM寄存器）。AVX再次将寄存器位宽增加至256bits（YMM寄存器）。</p>
<h4 id="Programming-Multimedia-SIMD-Architectures">Programming Multimedia SIMD Architectures</h4>
<p>SIMD指令通常在库函数中使用。</p>
<h4 id="The-Roofline-Visual-Performance-Model">The Roofline Visual Performance Model</h4>
<p>算术密度用于衡量内存访问和浮点运算的比例，在Roofline模型中，转折点左侧（低算术密度）表示瓶颈在访存，右侧（高算术密度）表示瓶颈在计算。</p>
<h3 id="4-4-Graphics-Processing-Units">4.4 Graphics Processing Units</h3>
<p>GPU目前已非常普及，本节将介绍GPU如何进行运算。</p>
<h4 id="Programming-the-GPU">Programming the GPU</h4>
<p>英伟达研发了一个类似于C语言的编程语言和环境用于解决异构计算和多层次并行的困难，称为CUDA。OpenCL是一个类似的编程语言，致力于实现平台无关。英伟达将所有层次的并行性统一为CUDA线程，CUDA的编程模型是单指令流多数据流，多个CUDA线程形成线程块（Thread Block），执行线程块的硬件称为多线程SIMD处理器（英伟达称为流处理器SM）。</p>
<p>CUDA中用<code>__device__</code>和<code>__global__</code>来表示GPU，用<code>__host__</code>来表示处理器。用于GPU的函数定义语法为<code>name &lt;&lt;&lt;dimGrid, dimBlock&gt;&gt;&gt;(...parameter list...)</code>，其中<code>dimGrid</code>表示代码的维度（使用多少线程块），<code>dimBlock</code>表示线程块的维度（有多少CUDA线程）。在代码中，<code>blockIdx</code>表示线程块的ID，<code>threadIdx</code>表示线程块中的线程ID，<code>blockDim</code>等于<code>dimBlock</code>。</p>
<p>为简化硬件设计，线程块之间不能有相关，线程块之间的执行顺序是任意的，线程块之间不能直接通信，只能通过对全局内存的原子操作来通信。为了获得良好的性能，CUDA程序员必须时刻关心GPU的硬件结构，但这也造成了程序员的生产力降低。</p>
<h4 id="NVIDIA-GPU-Computational-Structures">NVIDIA GPU Computational Structures</h4>
<p>网格（Grid）指运行在GPU上的一段代码，由一组线程块组成。一个线程块包括多个SIMD线程（英伟达称为Wrap）。线程块调度器（英伟达称为Giga Thread Engine）将一个线程块分配给一个多线程SIMD处理器，SIMD线程调度器（英伟达称为Wrap Scheduler）在一个多线程SIMD处理器内部分配每个时钟周期执行哪个SIMD线程。多线程SIMD处理器与向量处理器类似，但向量处理器有几个流水化的功能部件，而多线程SIMD处理器有许多并行的功能部件。GPU由一个或多个多线程SIMD处理器组成。</p>
<p>每个SIMD线程有单独的PC，SIMD线程调度器会将准备好的SIMD线程发送给分配单元。SIMD指令的位宽是32，所以一个SIMD线程可以处理32个元素。SIMD处理器需要执行SIMD线程，因此有多条SIMD通道，类似于向量通道，例如有16个通道，那么执行一条SIMD指令需要2拍。</p>
<p>因为不同的SIMD线程之间是独立的，所以SIMD线程调度器可以任意选择准备好的SIMD线程执行，使用计分板跟踪至多64个SIMD线程的执行状态。一个SIMD处理器有32K至64K个寄存器，每个SIMD通道拥有独立的寄存器（例如每通道1K个）。每个SIMD线程最多使用256个向量寄存器。寄存器是动态分配给线程块的。注意一个CUDA线程是SIMD线程的投影，是SIMD线程中的一个元素的操作。</p>
<h4 id="NVIDIA-GPU-Instruction-Set-Architecture">NVIDIA GPU Instruction Set Architecture</h4>
<p>PTX指令集是硬件指令集的一个抽象，其指令描述单个CUDA线程的操作，与机器指令通常（但不绝对）是一一对应的。PTX指令使用无限多的只写一次寄存器，编译器会为这些寄存器分配物理寄存器，优化器会减少物理寄存器的使用数量。</p>
<p>PTX指令的格式是<code>opcode.type d, a, b, c</code>，其中d是目的寄存器（store指令除外），a、b、c是源操作数。PTX使用谓词寄存器来实现分支指令。控制流指令包括函数跳转的<code>call</code>和<code>return</code>，线程相关的<code>exit</code>和<code>branch</code>，同步指令<code>bar.sync</code>。GPU的所有访存都是gather-scatter形式的，硬件会识别其空间相关性。</p>
<h4 id="Conditional-Branching-in-GPUs">Conditional Branching in GPUs</h4>
<p>GPU相比向量处理器对分支指令有更多的硬件支持。在PTX指令层面，使用<code>branch</code>、<code>call</code>、<code>return</code>和<code>exit</code>指令和每个C线程之间的锁步。在GPU机器指令层面，除了常规的分支指令外，每个SIMD线程还有分支同步栈。对于PTX指令中简单的分支指令，编译器只需使用谓词寄存器；复杂的分支则需要使用分支同步栈，在不同CUDA线程分流时压栈，合流时出栈。分支的层数越多，GPU运算的效率越低，PTX编译器会对分支指令进行编译优化。需要注意的是，同一线程块内的CUDA线程看似是相互独立的，但是在分支中他们是相关的，只有当谓词寄存器中1的比例足够大时，程序才有较好的效率。</p>
<h4 id="NVIDIA-GPU-Memory-Structures">NVIDIA GPU Memory Structures</h4>
<p>每一个SIMD通道（即CUDA线程）有单独的内存，称为私有内存，GPU将私有内存缓存在L1和L2 Cache中。每个多线程SIMD处理器有本地内存，其容量较小（48KB左右）但延迟较低，带宽较高；本地内存是线程块动态获取的。GPU内存是所有的线程块共享的，其还能被系统处理器（CPU）读写。GPU将大量晶体管用于寄存器而非L2和L3缓存，并使用多线程来隐藏访存延迟。</p>
<h4 id="Innovations-in-the-Pascal-GPU-Architecture">Innovations in the Pascal GPU Architecture</h4>
<p>Pascal GPU的每个多线程SIMD处理器拥有两个SIMD线程调度器，每周期可以调度两个线程的SIMD指令到两组16 SIMD通道的功能部件。Pascal GPU还有以下创新：</p>
<ul>
<li>更快的单精度、双精度、半精度浮点运算；</li>
<li>HBM2实现更高的内存带宽；</li>
<li>高速的芯片间互联；</li>
<li>统一的虚拟内存和分页支持。</li>
</ul>
<h4 id="Similarity-and-Difference-Between-Vector-Architectures-and-GPUs">Similarity and Difference Between Vector Architectures and GPUs</h4>
<p>SIMD处理器和向量处理器类似，但SIMD处理器支持多线程。GPU有更多的寄存器以支持多线程，也有更多的通道以更快执行一条SIMD指令。对于访存，GPU中所有访存都是隐含的gather-scatter形式，而向量处理器则是自定义的。对于隐藏访存延迟，向量处理器的方式是均摊访存延迟至所有向量元素，GPU的方式是多线程。对于分支指令，两者都使用掩码，但GPU使用硬件和编译器处理掩码。对于GPU而言，系统处理器通过PCIe相连，访问延迟非常高，而对于向量处理器而言，标量处理器易于访问。</p>
<h4 id="Similarity-and-Differences-Between-Multimedia-SIMD-Computers-and-GPUs">Similarity and Differences Between Multimedia SIMD Computers and GPUs</h4>
<p>GPU拥有更多的SIMD通道，支持更多的线程。</p>
<h4 id="Summary">Summary</h4>
<p>虽然英伟达将所有层次的并行性统一为CUDA线程，但程序员必须了解CUDA线程是如何被组织成线程块的，32个CUDA线程是一起执行的。</p>
<h3 id="4-5-Detecting-and-Enhancing-Loop-Level-Parallelism">4.5 Detecting and Enhancing Loop-Level Parallelism</h3>
<p>挖掘循环体的并行性是提高程序执行效率的重点，本节将谈论循环体的编译优化。循环体间相关是阻碍编译器进行编译优化的主要因素，在循环的某一趟执行中产生的数据会在之后的某一趟执行中被用到，导致两趟循环不能并行执行。但是循环体间相关没有形成环时，相关性是偏序的，可以被消除。另外，识别指向同一个地址的两个引用（尤其是循环间的）从而消除不必要的访存指令也是至关重要的。</p>
<h4 id="Finding-Dependences">Finding Dependences</h4>
<p>指针和数组访问对相关性分析造成了困难。几乎所有相关性分析算法都会假设数组访问是仿射的，即<code>b[i]</code>的地址是<code>a*i+b</code>，多维数组是仿射的当且仅当每一维都是仿射的，散列访问（<code>x[y[i]]</code>）是非仿射的。判断循环中两个对同一数组的访问是否指向同一地址，只需分析仿射函数是否有相同的值即可，即判断是否存在两个<code>i</code>使得<code>a*i+b</code>等于<code>c*i+d</code>。在部分程序中，<code>a</code>、<code>b</code>、<code>c</code>、<code>d</code>这些值可能不是常量，导致相关性分析无法进行。但在大多数程序中，这些值是常量，此时若GCD(c,a)整除(d-b)时即存在循环间相关。GCD测试可能出现假阳性，因为其没有考虑循环的边界。相关性分析也存在很大的局限性，因为其假设数组访问是仿射的，而且对过程调用中的指针无能为力。</p>
<h4 id="Eliminating-Dependent-Computations">Eliminating Dependent Computations</h4>
<p>对于累加程序，我们可以将结果进行向量扩展，然后将向量进行合并（reduction）。任何具有组合律的运算都可以进行合并，但计算机中数的运算受精度和范围的限制，可能不具有组合律。</p>
<h3 id="4-6-Cross-Cutting-Issues">4.6 Cross-Cutting Issues</h3>
<h4 id="Energy-and-DLP-Slow-and-Wide-Versus-Fast-and-Narrow">Energy and DLP: Slow and Wide Versus Fast and Narrow</h4>
<p>通过降低频率和电压，增加更多运算资源，在保持峰值运算性能的基础上可以降低功耗，因此GPU的频率通常更低。而且向量运算通常可以简化控制单元，减少译码和相关性检测的逻辑。</p>
<h4 id="Banked-Memory-and-Graphics-Memory">Banked Memory and Graphics Memory</h4>
<p>为提高访存带宽，GPU通常使用堆叠式内存（HBM），而且访存合并的控制逻辑也更为复杂。</p>
<h4 id="Strided-Accesses-and-TLB-Misses">Strided Accesses and TLB Misses</h4>
<p>在跨步式访问中，每次访存都可能造成TLB缺失，造成性能的极大损失。</p>
<h3 id="4-7-Putting-It-All-Together-Embedded-Versus-Server-GPUs-and-Tesla-Versus-Core-i7">4.7 Putting It All Together: Embedded Versus Server GPUs and Tesla Versus Core i7</h3>
<p>由于图形应用的流行，移动终端、台式电脑和服务器中都有不同规格的GPU。</p>
<h4 id="Comparison-of-a-GPU-and-a-MIMD-With-Multimedia-SIMD">Comparison of a GPU and a MIMD With Multimedia SIMD</h4>
<p>GPU有更高的访存带宽，更高的单精度和双精度浮点运算性能，但Cache容量较小，若工作集可以完全放在多核处理器的Cache中，GPU可能处于劣势。另外，GPU缺少内存一致性模型和一些同步指令，SIMD指令缺少gather-scatter形式的访存。</p>
<h4 id="Comparison-Update">Comparison Update</h4>
<p>Intel最新的架构已加入gather-scatter形式的访存，CPU和GPU的速度也有了很大的提升。</p>
<h2 id="Chapter5-Thread-Level-Parallelism">Chapter5: Thread-Level Parallelism</h2>
<h3 id="5-1-Introduction">5.1 Introduction</h3>
<p>多处理器架构的流行反映出以下因素：</p>
<ul>
<li>继续增加硅面积来挖掘ILP的效率已经很低，而功耗却成为关键因素；</li>
<li>高端服务器的需求旺盛；</li>
<li>数据密集型的应用在互联网的驱动下井喷；</li>
<li>台式电脑继续增加性能的需求已经降低（图像处理除外）；</li>
<li>有效运用多处理器架构的方法论逐渐成熟；</li>
<li>多处理器降低开发芯片的成本。</li>
</ul>
<p>本章我们讨论线程级并行性（TLP），意为多个程序通过MIMD的形式开发并行性，主要是通过多处理器。本章讨论的多处理器是多个紧密相关的处理器核，由同一个操作系统控制并共享地址空间。在这样的多处理器上软件有两种方式开发并行性，一是多个线程合作处理同一个任务，称为并行处理；二是多个互不相关的进程同时工作，称为任务级并行。</p>
<p>多处理器虽然共享地址空间，但不意味着只有单一的物理内存。多处理器不仅包括单芯片的多核处理器，也包括多芯片的计算机，每一个芯片都是一个多核处理器。在下一章我们将讨论大量处理器通过网络互联的架构，称为仓库级计算机。</p>
<h4 id="Multiprocessor-Architecture-Issues-and-Approach">Multiprocessor Architecture: Issues and Approach</h4>
<p>TLP相比ILP的层次更高，通常由程序员或操作系统来识别。虽然多线程也可以挖掘DLP，但其要求每个线程的工作量足够大来减少额外开销，比起SIMD和GPU而言代价更高。</p>
<p>第一种多处理器系统称为对称多处理器或集中式共享内存多处理器（SMP或UMA）。这种多处理器系统通常只有32核或更少，当前的多核处理器基本都是SMP，但部分多核处理器对LLC的访问是不一致的，称为NUCA。第二种多处理器系统称为分布式共享内存多处理器（DSM或NUMA），其可能由多个多核处理器组成，处理器访问本地内存远快于远程内存。</p>
<p>SMP和DSM都是共享内存的，即所有处理器共享地址空间。下一章将讨论消息传递模型的多处理机系统。</p>
<h4 id="Challenges-of-Parallel-Processing">Challenges of Parallel Processing</h4>
<p>并行处理的第一个难题是程序中有限的并行性，第二个难题是通讯的高额开销。</p>
<h3 id="5-2-Centralized-Shared-Memory-Architectures">5.2 Centralized Shared-Memory Architectures</h3>
<p>多级的、容量较大的Cache减少访存带宽的需求是集中式内存多处理器流行的重要原因。但对于共享数据的缓存造成了新的问题：缓存一致性（coherence）。</p>
<h4 id="What-Is-Multiprocessor-Cache-Coherence">What Is Multiprocessor Cache Coherence?</h4>
<p>一个内存系统是一致的，如果</p>
<ul>
<li>处理器P向位置X写入值后处理器P向位置X读取值，若中间没有其他处理器向位置X写入值，则读取的值是写入的值；</li>
<li>一个处理器向位置X写入值后另一个处理器向位置X读取值，若中间没有其他处理器向位置X写入值，且写入和读取时足够分开的，则读取的值是写入的值；</li>
<li>写入操作是串行的，即两个写入的顺序对于所有处理器而言都是一致的。</li>
</ul>
<p>一个处理器写入的值何时才能被其他处理器看到也是一个重要的问题，该问题称为内存一致性（consistency）模型。缓存一致性和内存一致性是互补的，前者定义了对同一内存位置读写的行为，后者定义了对不同内存位置读写的行为。在本节中，假设写操作完成指所有处理器都看到了写操作的效果，处理器不会改变写操作的顺序。</p>
<h4 id="Basic-Schemes-for-Enforcing-Coherence">Basic Schemes for Enforcing Coherence</h4>
<p>共享数据在Cache中存在多个拷贝对性能有着很大的好处，所以硬件通过Cache一致性协议来解决Cache一致性问题。Cache一致性协议的关键是跟踪共享的数据块的状态，有两类一致性协议：</p>
<ol>
<li>基于目录的：共享数据块的状态是集中存放在目录中的，目录可以是集中的，也可以是分布的。</li>
<li>基于侦听的：每一个Cache行都保存共享数据块的状态，通过总线进行通讯。</li>
</ol>
<h4 id="Snooping-Coherence-Protocols">Snooping Coherence Protocols</h4>
<p>有两种方式来确保Cache一致性。一是在写操作之前确保对该数据块具有独占的访问权限，称为写无效协议。二是在写操作之后进行广播，更新其他Cache中的值，称为写更新协议。写更新协议的总线压力大，在现实中较少使用。</p>
<h4 id="Basic-Implementation-Techniques">Basic Implementation Techniques</h4>
<p>当处理器对共享的Cache行进行写操作时，必须在总线上广播无效请求。当两个处理器同时广播无效请求时，总线仲裁器会将其串行化。</p>
<p>对于写穿透Cache而言，内存中的数据总是最新的，因此缺失的Cache请求可以从内存中取回数据。对于写回Cache而言，最新的数据可能在某个处理器的Cache中，当该Cache侦听到读请求时，会提供最新的数据并取消从内存取回的数据。</p>
<p>除了有效位和脏位以外，我们还需要共享位来标记Cache行的状态。</p>
<h4 id="An-Example-Protocol">An Example Protocol</h4>
<p>基于侦听的Cache一致性协议通常由每个Cache行独立的有限状态机实现。本节将讨论MSI协议，包含修改、共享和无效三个状态。本节中对于总线操作的原子性假设在现实世界中是不成立的。</p>
<h4 id="Extensions-to-the-Basic-Coherence-Protocol">Extensions to the Basic Coherence Protocol</h4>
<p>MESI协议增加了独占状态，表示处理器拥有该Cache行的独占权限但未进行修改。MOESI协议增加了占有状态，表示处理器拥有该共享Cache行的最新拷贝，内存中的相应数据是过时的。</p>
<h4 id="Limitations-in-Symmetric-Shared-Memory-Multiprocessors-and-Snooping-Protocols">Limitations in Symmetric Shared-Memory Multiprocessors and Snooping Protocols</h4>
<p>当核数继续增长，每个核的内存带宽需求继续增长，任何集中式的资源都会变成瓶颈，例如总线。以下技术可以增加侦听总线的带宽：</p>
<ul>
<li>将tag进行复制</li>
<li>将共享LLC进行分块</li>
<li>在共享LLC处部署（分布式）目录</li>
</ul>
<h4 id="Implementing-Snooping-Cache-Coherence">Implementing Snooping Cache Coherence</h4>
<p>当前的处理器总线不止一条，造成一致性操作是非原子的，增加了额外的复杂度。</p>
<h3 id="5-3-Performance-of-Symmetric-Shared-Memory-Multiprocessors">5.3 Performance of Symmetric Shared-Memory Multiprocessors</h3>
<p>基于侦听协议的Cache系统的性能取决于单核中固有的Cache缺失的开销和一致性开销等诸多因素。一致性开销又分为真共享和假共享。</p>
<h4 id="A-Commercial-Workload">A Commercial Workload</h4>
<p>加大L3 Cache可以减少单核中固有的Cache缺失的开销，但对一致性开销无济于事。核数的增加会导致一致性开销的增加。增加Cache行大小可以减少真共享开销，但增加了假共享开销。</p>
<h4 id="A-Multiprogramming-and-OS-Workload">A Multiprogramming and OS Workload</h4>
<p>此例使用的测试集为一个编译程序的某一个阶段。</p>
<h4 id="Performance-of-the-Multiprogramming-and-OS-Workload">Performance of the Multiprogramming and OS Workload</h4>
<p>操作系统对Cache的需求更高，增加Cache行大小可以有效改善操作系统的Cache性能。</p>
<h3 id="5-4-Distributed-Shared-Memory-and-Directory-Based-Coherence">5.4 Distributed Shared-Memory and Directory-Based Coherence</h3>
<p>侦听协议没有集中式的数据结构，降低了开销，也限制了其可扩展性。近些年来访存带宽需求的增加使得分布式内存受到更多欢迎，但除非我们降低侦听协议的广播开销，否则分布式内存中Cache的一致性问题会成为累赘。有共享包含式LLC的存储系统中，只需要在LLC的每个Cache行中加入长度为核数的比特指示当前Cache行在哪些核的Cache中有备份，即可实现集中式目录协议。</p>
<p>要实现分布式目录协议，我们可以将目录分布在LLC的每个bank中，也可以将目录分布在每个内存中。若目录分布在每个内存中，那么目录需要记录每个内存行的状态，行大小等于LLC的行大小，空间复杂度是行数量乘以核数量，对于几百个核的计算机来说都是可以接受的。</p>
<h4 id="Directory-Based-Cache-Coherence-Protocols-The-Basics">Directory-Based Cache Coherence Protocols: The Basics</h4>
<p>在简单的目录协议中，有以下状态：共享、无效、修改。目录会和发出请求的节点、地址所在的节点和拥有该Cache行的节点进行通讯。</p>
<h4 id="An-Example-Directory-Protocol">An Example Directory Protocol</h4>
<p>状态转换图和侦听协议基本一致，除了写缺失不是在总线上广播的，而是由目录控制进行点对点的取回和无效的。目录收到某个核的请求时，可能需要改变目录的状态，向其他核发送请求。</p>
<h3 id="5-3-Synchronization-The-Basics">5.3 Synchronization: The Basics</h3>
<p>同步机制是软硬件结合实现的，本节将关注基于锁的同步机制。</p>
<h4 id="Basic-Hardware-Primitives">Basic Hardware Primitives</h4>
<p>实现同步的基础是能够原子读-修改-写的硬件原语，软件开发者一般不直接使用硬件原语，而是依靠系统开发者提供的同步库函数。最简单的硬件原语是原子交换，其他还包括TAS、原子加等。另一种实现是LL-SC。</p>
<h4 id="Implementing-Locks-Using-Coherence">Implementing Locks Using Coherence</h4>
<p>实现了TAS锁和TTAS锁。</p>
<h3 id="5-6-Models-of-Memory-Consistency-An-Introduction">5.6 Models of Memory Consistency: An Introduction</h3>
<p>内存一致性是不同处理器对不同位置的读写之间的属性。最直观的内存一致性模型是顺序一致性，对每个处理器而言内存访问是按序的，不同处理器之间的内存访问是任意交叠的。实现顺序一致性的方式是将一个内存访问的完成推迟到其他所有处理器都完成（可能需要的）无效请求。顺序一致性大大影响了性能，体系结构研究者提出了更为宽松的内存一致性协议。</p>
<h4 id="The-Programmer’s-View">The Programmer’s View</h4>
<p>对于程序员来说，无数据冒险的程序是最符合直觉的。</p>
<h4 id="Relaxed-Consistency-Models-The-Basics-and-Release-Consistency">Relaxed Consistency Models: The Basics and Release Consistency</h4>
<p>放松一致性模型的核心是允许读写操作乱序完成，但提供强制按序执行的同步原语。根据放松的程度不同，有许多不同的一致性模型。顺序一致性维护所有四种顺序：R-&gt;W，R-&gt;R，W-&gt;W，W-&gt;R。</p>
<ul>
<li>放松W-&gt;R的模型称为TSO或处理器一致性模型。</li>
<li>放松W-&gt;R和W-&gt;W的模型称为PSO。</li>
<li>放松所有四种顺序的模型有很多种，包括弱一致性模型和宽松一致性模型。</li>
</ul>
<p>宽松一致性模型将对共享变量的同步操作分为获取和释放。</p>
<h3 id="5-7-Cross-Cutting-Issues">5.7 Cross-Cutting Issues</h3>
<h4 id="Compiler-Optimization-and-the-Consistency-Model">Compiler Optimization and the Consistency Model</h4>
<p>编译器不能交换对不同变量的读和写之间的顺序，因为这可能改变程序的语义。这极大地限制了编译优化的效果。</p>
<h4 id="Using-Speculation-to-Hide-Latency-in-Strict-Consistency-Models">Using Speculation to Hide Latency in Strict Consistency Models</h4>
<p>可以在处理器内部将访存指令乱序执行，按序提交，在不符合内存一致性的操作出现时进行回滚。</p>
<h4 id="Inclusion-and-Its-Implementation">Inclusion and Its Implementation</h4>
<p>包含式的Cache可以减少一致性协议的通讯开销，但不同层次的Cache有不同的块大小，增加了复杂度。</p>
<h4 id="Performance-Gains-From-Multiprocessing-and-Multithreading">Performance Gains From Multiprocessing and Multithreading</h4>
<p>初步分析超线程技术的性能优势。</p>
<h3 id="5-8-Putting-It-All-Together-Multicore-Processors-and-Their-Performance">5.8 Putting It All Together: Multicore Processors and Their Performance</h3>
<h4 id="Performance-of-Multicore-Based-Multiprocessors-on-a-Multiprogrammed-Workload">Performance of Multicore-Based Multiprocessors on a Multiprogrammed Workload</h4>
<p>介绍了IBM Power8、Intel Xeon E7和Fujitsu SPARC64 X+。</p>
<h4 id="Scalability-in-an-Xeon-MP-With-Different-Workload">Scalability in an Xeon MP With Different Workload</h4>
<p>分析了Java服务器、虚拟机和科学计算三种负载在多核下的表现。</p>
<h4 id="Performance-and-Energy-Efficiency-of-the-Intel-i7-920-Multicore">Performance and Energy Efficiency of the Intel i7 920 Multicore</h4>
<p>多核和超线程将能效比的负担更多地转移给了程序员。</p>
<h2 id="Chapter6-Warehouse-Scale-Computers-to-Expoilt-Request-Level-and-Data-Level-Parallelism">Chapter6: Warehouse-Scale Computers to Expoilt Request-Level and Data-Level Parallelism</h2>
<h3 id="6-1-Introducion">6.1 Introducion</h3>
<p>WSC的体系结构和服务器的体系结构有很多相似之处，它们都关注性价比、能效比、可靠性、网络带宽和交互式、批处理工作性能。WSC的体系结构也有不同，例如更充分的并行性（数据并行和请求并行），更关注运营开销、选址、低负载时的能效比和规模问题。WSC和HPC、数据中心也有很大不同。</p>
<h3 id="6-2-Programming-Models-and-Workloads-for-Warehouse-Scale-Computers">6.2 Programming Models and Workloads for Warehouse-Scale Computers</h3>
<p>MapReduce是WSC上常用的操作，WSC对执行MapReduce的稳定性做了优化。</p>
<h3 id="6-3-Computer-Architecture-of-Warehouse-Scale-Computers">6.3 Computer Architecture of Warehouse-Scale Computers</h3>
<p>一个机柜中有40-80台服务器，机柜顶部有交叉开关用以连接不同的机柜。</p>
<h4 id="Storage">Storage</h4>
<p>硬盘可以放在机柜中，不同机柜间通过网络互联访问；也可以使用NAS等结构。</p>
<h4 id="WSC-Memory-Hierarchy">WSC Memory Hierarchy</h4>
<p>访问本地存储设备、机柜内的存储设备和机柜间的存储设备有不同的带宽和延迟。</p>
<h3 id="6-4-The-Efficiency-and-Cost-of-Warehouse-Scale-Computers">6.4 The Efficiency and Cost of Warehouse-Scale Computers</h3>
<p>实践中不会有所有服务器同时处于最高负载的情况，因此可以安全地削减40%的电能供应。</p>
<h4 id="Measuring-Efficiency-of-a-WSC">Measuring Efficiency of a WSC</h4>
<p>PUE是所有设备的功耗除以IT装备的功耗，其越大表示WSC的能效比越低。虽然WSC的设计者更关心带宽，但软件和用户日渐关心延迟。体系结构学者提出了SLO的概念，表示绝大部分的请求（例如99.9%）都要在阈值范围内完成。</p>
<h4 id="Cost-of-a-WSC">Cost of a WSC</h4>
<p>运营开销称为OPEX，建造开销称为CAPEX。</p>
<h3 id="6-5-Cloud-Computing-The-Return-of-Utility-Computing">6.5 Cloud Computing: The Return of Utility Computing</h3>
<p>WSC的单价比起小规模的数据中心更低，但中小企业无法承担分布式WSC的开销，因此云计算成为新趋势。</p>
<h4 id="Amazon-Web-Services">Amazon Web Services</h4>
<p>亚马逊云服务能够成功的原因有：虚拟机的支持，低售价，开源软件的支持，无保证的服务等。目前亚马逊提供种类众多的不同性能和优化方向的云服务器实例。使用云服务器最大的优点是按需使用，无需在创业时就将大量资金投入服务器的采购，而是根据企业的发展逐步增加购买的云服务器实例的数量。</p>
<h4 id="How-Big-Is-the-AWS-Cloud">How Big Is the AWS Cloud</h4>
<p>目前微软、亚马逊和谷歌在各个大洲都有大量WSC。</p>
<h3 id="6-6-Cross-Cutting-Issues">6.6 Cross-Cutting Issues</h3>
<h4 id="Preventing-the-WSC-Network-From-Being-a-Bottleneck">Preventing the WSC Network From Being a Bottleneck</h4>
<p>大厂正在自研交换机。</p>
<h4 id="Using-Energy-Efficiently-Inside-the-Server">Using Energy Efficiently Inside the Server</h4>
<p>电源损耗和低功耗时的能效比仍有提升空间。</p>
<h3 id="6-7-Putting-It-All-Together-A-Google-Warehouse-Scale-Computer">6.7 Putting It All Together: A Google Warehouse-Scale Computer</h3>
<h4 id="Power-Distribution-in-a-Google-WSC">Power Distribution in a Google WSC</h4>
<p>WSC配备UPS甚至发电机。</p>
<h4 id="Cooling-in-a-Google-WSC">Cooling in a Google WSC</h4>
<p>利用风扇和水进行散热的系统。</p>
<h4 id="Racks-of-a-Google-WSC">Racks of a Google WSC</h4>
<p>UPS是分布式的。</p>
<h4 id="Networking-in-a-Google-WSC">Networking in a Google WSC</h4>
<p>谷歌的网络拓扑系统称为Clos。</p>
<h4 id="Servers-in-a-Google-WSC">Servers in a Google WSC</h4>
<p>基于Intel Haswell处理器。</p>
<h4 id="Conclusion">Conclusion</h4>
<p>现在的WSC更加节能。</p>
<h2 id="Chapter7-Domain-Specific-Architectures">Chapter7: Domain-Specific Architectures</h2>
<h3 id="7-1-Introduction">7.1 Introduction</h3>
<p>摩尔定律和登纳德缩放定律面临终结，领域特定加速器（DSA）成为继续提升计算机性能的重要途径。</p>
<h3 id="7-2-Guidelines-for-DSAs">7.2 Guidelines for DSAs</h3>
<ul>
<li>使用指定的内存区域以减少数据移动。</li>
<li>将晶体管更多地用于运算单元和内存。</li>
<li>利用该领域最简单的并行性。</li>
<li>减少数据类型的大小。</li>
<li>使用特定领域的语言以方便代码移植。</li>
</ul>
<h3 id="7-3-Example-Domain-Deep-Neural-Networks">7.3 Example Domain: Deep Neural Networks</h3>
<p>机器学习需要大量的数据和算力，目前DNN是机器学习中的热门。</p>
<h4 id="The-Neurons-of-DNNs">The Neurons of DNNs</h4>
<p>介绍了神经元、激活函数和隐藏层的概念。</p>
<h4 id="Training-Versus-Inference">Training Versus Inference</h4>
<p>介绍了监督学习、反向传播和SGD。</p>
<h4 id="Multilayer-Perceptron">Multilayer Perceptron</h4>
<p>MLP是全连接神经网络。</p>
<h4 id="Convolutional-Neural-Network">Convolutional Neural Network</h4>
<p>CNN将上一层神经元的输出中临近的部分作为本层神经元的输入，利用空间相关性。</p>
<h4 id="Recurrent-Neural-Network">Recurrent Neural Network</h4>
<p>RNN在DNN中增加了状态机。LSTM是目前最流行的RNN。</p>
<h4 id="Batches">Batches</h4>
<p>将多个数据一起输入DNN进行训练可以提高效率，这些数据称为一个Batch。</p>
<h4 id="Quantization">Quantization</h4>
<p>将浮点数转为定点数进行操作可以节约资源。</p>
<h4 id="Summary-of-DNNs">Summary of DNNs</h4>
<p>对于DNN加速的硬件需要矩阵向量乘、矩阵矩阵乘、非线性函数等运算能力。</p>
<h3 id="7-4-Google’s-Tensor-Processing-Unit-an-Inference-Data-Center-Accelerator">7.4 Google’s Tensor Processing Unit, an Inference Data Center Accelerator</h3>
<p>TPU的核心是65536个8位的ALU用于计算矩阵乘法。</p>
<h4 id="TPU-Origin">TPU Origin</h4>
<p>TPU最初起源于语音识别的需求。</p>
<h4 id="TPU-Architecture">TPU Architecture</h4>
<p>TPU是PCIe通道上的协处理器，有CPU发送指令并由DMA搬运数据。</p>
<h4 id="TPU-Instruction-Set-Architecture">TPU Instruction Set Architecture</h4>
<p>因为指令由PCIe通道传输，因此遵循CISC风格，没有程序计数器和分支指令，以下五个指令最为常用：</p>
<ol>
<li><code>Read_Host_Memory</code></li>
<li><code>Read_Weights</code></li>
<li><code>MatrixMultiply/Convolve</code></li>
<li><code>Activate</code></li>
<li><code>Write_Host_Memory</code></li>
</ol>
<h4 id="TPU-Microarchitecture">TPU Microarchitecture</h4>
<p>不同的指令有不同的功能部件，可以并行执行。使用脉动运行的方式以减少缓存的读取和写入。</p>
<h4 id="TPU-Implementation">TPU Implementation</h4>
<p>大部分面积用于缓存和运算单元，而不是控制逻辑。</p>
<h4 id="TPU-Software">TPU Software</h4>
<p>TPU的软件栈与CPU和GPU相同，使用TensorFlow。TPU和GPU一样，使用用户空间驱动和核心驱动，核心驱动只负责内存管理和中断，是轻量级的。用户空间驱动管理TPU的运行，负责处理数据，将API调用转化为TPU指令等，用户空间驱动经常更新。</p>
<h4 id="Improving-the-TPU">Improving the TPU</h4>
<p>提升内存带宽最有效。</p>
<h4 id="Summary-How-TPU-Follows-the-Guidelines">Summary: How TPU Follows the Guidelines</h4>
<p>参考<a href="#7-2-Guidelines-for-DSAs">7.2节</a>。</p>
<h3 id="7-5-Microsoft-Catapult-a-Flexible-Data-Center-Accelerator">7.5 Microsoft Catapult, a Flexible Data Center Accelerator</h3>
<p>微软将FPGA连接至PCIe通道，并使用专用网络连接不同的FPGA。</p>
<h4 id="Catapult-Implementation-and-Architecture">Catapult Implementation and Architecture</h4>
<p>数据中心中一半的机柜配备Catapult加速板，低速的网络将一个机柜内的48个FPGA连接起来。</p>
<h4 id="Catapult-Software">Catapult Software</h4>
<p>开发者需要编写RTL来使用FPGA。</p>
<h4 id="CNNs-on-Catapult">CNNs on Catapult</h4>
<p>微软提供了一个可配置的CNN加速器作为Catapult的应用。</p>
<h4 id="Search-Acceleration-on-Catapult">Search Acceleration on Catapult</h4>
<p>使用FPGA可以加速Bing搜索引擎的文档排序功能。</p>
<h4 id="Catapult-Version-1-Deployment">Catapult Version 1 Deployment</h4>
<p>微软先进行了小规模的测试。</p>
<h4 id="Catapult-Version-2">Catapult Version 2</h4>
<p>第二版将FPGA放置在CPU和NIC之间，以利用原有网络拓扑。</p>
<h4 id="Summary-How-Catapult-Follows-the-Guidelines">Summary: How Catapult Follows the Guidelines</h4>
<p>参考<a href="#7-2-Guidelines-for-DSAs">7.2节</a>。</p>
<h3 id="7-6-Intel-Crest-a-Data-Center-Accelerator-for-Training">7.6 Intel Crest, a Data Center Accelerator for Training</h3>
<p>Crest的目标是加速DNN的训练。</p>
<h3 id="7-7-Pixel-Visual-Core-a-Personal-Mobile-Device-Image-Processing-Unit">7.7 Pixel Visual Core, a Personal Mobile Device Image Processing Unit</h3>
<p>Pixel是可编程、可扩展的图像处理和计算视觉加速器。</p>
<h4 id="ISPs-the-Hardwired-Predecessors-of-IPUs">ISPs, the Hardwired Predecessors of IPUs</h4>
<p>几乎所有移动设备中都有ISP，它可以处理拍摄的照片，消除噪点，提升图像质量。但ISP的可扩展性不足。</p>
<h4 id="Pixel-Visual-Core-Software">Pixel Visual Core Software</h4>
<p>Pixel将ISP中的核心流水线转化为了有向无环图，Pixel程序使用Halide语言编写。</p>
<h4 id="Pixel-Visual-Core-Architecture-Philosophy">Pixel Visual Core Architecture Philosophy</h4>
<p>Pixel需要将功耗降到最低，除了<a href="#7-2-Guidelines-for-DSAs">7.2节</a>提到的原则，以下原则也指导了Pixel的设计：</p>
<ul>
<li>二维比一维好。</li>
<li>近比远好。</li>
</ul>
<p>Pixel的可扩展性体现在以下方面：</p>
<ul>
<li>使用二维的PE实现二维的SIMD架构。</li>
<li>每个PE都有单独的缓存。</li>
<li>NESW四个方向都可以作为数据输入。</li>
</ul>
<h4 id="The-Pixel-Visual-Core-Halo">The Pixel Visual Core Halo</h4>
<p>使用简化的PE来处理边缘处的留白。</p>
<h4 id="A-Processor-of-the-Pixel-Visual-Core">A Processor of the Pixel Visual Core</h4>
<p>Pixel组成的处理器包含2个或更多Pixel核心，使用mesh网络连接，包含访存单元SHG，标量流水SCL，单独的指令内存和DMA。</p>
<h4 id="Pixel-Visual-Core-Instruction-Set-Architecture">Pixel Visual Core Instruction Set Architecture</h4>
<p>和GPU一样，Pixel采用两趟编译的风格，先将目标语言（Halide）编译成vISA，再将vISA编译为pISA。vISA是超长指令字风格，对于图像大小、寄存器分配和内存大小没有限制。</p>
<h4 id="Pixel-Visual-Core-Example">Pixel Visual Core Example</h4>
<p>vISA代码实例。</p>
<h4 id="Pixel-Visual-Core-Processing-Element">Pixel Visual Core Processing Element</h4>
<p>halo的额外开销相对较小。</p>
<h4 id="Two-Dimensional-Line-Buffers-and-Their-Controller">Two-Dimensional Line Buffers and Their Controller</h4>
<p>LB负责存储不同Kernel之间的中间结果。</p>
<h4 id="Pixel-Visual-Core-Implementation">Pixel Visual Core Implementation</h4>
<p>初代的Pixel是一个单独的芯片。</p>
<h4 id="Summary-How-Pixel-Visual-Core-Follows-the-Guidelines">Summary: How Pixel Visual Core Follows the Guidelines</h4>
<p>参考<a href="#7-2-Guidelines-for-DSAs">7.2节</a>。</p>
<h3 id="7-8-Cross-Cutting-Issues">7.8 Cross-Cutting Issues</h3>
<h4 id="Heterogeneity-and-System-on-a-Chip-SOC">Heterogeneity and System on a Chip (SOC)</h4>
<p>IP化的趋势。</p>
<h4 id="An-Open-Instruction-Set">An Open Instruction Set</h4>
<p>DSA通常需要与CPU绑定，也就是与特定指令集绑定。</p>
<h3 id="7-9-Putting-It-All-Together-CPUs-Versus-GPUs-Versus-DNN-Accelerators">7.9 Putting It All Together: CPUs Versus GPUs Versus DNN Accelerators</h3>
<p>利用6个DNN测试集比较Intel Haswell，NVIDIA K80和TPU的性能。</p>
<h4 id="Performance-Rooflines-Response-Time-and-Throughput">Performance: Rooflines, Response Time, and Throughput</h4>
<p>将计算密度重新定义为每次读取权重后的运算次数，可以用Roofline模型展示DNN的计算性能。由于响应时间的限制，CPU和GPU并不能达到理想的吞吐量。</p>
<h4 id="Cost-Performance-TCO-and-Performance-Watt">Cost-Performance, TCO, and Performance/Watt</h4>
<p>TCO是衡量服务器芯片价格的较好指标。</p>
<h4 id="Evaluating-Catapult-and-Pixel-Visual-Core">Evaluating Catapult and Pixel Visual Core</h4>
<p>Pixel性能较低。</p>
<h2 id="写在最后">写在最后</h2>
<p>虽然有体系结构的基础，并实现过超标量乱序处理器核，但本书阅读下来收获非常大。一是对“量化研究”有了更深的理解；二是补充了自己的知识面，例如以前了解不深的向量指令集扩展和特定领域加速器。另外也震惊于本书的前卫，例如书中对HBM、虚拟化技术等的叙述。但是本书也有一些地方阐述的不够全面，例如虚拟化技术和内存一致性模型等，想要对特定内容加深理解还需要阅读更多参考资料。</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" class="category-chain-item">读书笔记</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>《计算机体系结构：量化研究方法》读书笔记</div>
      <div>https://liangliang678.github.io/2022/10/27/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>亮亮678</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2022年10月27日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2023/02/18/" title="1.5日票+提前入园：爆园下刷完北京环球影城">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">1.5日票+提前入园：爆园下刷完北京环球影城</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/10/20/" title="关于《深入理解计算机系统》">
                        <span class="hidden-mobile">关于《深入理解计算机系统》</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  


  
  









    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  
      <script>
        if (!window.MathJax) {
          window.MathJax = {
            tex    : {
              inlineMath: { '[+]': [['$', '$']] }
            },
            loader : {
              load: ['ui/lazy']
            },
            options: {
              renderActions: {
                insertedScript: [200, () => {
                  document.querySelectorAll('mjx-container').forEach(node => {
                    let target = node.parentNode;
                    if (target.nodeName.toLowerCase() === 'li') {
                      target.parentNode.classList.add('has-jax');
                    }
                  });
                }, '', false]
              }
            }
          };
        } else {
          MathJax.startup.document.state(0);
          MathJax.texReset();
          MathJax.typeset();
          MathJax.typesetPromise();
        }

        Fluid.events.registerRefreshCallback(function() {
          if ('MathJax' in window && MathJax.startup.document && typeof MathJax.startup.document.state === 'function') {
            MathJax.startup.document.state(0);
            MathJax.texReset();
            MathJax.typeset();
            MathJax.typesetPromise();
          }
        });
      </script>
    

  <script  src="https://lib.baomitu.com/mathjax/3.2.2/es5/tex-mml-chtml.js" ></script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
