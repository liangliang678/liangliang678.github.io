<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>预取相关论文综述</title>
    <link href="/2023/07/24/"/>
    <url>/2023/07/24/</url>
    
    <content type="html"><![CDATA[<h2 id="SMS-2006-ISCA">SMS (2006 ISCA)</h2><p>SMS记录每个区域的访问模式，并在该区域的第一次访问时预取区域内其他Cache行。在训练过程中，其使用AGT表记录特定区域的访问模式：其中Filter表以区域的Tag为索引，记录其第一次访问的PC和偏移；Acc表以区域的Tag为索引，记录超过一次访问的区域，比Filter表多了Pattern域，以bitmap的形式记录访问模式。当该区域内的Cache行被替换时，训练结束。训练成功的表项会被记录到PHT，用于之后的预取。</p><h2 id="VLDP-2015-MICRO">VLDP (2015 MICRO)</h2><p>VLDP以页为单位，在DHB中存储每页访问地址的最近四个delta，并用1个delta、2个delta、3个delta去索引全局的DPT，得到预测的delta。VLDP会优先选择更长的历史预测的delta，其思想类似于TAGE预测器。也可以通过预测的delta去递归地访问DPT，来增加预取距离。</p><h2 id="SPP-2016-MICRO">SPP (2016 MICRO)</h2><p>SPP的基本思想和VLDP相似，其以页为单位，在ST中以压缩的形式记录每页的访问历史（至多4个delta），并以历史为索引查找全局的PT，并递归查找PT以增加预取距离。递归查找的深度受全局准确率和每次预取的准确率的影响，每次预取的准确率是PT中记录的delta的频率，全局精确率由Filter统计。另外，GHR记录跨页的预取地址，并在每页第一次访问时查找GHR，继承上一页的访问历史。</p><h2 id="BOP-2016-HPCA">BOP (2016 HPCA)</h2><p>offset预取器不同于stream预取器，其不会捕捉流的访问模式。BOP是Next-Line的扩展，其通过训练找到最佳的offset，该预取器是第二届预取锦标赛的冠军。在训练过程中，BOP遍历尝试所有的offset数次，每次将合适的offset加分，训练结束时取最高分的offset作为训练结果。在RR表中记录已经完成预取的Cache行的触发地址（预取地址Y，触发地址Y-offset），当L2访问地址X到达时，检查X-offset是否在RR表中来确定offset是否合适。</p><h2 id="DOL-2018-ISCA">DOL (2018 ISCA)</h2><p>面向不同模式的预取算法不断被提出，它们有着不同的覆盖率和准确率。本篇论文将多个小范围、高准确率的预取器结合在一起，通过分工的方式实现了较大的覆盖率和较高的准确率。我们可以将已有的访存模式分为四类：stride访问、pointer-chasing访问、iregular访问和region访问。通过复合式预取器，我们可以实现更高的存储效率，优先服务置信度高的预取以减小额外开销，并实现更好的灵活性。</p><p>复合预取器结合了以下预取器：</p><ol><li>T2预取器：经典的stride预取</li><li>P1预取器：<code>*B[i]</code>和pointer-chasing的预取</li><li>C1预取器：region预取</li></ol><p>使用一个协调器来根据指令选择其中的某个预取器，该协调器使用简单的优先级关系进行选择。现有的集中式预取器并不能很好的成为该复合预取器的子模块，因为它们的大部分工作已经被T2预取器承担。适合作为子模块的预测器应该专注某一个模式的预取（小而美而不是大而全）。</p><h2 id="Bingo-2019-HPCA">Bingo (2019 HPCA)</h2><p>Bingo是SMS的扩展，其不仅将PC+Offset作为触发条件，还将更严格的PC+Addr（或更宽松的PC/Addr/Offset）作为触发条件，并优先使用更严格的触发条件对应的访存模式进行预取。虽然使用了不同的触发条件，但Bingo只需要使用一张表来记录访存模式，因为由PC+Addr可以推算出PC+Offset。由PC+Offset的哈希值作为索引，并以PC+Addr作为Tag，查询时优先比较完整的Tag，若无满足，再比较只包含PC+Offset的Tag。</p><h2 id="IPCP-2020-ISCA">IPCP (2020 ISCA)</h2><p>IPCP是第三届预取锦标赛的冠军，其出发点是根据IP对每条Load指令的访存模式进行分类，针对每种访存模式设计一种预取器：</p><ul><li>CS预取器：固定stride类型的Load指令</li><li>CPLX预取器：复杂stride类型的Load指令，使用<code>signature</code>域来记录历史stride，索引到预测的stride</li><li>GS预取器：基于全局的访存信息，标记区域内被访问到的Cache行，并通过继承关系将相邻的区域标记为“稠密”以触发预取；该预取器会将全局信息更新到IP表中每个IP的对应域</li></ul><p>若一个IP命中了多个预取器，则GS优先于CS优先于CPLX。IPCP也可应用于L2 Cache以进一步提高性能。</p><h2 id="Berti-2022-MICRO">Berti (2022 MICRO)</h2><p>stride代表两个连续的访存地址之间的差值，delta代表之前的访存地址与当前访存地址之间的差值。IPCP中的CPLX预取器存在预取及时性方面的问题，且有一些不能识别的pattern；而目前的delta预取器都基于全局的delta，局限性很强。</p><p>Berti基于每条指令训练其最佳的delta：对于一条指令的每次访存，在History Table中记录其地址和时间戳，每次访存将找到的至多8个及时的delta填入表中，并计算每个delta的覆盖率。访存指令执行时，根据每个delta的覆盖率和L1 MSHR的占用率将预取请求发送到不同的Cache层次。</p><h2 id="IMP-2015-MICRO">IMP (2015 MICRO)</h2><p>不规则的内存访问在目前的应用中很常见，特别是在机器学习、图分析和稀疏矩阵中。访问图中的相邻节点或稀疏矩阵中非零数据对应的数组元素通常通过间接索引的方式完成，如<code>A[B[i]]</code>。其中B数组存放在连续的地址空间内，可以通过stride预取器完成预取；而L1 DCache不能容纳整个A数组，且对A数组的访问不是连续的，造成大量的Cache缺失。<br><code>A[B[i]]</code>形式的访问可记为<code>ADDR(A[B[i]]) = (B[i] &lt;&lt; shift) + BaseAddr</code>。在实践中，<code>B[i]</code>通常是提前算好的，那么我们可以在软件访问<code>B[i]</code>时预取<code>B[i+Δ]</code>并根据学习到的<code>shift</code>和<code>BaseAddr</code>预取<code>A[B[i+Δ]]</code>。<br>IMP的工作流程分为三步：</p><ol><li>传统预取器中的stride表捕捉stride访问模式</li><li>检测与stride访问模式相关联的间接访问模式。捕捉索引-地址对来计算<code>shift</code>和<code>BaseAddr</code>并存在Indirect表中</li><li>根据Indirect表中的内容进行预取<br>捕捉索引-地址对是流程中最困难的部分，观察到索引一定是由stride预取得到的，地址一般是索引访问后短时间内Cache缺失的地址，我们的IPD的工作模式如下：表中的每个条目负责一个间接访问模式，当一个stride预取的<code>B[i]</code>被访问时，将<code>B[i]</code>的值写到<code>idx1</code>域中，侦听之后的Cache缺失地址，根据所有可能的<code>shift</code>计算对应的<code>BaseAddr</code>并记录；当这个stride预取的<code>B[i+1]</code>被访问时，将<code>B[i+1]</code>的值写到<code>idx2</code>域中，侦听之后的Cache缺失地址，根据所有可能的shift计算对应的BaseAddr并记录；比较两次记录在相同<code>shift</code>下的<code>BaseAddr</code>是否有一样的，若存在则在Indirect表中记录对应的<code>shift</code>和<code>BaseAddr</code>并删除IPD中的条目，若不存在则等待<code>B[i+2]</code>被访问后抛弃这个条目。随后在Indirect表中记录之后的访存命中该间接访问模式的次数，达到一定的置信度阈值后即开始预取，并逐渐增加预取的距离。另外，作者也提出了针对嵌套循环中的间接访问模式和多路、多层间接访问模式的优化，针对Sector Cache实现粒度预测器的优化。</li></ol><h2 id="Gretch（2021-TACO）">Gretch（2021 TACO）</h2><p>在不同的图分析框架中，有不同类型的数据相关的内存访问（DDA），例如<code>A[B[i]]</code>和<code>*B[i]</code>。先前的工作大多只关注其中的一种，而且需要软件制导，也不适用于乱序的内存访问。<br>Gretch有四个关键组件：stride预取器，stride变化的通知机制，ADT和RT来存储识别访问模式需要的数据和生成预取请求，独立的训练逻辑。 当Stride预取器通知步长发生变化时，进入记录模式，此时ADT记录每条指令的最初两个Cache缺失的地址和数据；当ADT满或者Cache缺失过多时，进入训练模式，基于ADT中数据识别基于指针的（<code>*B[i]</code>）和基于数组间接访问的（<code>A[B[i]]</code>）访问模式，记录到RT中。相比于IMP，Gretch使用了乘除法器来识别所有的步长。在RT中的表项达到一定的置信度时，即开始预取。</p><p>Gretch有四个关键组件：stride预取器，stride变化的通知机制，ADT和RT来存储识别访问模式需要的数据和生成预取请求，独立的训练逻辑。 当Stride预取器通知步长发生变化时，进入记录模式，此时ADT记录每条指令的最初两个Cache缺失的地址和数据；当ADT满或者Cache缺失过多时，进入训练模式，基于ADT中数据识别基于指针的（<code>*B[i]</code>）和基于数组间接访问的（<code>A[B[i]]</code>）访问模式，记录到RT中。相比于IMP，Gretch使用了乘除法器来识别所有的步长。在RT中的表项达到一定的置信度时，即开始预取。</p><h2 id="FDP-2007-HPCA">FDP (2007 HPCA)</h2><p>使用预取的准确率、及时性和Cache污染情况来控制预取的激进度和预取的Cache行在LRU算法中的初始位置。</p><h2 id="HPAC-2009-MICRO">HPAC (2009 MICRO)</h2><p>使用预取的准确率、使用DRAM Bank情况、造成其他核Cache污染的情况、造成其他核DRAM Bank阻塞的情况来控制预取的激进度并覆盖核内的预取调节机制。</p>]]></content>
    
    
    <categories>
      
      <category>体系结构学习</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>vim速查表</title>
    <link href="/2023/07/01/"/>
    <url>/2023/07/01/</url>
    
    <content type="html"><![CDATA[<h2 id="打开文件">打开文件</h2><table><thead><tr><th>操作</th><th>命令</th></tr></thead><tbody><tr><td>移动到指定行</td><td><code>vim +行数 文件路径</code></td></tr><tr><td>高亮显示关键字</td><td><code>vim +/关键字 文件路径</code></td></tr></tbody></table><h2 id="命令模式">命令模式</h2><h3 id="移动光标">移动光标</h3><table><thead><tr><th>操作</th><th>作用</th></tr></thead><tbody><tr><td>h/←</td><td>左移</td></tr><tr><td>l/→</td><td>右移</td></tr><tr><td>k/↑</td><td>上移</td></tr><tr><td>j/↓</td><td>下移</td></tr><tr><td>w</td><td>后移</td></tr><tr><td>b</td><td>前移</td></tr><tr><td>0/^/home</td><td>行首</td></tr><tr><td>$/end</td><td>行末</td></tr><tr><td>ctrl+f/pgup</td><td>上页</td></tr><tr><td>ctrl+b/pgdn</td><td>下页</td></tr><tr><td>gg</td><td>首行</td></tr><tr><td>G</td><td>末行</td></tr><tr><td>nG</td><td>n行</td></tr></tbody></table><h3 id="复制粘贴删除">复制粘贴删除</h3><table><thead><tr><th>操作</th><th>作用</th></tr></thead><tbody><tr><td>x</td><td>删除后一个</td></tr><tr><td>X</td><td>删除前一个</td></tr><tr><td>dd</td><td>剪切一行</td></tr><tr><td>yy</td><td>复制一行</td></tr><tr><td>p</td><td>粘贴到下一行</td></tr><tr><td>P</td><td>粘贴到上一行</td></tr><tr><td>z</td><td>撤销</td></tr><tr><td>ctrl+r</td><td>恢复</td></tr></tbody></table><h3 id="进入其他模式">进入其他模式</h3><table><thead><tr><th>操作</th><th>作用</th></tr></thead><tbody><tr><td>i</td><td>输入模式</td></tr><tr><td>o</td><td>输入新行</td></tr><tr><td>R</td><td>替换模式</td></tr></tbody></table><h2 id="末行模式">末行模式</h2><h3 id="搜索替换">搜索替换</h3><table><thead><tr><th>操作</th><th>作用</th></tr></thead><tbody><tr><td>/字符串 + 回车</td><td>向下搜索</td></tr><tr><td>n</td><td>下一个</td></tr><tr><td>?字符串 + 回车</td><td>向上搜索</td></tr><tr><td>N</td><td>上一个</td></tr><tr><td>:%s/word1/word2/g</td><td>全局替换</td></tr><tr><td>:%s/word1/word2/gc</td><td>单个替换</td></tr></tbody></table><h3 id="文件操作">文件操作</h3><table><thead><tr><th>操作</th><th>作用</th></tr></thead><tbody><tr><td>:w</td><td>保存</td></tr><tr><td>:q</td><td>退出</td></tr><tr><td>:wq</td><td>保存并退出</td></tr><tr><td>:q!</td><td>不保存退出</td></tr><tr><td>:set nu</td><td>显示行号</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>技术笔记</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>tmux速查表</title>
    <link href="/2023/06/30/"/>
    <url>/2023/06/30/</url>
    
    <content type="html"><![CDATA[<h2 id="会话管理">会话管理</h2><table><thead><tr><th>操作</th><th>命令</th><th>快捷键</th></tr></thead><tbody><tr><td>新建会话</td><td><code>tmux new -s &lt;session-name&gt;</code></td><td></td></tr><tr><td>分离会话</td><td><code>tmux detach</code></td><td>ctrl+b d</td></tr><tr><td>接入会话</td><td><code>tmux attach -t &lt;session-name&gt;</code></td><td></td></tr><tr><td>杀死会话</td><td><code>tmux kill-session</code></td><td></td></tr><tr><td>切换会话</td><td><code>tmux switch -t &lt;session-name&gt;</code></td><td></td></tr></tbody></table><h2 id="窗格操作">窗格操作</h2><table><thead><tr><th>操作</th><th>命令</th><th>快捷键</th></tr></thead><tbody><tr><td>划分上下</td><td><code>tmux split-window</code></td><td>ctrl+b &quot;</td></tr><tr><td>划分左右</td><td><code>tmux split-window -h</code></td><td>ctrl+b %</td></tr><tr><td>移动光标</td><td><code>tmux select-pane -U/D/L/R</code></td><td>ctrl+b arrow</td></tr></tbody></table><h2 id="窗口管理">窗口管理</h2><table><thead><tr><th>操作</th><th>命令</th><th>快捷键</th></tr></thead><tbody><tr><td>新建窗口</td><td><code>tmux split-window</code></td><td>ctrl+b c</td></tr><tr><td>切换窗口</td><td><code>tmux select-window -t &lt;window-name&gt;</code></td><td>ctrl+b number</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>技术笔记</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>标记语言速查表</title>
    <link href="/2023/06/15/"/>
    <url>/2023/06/15/</url>
    
    <content type="html"><![CDATA[<h2 id="Markdown">Markdown</h2><table><thead><tr><th>元素</th><th>Markdown语法</th><th>基础语法</th></tr></thead><tbody><tr><td>标题</td><td><code># H1</code> <br> <code>## H2</code> <br> <code>### H3</code></td><td>√</td></tr><tr><td>粗体</td><td><code>**bold text**</code></td><td>√</td></tr><tr><td>斜体</td><td><code>*italicized text*</code></td><td>√</td></tr><tr><td>删除线</td><td><code>~~The world is flat.~~</code></td><td>×</td></tr><tr><td>代码</td><td><code>`code`</code></td><td>√</td></tr><tr><td>代码块</td><td><code>```</code> <br> <code>&#123;</code> <br> <code>&quot;firstName&quot;: &quot;John&quot;,</code> <br> <code>&quot;lastName&quot;: &quot;Smith&quot;,</code> <br> <code>&quot;age&quot;: 25</code> <br> <code>&#125;</code> <br> <code>```</code></td><td>×</td></tr><tr><td>引用块</td><td><code>&gt; blockquote</code></td><td>√</td></tr><tr><td>表格</td><td><code>| Syntax | Description |</code> <br> <code>| ----------- | ----------- |</code> <br> <code>| Header | Title |</code> <br> <code>| Paragraph | Text |</code></td><td>×</td></tr><tr><td>有序列表</td><td><code>1. First item</code> <br> <code>2. Second item</code> <br> <code>3. Third item</code></td><td>√</td></tr><tr><td>无序列表</td><td><code>- First item</code> <br> <code>- Second item</code> <br> <code>- Third item</code></td><td>√</td></tr><tr><td>分割线</td><td><code>---</code></td><td>√</td></tr><tr><td>链接</td><td><code>[title](https://www.example.com)</code></td><td>√</td></tr><tr><td>图片</td><td><code>![alt text](image.jpg)</code></td><td>√</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>技术笔记</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>上海迪士尼4月28日总结</title>
    <link href="/2023/04/28/"/>
    <url>/2023/04/28/</url>
    
    <content type="html"><![CDATA[<p>4月28日，五一放假前一天人流量特别大，下午时飞越地平线排队时间一度达到4小时。米奇妙游童话书关闭。三项优速通刷了9个项目+2个演出+花车，还算可以。</p><hr><p>7:45到达迪士尼地铁站，8:45入园。看到app上创极速光轮只要30min，就先去了，结果排队60min，不过幸运的坐到了第一排。我妈不敢玩，去了巴斯光年星际营救和晶彩奇航。出来正好看到10:00的复仇者联盟培训行动。</p><p>汇合后去看10:45的冰雪奇缘。看完以后在皮诺丘乡村厨房吃午饭，吃完12:00正好看花车，还能在第一排。看完花车先玩了两个优速通的项目胡迪牛仔嘉年华和小熊维尼历险记（正常排队40-50min）。</p><p>1:30在加勒比海盗排队50min，结束后去探秘海妖复仇号，然后看3:10的风暴来临。出来以后在飞越地平线的优速通排了45+10min（等第一排），正常排队225min，太夸张了。</p><p>5点在巴波萨烧烤吃了晚饭，5:30到雷鸣山漂流排队，显示需要135min，但我们进去没多久就暂时关闭检修了，已经在排的可以玩，后面不能新来排队了。最后只排了90min，运气不错。</p><p>7:15到达湖边，已经里三层外三层了，勉强看个烟花，体验一般。不过前面有勇士劝阻了把孩子举过头顶的行为，太牛了！</p><p>看完烟花去漫游童话时光看看城堡，再去最后排个小矮人过山车，花了40min。9:30出园，逛了逛迪士尼小镇，坐地铁回宾馆～</p><hr><p>迪士尼相比环球影城插队的人更少，工作人员更友善，细节方面比较好。不过项目偏向子供向一点，更适合小朋友。</p>]]></content>
    
    
    <categories>
      
      <category>旅游攻略</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>大学生古北水镇1.5日旅游攻略</title>
    <link href="/2023/04/06/"/>
    <url>/2023/04/06/</url>
    
    <content type="html"><![CDATA[<p>早上乘坐S501市郊铁路到达古北口站，然后公交车前往景区。火车站门口也有黑车，约10元/人。到后先办理入住，景区内的酒店和客栈价格较高，景区附近有一个小区，里面的客栈（公寓）价格比较美丽，设施也不错。</p><p>在景区外吃完中饭后，约12:30进入景区，依次参观司马小烧酒坊、永顺染坊、月老祠、英华书院，杨无敌祠，经日月岛广场前往震远镖局。随后2点乘坐缆车上长城。</p><p>长城开放1-10号楼，步行上山到达2号楼，缆车上山到达5号楼或8号楼。若想要轻松一点可选择缆车上山-参观5号楼至8号楼-缆车下车。浏览全程的话可以缆车上山-参观8号楼至2号楼-步行下山。我们非常错误的选择了缆车上下+参观全程，导致走了8号楼-10号楼-2号楼-5号楼，共计用时2.5h。注意日场票要在3:00前上山，4:30开始清场，5:00前缆车下山。</p><p>下长城后参观八旗会馆，4:40-5:00里面正好有演出。附近饭店很多，可以在那吃个晚饭。饭后前往长城剧场和山顶教堂，到达山顶教堂时天空还有一点点亮光，拍照效果非常好。</p><p>从山顶教堂下山后前往日月岛广场观看7:30的无人机表演，然后前往望京街观看8:00的喷泉秀，之后可以选择从日月岛码头乘船前往景区出口。</p><p>因为晚上回不了市区（我们是回怀柔），所以睡一觉乘坐第二天上午10:00的S502返回。早上从景区到车站的公交车出发的很早，但黑车不一定有，有的话价格也较高（我们付了20元/人），可自行选择。</p>]]></content>
    
    
    <categories>
      
      <category>旅游攻略</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>经典超标量乱序处理器核概述</title>
    <link href="/2023/03/28/"/>
    <url>/2023/03/28/</url>
    
    <content type="html"><![CDATA[<h2 id="MIPS-R10000">MIPS R10000</h2><p><img src="/2023/03/28/%E5%9B%BE%E7%89%871.png" alt="MIPS R10000"></p><h2 id="Alpha-21264">Alpha 21264</h2><p><img src="/2023/03/28/%E5%9B%BE%E7%89%872.png" alt="Alpha 21264"></p><h2 id="GS464E">GS464E</h2><p><img src="/2023/03/28/%E5%9B%BE%E7%89%873.png" alt="GS464E"></p><h2 id="SonicBOOM">SonicBOOM</h2><p><img src="/2023/03/28/%E5%9B%BE%E7%89%874.png" alt="SonicBOOM"></p>]]></content>
    
    
    <categories>
      
      <category>体系结构学习</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>国科大研究生怀柔旅游攻略</title>
    <link href="/2023/03/22/"/>
    <url>/2023/03/22/</url>
    
    <content type="html"><![CDATA[<h2 id="雁栖湖-⭐⭐⭐⭐⭐">雁栖湖     ⭐⭐⭐⭐⭐</h2><p>建议秋天或夏天前往。景区周末晚上可以免费进入，看看日落和湖景还不错。沿湖骑行，可以考虑在校内骑共享单车出去，在雁栖湖停车场处右转进入雁栖湖路，一路沿湖到达雁栖湖西路的西山步道入口。西山步道风景很好，但是冬季封闭。截止2023年春季，雁柏山庄至国科大校内的栈道仍未开放，所以不能环湖。</p><ul><li>推荐餐厅：社会主义好农村食堂</li></ul><p><img src="/2023/03/22/%E9%9B%81%E6%A0%96%E6%B9%96.jpg" alt="雁栖湖"></p><h2 id="怀北滑雪场-⭐⭐⭐⭐⭐">怀北滑雪场   ⭐⭐⭐⭐⭐</h2><p>北京第二大的滑雪场，每周一有优惠票，周二至周五是平日票，周末价格更高。雪具、头盔和乌龟都可以租，教练290元/小时，对于没有滑雪过的同学来说是刚需。缆车上还能看到附近山上的河防口长城。</p><ul><li>推荐餐厅：塞上渔乡</li></ul><p><img src="/2023/03/22/%E6%80%80%E5%8C%97%E6%BB%91%E9%9B%AA%E5%9C%BA.jpg" alt="怀北滑雪场"></p><h2 id="红螺寺-⭐⭐⭐⭐">红螺寺     ⭐⭐⭐⭐</h2><p>经过寺庙区以后可以从西侧的观音路上山，到达观音寺后继续爬到中天门。中天门以上的部分暂不对外开放，之后可以从东侧岭上长廊下山，途径观景台、弥勒佛和青龙山。</p><ul><li>推荐餐厅：嵓餐厅</li></ul><p><img src="/2023/03/22/%E7%BA%A2%E8%9E%BA%E5%AF%BA.jpg" alt="红螺寺"></p><h2 id="怀柔水库-⭐⭐⭐">怀柔水库    ⭐⭐⭐</h2><p>在长副坝路或者怀山柔水公园都可以看到，后者视野更好。</p><ul><li>推荐餐厅：超越火锅鸡</li></ul><p><img src="/2023/03/22/%E6%80%80%E6%9F%94%E6%B0%B4%E5%BA%93.jpg" alt="怀柔水库"></p><h2 id="古北水镇-⭐⭐⭐⭐⭐">古北水镇    ⭐⭐⭐⭐⭐</h2><p>详见<a href="/2023/04/06/" title="大学生古北水镇1.5日旅游攻略">大学生古北水镇1.5日旅游攻略</a>。</p><p><img src="/2023/03/22/%E5%8F%A4%E5%8C%97%E6%B0%B4%E9%95%87.jpg" alt="古北水镇"></p><h2 id="黄花城长城-⭐⭐⭐">黄花城长城   ⭐⭐⭐</h2><p>有山有水，风景还不错；但是长城修得太好了，导致我觉得它不如古北水镇的司马台长城。景区门口有很多家常菜餐厅，看上去和雁栖湖附近的差不多。</p><p><img src="/2023/03/22/%E6%B0%B4%E9%95%BF%E5%9F%8E.jpg" alt="水长城"></p><h2 id="青龙峡-⭐⭐⭐⭐⭐">青龙峡     ⭐⭐⭐⭐⭐</h2><p>进入景区后从右侧一直走到青龙峡大坝，上山到大坝上就是蹦极的地点。从蹦极的地点继续往上走有一个5公里的栈道，从栈道可以一直走到露营地，沿途风景不错。从露营地可以坐快艇回到青龙峡大坝，费用70元，体验非常好。然后可以上长城玩，我们是索道上山，爬长城下山，其实反着来更好。山上看青龙峡和怀柔视角极好，可惜长城只开放了一小段。</p><ul><li>推荐餐厅：城边渔村</li></ul><p><img src="/2023/03/22/%E9%9D%92%E9%BE%99%E5%B3%A1.jpg" alt="青龙峡"></p><h2 id="圣泉山-⭐⭐⭐">圣泉山     ⭐⭐⭐</h2><p>其实观音寺以下的区域都没什么意思，感觉有些过度开发，两场演出也是平平无奇。观音寺以上是土路，写着未开放区域，其实也开发的蛮好的，不用担心。一共有3个山顶，可以选择性地爬一个，观音顶上面是一个巨大的监控摄像头。</p><ul><li>推荐餐厅：群生大院</li></ul><p><img src="/2023/03/22/%E5%9C%A3%E6%B3%89%E5%B1%B1.jpg" alt="圣泉山"></p><h2 id="百泉山-⭐⭐">百泉山     ⭐⭐</h2><p>离学校比较近的一个景区，可以公交车前往。沿着山谷徒步深入，高低起伏较小，最里面是一个小瀑布但并没什么水，更往里还有未开放区域，看着也是开发的蛮好的，但景区整体比较无聊就没去。</p><p><img src="/2023/03/22/%E7%99%BE%E6%B3%89%E5%B1%B1.jpg" alt="百泉山"></p><h2 id="慕田峪长城-⭐⭐⭐⭐">慕田峪长城   ⭐⭐⭐⭐</h2><p>早上7:30开园就进去，人非常少。缆车8点才开始运营，坐缆车到达14号敌楼，然后上山到达20号敌楼，下山一直到1号敌楼，最后回到6号敌楼坐滑道下山，全程用时约3.5小时。当天天气非常好，景色也很好，就是各个项目的收费略高。</p><p><img src="/2023/03/22/%E6%85%95%E7%94%B0%E5%B3%AA.jpg" alt="慕田峪"></p>]]></content>
    
    
    <categories>
      
      <category>旅游攻略</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>《超标量处理器设计》读书笔记</title>
    <link href="/2023/02/19/"/>
    <url>/2023/02/19/</url>
    
    <content type="html"><![CDATA[<h2 id="第1章：超标量处理器概述">第1章：超标量处理器概述</h2><h3 id="1-1-为什么需要超标量">1.1 为什么需要超标量</h3><p>加快处理器执行程序的速度：</p><ol><li>减少程序中指令的数量</li><li>减少每条指令在处理器中执行所需要的周期数</li><li>减少处理器的周期时间</li></ol><p>超标量处理器靠硬件实现指令并行，VLIW靠编译器和程序员实现指令并行。处理器设计要根据应用领域和场合来决定设计思路，进行折衷（tradeoff）。</p><h3 id="1-2-普通处理器的流水线">1.2 普通处理器的流水线</h3><p>处理器的级数在考虑能效比的情况下有一个理论最优解，但现实情况往往大不相同。五级流水线包括取指、译码、执行、访存和写回，可以通过“合”和“拆”进一步优化流水线。指令之间存在RAW、WAR和WAW三种相关。</p><h3 id="1-3-超标量处理器的流水线">1.3 超标量处理器的流水线</h3><p>超标量处理器每周期可以取出多于一条的指令送到流水线中执行，并且使用硬件来对指令进行调度。顺序执行的超标量处理器中，计分板用来记录流水线中每条指令的执行情况，为旁路网络提供信息。乱序执行的超标量处理器中，需要增加PRF进行寄存器重命名来解决WAW和WAR两种相关性。发射阶段是流水线从顺序执行到乱序执行的分界点，重排序缓冲实现程序对处理器状态的顺序更新。乱序执行的超标量处理器流水线包括：取指、译码、重命名、分发、发射、读寄存器、执行、写回、提交。预测和恢复电路也是超标量处理器的关键。</p><h2 id="第2章：Cache">第2章：Cache</h2><h3 id="2-1-Cache的一般设计">2.1 Cache的一般设计</h3><p>时间相关性和空间相关性是Cache存在的必要基础，内存墙是Cache诞生的原因。在超标量设计时，ICache需要每周期取出多条指令，DCache也需要支持每周期多条load/store指令的访问。</p><p>Cache由Tag部分和Data部分组成，分为直接映射、组相连、全相连三种组织方式。Cache缺失分为强制缺失、容量缺失和冲突缺失。Cache中Tag SRAM和Data SRAM的访问可以是并行的，也可以是串行的。Cache的写入分为写穿和写回，非写分配和写分配。Cache的替换策略有树状伪LRU算法，随机替换算法等。</p><h3 id="2-2-提高Cache的性能">2.2 提高Cache的性能</h3><p>写缓存可以隐藏写入下级存储的延迟。流水线可以降低处理器的周期时间，需要注意流水线内部store对load的前递。多级结构中Inclusive类型的Cache相比Exclusive类型，虽然浪费了一定的资源，但简化了一致性设计。Victim Cache和Cache是互斥的关系。Filter Cache用在Cache之前，防止偶尔被使用的数据占据Cache。预取可以减少强制缺失，将预取的数据放在Stream Buffer中。错误的预取会浪费功耗和性能。</p><h3 id="2-3-多端口Cache">2.3 多端口Cache</h3><p>实际的处理器当中，一般不会直接使用多端口的SRAM来设计多端口Cache，也不会使用多个SRAM拷贝来设计多端口Cache。Multi-Banking是现实中被广泛使用的方法，但Tag SRAM仍需要多个端口或进行复制。</p><h3 id="2-4-超标量处理器的取指令">2.4 超标量处理器的取指令</h3><p>ICache可以在每周期将一个数据块全部输出。可以考虑将Cache行的大小翻倍，并将一个Cache行分为两个SRAM行进行存储，取出指令后进行重排序。</p><h2 id="第3章：虚拟存储器">第3章：虚拟存储器</h2><h3 id="3-1-概述">3.1 概述</h3><p>负责地址转换的部件一般称为内存管理单元（MMU），虚拟存储器可以实现保护和共享。</p><h3 id="3-2-地址转换">3.2 地址转换</h3><p>目前最通用的是基于分页的虚拟存储器，典型的页大小是4KB，虚拟地址到物理地址的转换实际是虚拟页号到物理帧号的转换。</p><p>页表是存储从虚拟地址到物理地址的对应关系的表格，页表的起始地址存储在页表寄存器（PTR）中。多级页表可以减少页表对于物理存储空间的占用。一个页表中的表项简称为PTE，操作系统创建进程时，在物理内存中为这个进程找到一块连续的4KB空间存放该进程的第一级页表，运行时按需创建第二级页表。</p><p>虚拟存储器可以让每个程序都有独立的地址空间，为物理内存的管理带来了方便，方便为多个进程分配的虚拟内存大于实际可用的物理内存，也方便管理每一个页的访问权限。</p><p>一旦虚拟地址在访问页表时，发现对应的PTE还没有保存相应的映射关系，那么此时硬件就会产生一个Page Fault类型的异常。</p><h3 id="3-3-程序保护">3.3 程序保护</h3><p>可以通过页表中的权限位控制内核和用户对内存的访问。</p><h3 id="3-4-加入TLB和Cache">3.4 加入TLB和Cache</h3><h4 id="TLB的设计">TLB的设计</h4><p>缓存PTE的部件称为TLB，现代处理器多采用两级TLB：一级TLB为哈弗结构，全相联；二级TLB是共用的，组相联。现代的处理器还支持大小可变的页，以充分利用TLB。解决TLB缺失的过程称为Page Table Walker，可以是软件实现，也可以是硬件实现。在发生Page Fault需要替换物理内存中的某一页时，TLB中存在映射的物理页是不能被替换的。软件对TLB的管理需要包括：将所有表项置为无效，将某个ASID对应的表项置为无效，将某个虚拟页号对应的表项置为无效。</p><h4 id="Cache的设计">Cache的设计</h4><p>同义问题（重名）指多个不同的名字对应相同的物理地址，可以通过物理tag和分bank的方式解决该问题。同名问题指相同的名字对应不同的物理位置，可以使用ASID和Global位来解决该问题。软件对Cache的操作包括将ICache的Cache行置为无效，将DCache的Cache行写回，将DCache的Cache行写回并置为无效。</p><h4 id="将TLB和Cache放入流水线">将TLB和Cache放入流水线</h4><p>PIPT的Cache会增加访存的延迟，真实的处理器中很少被使用。VIPT的Cache是最广泛使用的，当单路Cache的容量小于等于页大小时，和物理Cache没有区别；当单路Cache的容量大于页大小时，会存在同名问题，可以使用L2 Cache解决该问题。将虚拟Index中位于虚拟页号的几位存于L2 Cache的表中，就可以让L2 Cache保证相同物理地址的多个虚拟地址不会同时存在于L1 Cache中。VIVT的Cache则需要存储整个VA在相应的表中。</p><h2 id="第4章：分支预测">第4章：分支预测</h2><h3 id="4-1-概述">4.1 概述</h3><p>分支预测对超标量处理器的性能至关重要，分支指令包含方向和目标地址两个要素。动态分支预测直观的方法是将ICache中取出的指令进行快速解码，然后将分支指令的PC送入分支预测器进行预测，但这通常需要多个时钟周期，降低了分支预测的准确度；从L2 Cache写入ICache时进行预解码可以略微缓解过长的延迟。更佳的解决方案是根据PC的值预测本周期的指令组是否存在分支指令以及分支指令的方向和目标地址。</p><h3 id="4-2-分支指令的方向预测">4.2 分支指令的方向预测</h3><h4 id="基于两位饱和计数器的分支预测">基于两位饱和计数器的分支预测</h4><p>基于两位饱和计数器进行分支预测，其状态迁移图还可以进行改进。PHT是两位饱和计数器表，使用PC的低位进行寻址。两条分支指令映射到同一PHT表项称为别名问题，哈希可以缓解别名问题。更新PHT的时间包括：取指阶段，执行阶段和提交阶段。</p><h4 id="基于局部历史的分支预测">基于局部历史的分支预测</h4><p>使用BHR记录一条分支指令在过去的历史状态，使用BHR去索引PHT。n位的BHR可以预测循环周期小于等于n位的序列。将所有分支指令的BHR组合在一起称为BHT，一般使用分支指令PC的一部分来分别索引BHT和PHTs，同样地，使用哈希可以降低别名带来的影响。</p><h4 id="基于全局历史的分支预测">基于全局历史的分支预测</h4><p>GHR是全局历史寄存器，使用PC的哈希值索引PHTs，使用GHR索引对应的PHT。也可以结合拼接或异或的方式进行索引。</p><h4 id="竞争的分支预测">竞争的分支预测</h4><p>使用CPHT选择全局预测器和局部预测器，结合GHR和PC来索引CPHT可以获得更好的效果。</p><h4 id="分支预测的更新">分支预测的更新</h4><p>更新历史寄存器和两位饱和计数器的时机会影响分支预测的准确度。在流水线的取指阶段根据预测的结果推测地更新GHR可以获得较好性能，不过需要GHR的恢复机制。可以使用Retired GHR进行修复，并可以使用checkpoint增加效率。BHR和PHT一般在退休时再更新。</p><h3 id="4-3-分支指令的目标地址预测">4.3 分支指令的目标地址预测</h3><h4 id="直接跳转类型的分支预测">直接跳转类型的分支预测</h4><p>使用BTB记录分支指令的目标地址，BTB中有tag和目标地址，可以是直接相联或组相联。可以通过减少tag的长度来降低开销。当BTB缺失时，一般需要停止流水线执行直到算出目标地址。</p><h4 id="间接跳转类型的分支预测">间接跳转类型的分支预测</h4><p>使用返回地址栈RAS处理call和return指令。RAS需要在取指阶段就知道哪些指令是call和return指令，所以需要BTB存储分支指令的类型。RAS在满时应该覆盖旧的表项，并增加计数器来预测递归调用。</p><p>对于其他间接跳转类型的分支指令，使用BHR和PC来索引Target Buffer。</p><h3 id="4-4-分支预测失败时的恢复">4.4 分支预测失败时的恢复</h3><p>可以基于ROB进行分支预测失败的恢复，在预测错误的分支指令到达ROB表头时清空流水线，但这效率较低。使用checkpoint进行恢复需要消耗更多的硬件资源，还需要对每一条分支指令进行编号。可以使用空闲编号列表来实现编号逻辑。使用PTAB存储预测跳转的分支指令的目标地址，用于执行阶段进行正确性检查。</p><h3 id="4-5-超标量处理器的分支预测">4.5 超标量处理器的分支预测</h3><p>如果要求每周期取出的指令对齐，就可以利用指令组的公共地址进行分支预测，此时需要BTB存储指令组中分支指令的偏移。若不要求对齐，则需要BTB、BHT和PHT都要有多个读端口；多端口BTB很难被接受，故使用预译码的方式直接得到目标地址更为实际；BHT和PHT可以通过交叠的方式模拟多端口。</p><h2 id="第5章：指令集体系">第5章：指令集体系</h2><p>指令集体系包括基本数据类型、指令、寄存器、寻址模式、存储体系、中断和异常、外部IO等内容。对一个指令集体系的硬件实现方式称为微架构。</p><h3 id="5-1-复杂指令集和精简指令集">5.1 复杂指令集和精简指令集</h3><p>指令集从本质上可以分为复杂指令集和精简指令集两种。</p><h3 id="5-2-精简指令集概述">5.2 精简指令集概述</h3><p>MIPS指令有三种类型：I-type，J-type和R-type。ARM指令有三种类型：DP、DT和BR，DP类型的立即数通过循环右移得到，只有少数32位数是合法的立即数。</p><h3 id="5-3-Load-Store指令">5.3 Load/Store指令</h3><p>ARM指令集支持前/后变址的寻址方式，支持多寄存器传送指令LDM/STM。</p><h3 id="5-4-计算指令">5.4 计算指令</h3><p>MIPS中的加法和减法指令可以产生溢出异常，ARM中可以选择将结果的状态保存到状态寄存器中。ARM将移位指令和运算指令集成到了一条指令当中。MIPS通过Hi和Lo两个特殊寄存器保存乘法结果，ARM则使用通用寄存器。</p><h3 id="5-5-分支指令">5.5 分支指令</h3><p>MIPS中直接比较寄存器的值来决定分支指令是否执行，ARM中使用状态寄存器来决定。ARM指令集的任何指令都可以条件执行。</p><h3 id="5-6-杂项指令">5.6 杂项指令</h3><p>SYSCAL、TRAP和ERET指令。</p><h3 id="5-7-异常">5.7 异常</h3><p>处理器的外部事件引起的异常，虚拟地址到物理地址的转换引起的异常，指令自身引起的错误，指令自身产生的异常等。</p><h2 id="第6章：指令解码">第6章：指令解码</h2><h3 id="6-1-指令缓存">6.1 指令缓存</h3><p>因为取指宽度不等于解码宽度，需要指令缓存暂存取出的指令，指令缓存本质是一个多端口的FIFO。</p><h3 id="6-2-一般情况">6.2 一般情况</h3><p>对于ARM中的特殊指令，可以考虑用单独的重命名表和物理寄存器来进行CPSR寄存器的重命名，使用指令拆分来实现多个目的寄存器的指令的重命名工作。解码阶段要判断指令的类型，操作和数据来源。</p><h3 id="6-3-特殊情况">6.3 特殊情况</h3><h4 id="分支指令的处理">分支指令的处理</h4><p>为了减少分支编号分配电路的复杂度，需要限制每周期进行解码的分支指令个数，这可以通过简单的控制指令缓存的读指针来实现。解码阶段还需要对分支预测是否正确进行初步的检查。</p><h4 id="乘累加-乘法指令的处理">乘累加/乘法指令的处理</h4><p>将寄存器Hi和Lo分配为MIPS处理器的第33和第34个通用寄存器，并将乘法/乘累加指令拆为两条指令。在指令分发阶段，两条指令在ROB中占据两个连续的空间，但在发射队列中仍是一个。</p><p>在解码阶段，需要限制每周期可以解码的指令个数，例如一旦发现乘累加指令，只会解码它拆分后的第一条指令和其之前的指令，如此拆分后的指令数便不会超过解码宽度。</p><h4 id="前-后变址指令的处理">前/后变址指令的处理</h4><p>基本和乘累加指令的处理方式相同。</p><h4 id="LDM-STM指令的处理">LDM/STM指令的处理</h4><p>LDM/STM指令使用16位的寄存器列表来对应指令集中定义的16个通用寄存器，若每周期拆分出2个load/store指令，则需要寻找16位的寄存器列表中的最低位开始的两个1。</p><p>可以将16位的向量拆分为四个4位的向量。先对4位向量进行分析，得到其中有无1、第一个1的位置。然后将两个4位向量的信息进行结合，再将两个8位向量的信息进行结合，通过这样的树状结构得到第一个1的位置。</p><p>寻找第二个1的过程更复杂，在结合时需要考察低位向量没有1，有一个1和多于一个1的情况。</p><h4 id="条件执行指令的处理">条件执行指令的处理</h4><p>单独的寄存器重命名。</p><h2 id="第7章：寄存器重命名">第7章：寄存器重命名</h2><h3 id="7-1-概述">7.1 概述</h3><p>可以将相关性分为下面的几类：</p><ol><li>数据相关性：WAW，WAR，RAW</li><li>存储器数据的相关性</li><li>控制相关性</li><li>结构相关性</li></ol><p>通过寄存器重命名可以解决WAW和WAR相关，因为它们产生的原因是有限个数的寄存器、程序中的循环体和代码重用。处理器内部实际存在的寄存器称为物理寄存器，指令集中定义的寄存器称为逻辑寄存器。寄存器重命名映射表（RAT）用来保存已经存在的映射关系，空闲寄存器列表（Free Register List）用来记录哪些物理寄存器是空闲的。</p><h3 id="7-2-寄存器重命名的方式">7.2 寄存器重命名的方式</h3><h4 id="使用ROB进行寄存器重命名">使用ROB进行寄存器重命名</h4><p>需要重命名映射表来指示每个逻辑寄存器的值是位于ROB中还是位于ARF中。该方法实现简单，但很多指令并没有目的寄存器，造成物理寄存器的浪费，而且ROB需要的读端口需求很高。</p><h4 id="将ARF扩展进行寄存器重命名">将ARF扩展进行寄存器重命名</h4><p>PRF的作用和上述的ROB的结果域是相似的，但是没有目的寄存器的指令不需要占用PRF的表项。</p><h4 id="使用统一的PRF进行寄存器重命名">使用统一的PRF进行寄存器重命名</h4><p>使用一个空闲列表来记录这个PRF中哪些寄存器处于空闲状态，其可以用FIFO来实现。当一条指令和后面的某条指令都写到同一个目的寄存器时，则后面的指令退休的时候，前面指令对应的物理寄存器就已经没有用处了，所以在ROB中，除了记录逻辑寄存器当前对应的物理寄存器之外，还需要存储它之前对应的物理寄存器。</p><h3 id="7-3-重命名映射表">7.3 重命名映射表</h3><p>RAT在物理层面上有两种实现方式，一是基于SRAM，二是基于CAM。sRAT使用逻辑寄存器的编号进行寻址，每个表项中存放着对应的物理寄存器的编号。cRAT在每个表项中存放逻辑寄存器的编号和有效位，表项在cRAT中的地址是对应的物理寄存器的编号。对cRAT进行Checkpoint只需要保存状态位。</p><h4 id="基于SRAM的重命名映射表">基于SRAM的重命名映射表</h4><p>当需要对分支指令的状态进行Checkpoint保存时，需要将整个sRAT都保存起来。只对误预测率较高的分支指令进行Checkpoint可以减少Checkpoint的个数。为一条指令的目的寄存器找到一个空闲的物理寄存器时，sRAT中旧的对应关系需要保存在指令的ROB中，供释放物理寄存器和RAT修复使用。</p><h4 id="基于CAM的重命名映射表">基于CAM的重命名映射表</h4><p>每次对cRAT进行Checkpoint，只需要保存有效位即可，需要注意一个物理寄存器对应的有效位即使是0，也并不能表示它已经变为了空闲状态。</p><h3 id="7-4-超标量处理器的寄存器重命名">7.4 超标量处理器的寄存器重命名</h3><p>对于一条指令来说，RAT需要三个读端口，一个写端口。超标量处理器的寄存器重命名过程中需要考虑RAW和WAW两种相关性。</p><p>需要将每条指令的源寄存器编号和它前面所有指令的目的寄存器编号进行比较，如果存在一个相等的项，那么这个源寄存器对应的物理寄存器就不是来自于RAT的输出，而是来自于当前周期从空闲列表输出的对应值；如果存在多个相等的项，那么就使用最新的那条指令所对应的物理寄存器。</p><p>如果存在多条指令的目的寄存器都相等的情况，那么只有最新的那条指令的映射关系才允许写入RAT当中。如果在一个周期内进行寄存器重命名的几条指令中，有两条指令的目的寄存器相等，那么比较新的这条指令对应的旧的物理寄存器就直接来自于比较旧的那条指令。</p><h3 id="7-5-寄存器重命名过程的恢复">7.5 寄存器重命名过程的恢复</h3><h4 id="使用Checkpoint">使用Checkpoint</h4><p>将Checkpoint简称为GC，分为随机访问的GC和串行访问的GC。对于RAT来说，在SRAM的每个最小存储单元（MBC）周围都加入同样的存储单元（CBC）。</p><h4 id="使用WALK">使用WALK</h4><p>可以按照ROB中的信息，把所有更改RAT的指令按照相反的顺序，将RAT进行恢复。</p><h4 id="使用Architecture-State">使用Architecture State</h4><p>将aRAT的内容在指令退休阶段直接恢复到重命名阶段的RAT中。</p><h3 id="7-6-分发">7.6 分发</h3><p>流水线的分发阶段是顺序执行和乱序执行的分界点。分发阶段将寄存器重命名之后的指令写到发射队列和重排序缓存中。</p><h2 id="第8章：发射">第8章：发射</h2><h3 id="8-1-概述">8.1 概述</h3><ul><li>发射队列：用来存储已经被寄存器重命名但还没有执行的指令</li><li>分配电路：从发射队列中找到空闲的空间，将寄存器重命名之后的指令存储到其中</li><li>选择电路：在多条准备好的指令中选出最合适的指令送到FU执行</li><li>唤醒电路：将FU执行得到的结果通知给发射队列中所有等待这个数据的指令</li></ul><h4 id="集中式-VS-分布式">集中式 VS 分布式</h4><p>所有的FU共用一个发射队列，称为集中式的发射队列；每个FU都有一个单独的发射队列，称为分布式的发射队列。</p><h4 id="数据捕捉-VS-非数据捕捉">数据捕捉 VS 非数据捕捉</h4><p>在流水线的发射阶段之前读取寄存器，称为数据捕捉的结构，发射队列中存储操作数的地方称为payload RAM。当一条指令从发射队列中被选中时，它会将目的寄存器的编号值进行广播，发射队列中其他的指令可以捕捉FU的结果。</p><p>在流水线的发射阶段之后读取物理寄存器堆，称为非数据捕捉结构，该方法可以减少发射队列的面积，但需要更多的物理寄存器读端口。</p><h4 id="压缩-VS-非压缩">压缩 VS 非压缩</h4><p>压缩的发射队列中，每当一条指令被选中而离开发射队列时，会出现一个“空隙”，这条指令上面所有的指令都会下移一格，填上“空隙”。该方法可以保证空闲的空间都处于发射队列的上部，而且队列中的指令按新旧顺序排列。该方法的分配电路和选择电路简单，但面积和功耗不容乐观。</p><p>非压缩的发射队列中，空闲空间在发射队列中的分布是没有规律的，指令的位置信息和年龄信息也没有关联。但功耗和布线较为友好。</p><h3 id="8-2-发射过程的流水线">8.2 发射过程的流水线</h3><h4 id="非数据捕捉结构的流水线">非数据捕捉结构的流水线</h4><p>发射过程被分为了唤醒和仲裁两个流水线阶段，在唤醒阶段，发射队列中的所有相关的寄存器会被置为准备好的状态；在仲裁阶段，会使用仲裁电路从发射队列中选择一条最合适的指令送到FU中。唤醒的过程一般会提前以实现背靠背执行两条存在RAW相关的指令，这需要仲裁和唤醒两个操作放在一个周期之内完成，还需要旁路网络的支持。</p><h4 id="数据捕捉结构的流水线">数据捕捉结构的流水线</h4><p>多端口的payload RAM的延迟较大，可以将仲裁和唤醒放在一个周期内完成，将payload RAM的读取放在下一个周期完成；将执行和旁路也分为两个流水级实现。</p><h3 id="8-3-分配">8.3 分配</h3><p>当采用非压缩的方式来设计发射队列时，需要分配电路能够找到四个空闲的表项。可以采用树状结构来寻找空闲，也可以采用FIFO结构的空闲列表。更激进者，可以将发射队列进行拆分。</p><h3 id="8-4-仲裁">8.4 仲裁</h3><h4 id="1-of-M的仲裁电路">1-of-M的仲裁电路</h4><p>采用非压缩方式设计的发射队列中，可以使用每条指令在ROB中的位置作为这条指令的年龄信息，并在ROB的地址前面再加入一位位置值。根据年龄值，通过树状的比较电路即可选出最旧的指令。</p><p>为屏蔽掉发射队列中没有准备好的指令，可以添加ready位，并将每条指令在发射队列中的地址信息也随比较过程流动。</p><h4 id="N-of-M的仲裁电路">N-of-M的仲裁电路</h4><p>完美的N-of-M仲裁电路的延迟过大，可以采用折中的方案，对每一条指令指定一个FU，实现N个1-of-M的仲裁电路，但这不能实现完美的oldest-first。</p><h3 id="8-5-唤醒">8.5 唤醒</h3><h4 id="单周期指令的唤醒">单周期指令的唤醒</h4><p>被仲裁电路选中的指令会将它的目的寄存器的编号送到对应的总线上，每一条总线上的值会和发射队列中所有的源寄存器的编号进行比较，如果发现相等，它就可以向对应的仲裁电路发出请求信号。如果从仲裁电路得到了有效的响应信号，则将这条指令标记为“已经被选中”的状态。</p><h4 id="多周期指令的唤醒">多周期指令的唤醒</h4><p>延迟广播的方法可能导致广播总线的冲突，可以使用一个表格记录每条指令的执行周期数，否决可能出现总线冲突的指令的仲裁请求。延迟唤醒的方法可以使用移位寄存器来实现。</p><h4 id="推测唤醒">推测唤醒</h4><p>可以假设D-Cache是一直命中的，以此来进行唤醒，预测错误的情况需要进行状态恢复。load指令被仲裁电路选中之后，需要等待两个周期才可以将相关的指令进行唤醒，这两个周期称为IW；从load指令开始将相关的指令进行唤醒，直到它明确自身D-Cache的命中情况，中间间隔的周期称为SW。缺失时SW窗口中的指令需要replay。</p><p>基于Issue Queue的replay中，所有的指令在被仲裁电路选中的时候，都不要马上离开发射队列，只有当这条指令确认自己可以正确执行的时候，才会离开发射队列。考虑到store/load违例和load/load违例的情况，指令要在退休时才能离开发射队列，这大大浪费了发射队列的空间。作为折中，可以将load/load违例和store/load违例的情况通过重新取指解决。但我们仍需要在D-Cache缺失时，将load指令和之后的指令抹去。无论是抹去之后的所有指令，还是只抹去SW窗口中的指令，都需要识别其与load指令的相关性。</p><p>可以通过对每个物理寄存器添加load-vector的值来识别这种相关性，向量的长度等于in-flight的load指令的数量，表格的容量等于物理寄存器的数量，这种方法的开销较大。另一种较好的方法是，对于每条load指令都使用一个5位的值，表示这条load指令处于流水线的哪个位置，这个值称为LPV。所有被唤醒的源寄存器都会得到这条load指令的LPV值，发射队列中所有源寄存器的LPV每周期逻辑右移一位。load指令到达流水线的Data阶段时，在发射队列中那些LPV的最低位是1的所有源寄存器，都会和这条load指令存在直接或间接的相关性。若LPV的值随指令在流水线中流动，还可以精确地抹掉相关的指令。</p><p>基于Replay Queue的replay中，指令被仲裁电路选中之后，会马上离开发射队列，进入RQ。一般地，非数据捕捉结构的发射队列来说，需要较长时间确定load指令的执行状态，采用该方式能降低发射队列的压力。</p><h2 id="第9章：执行">第9章：执行</h2><h3 id="9-1-概述">9.1 概述</h3><p>RISC指令集一般包括算术运算、访问存储器的操作、控制程序流的操作和特殊的指令。执行阶段的另一个重要的部分是旁路网络。</p><h3 id="9-2-FU的类型">9.2 FU的类型</h3><p>ALU负责对整数类型的数据进行计算。AGU用来计算地址。BRU负责处理程序控制流类型的指令，即计算分支指令的目标地址，并判断分支条件是否成立。BRU的另一功能是进行分支预测的正确性检查。</p><p>MIPS处理器使用了在分支指令执行的同时判断条件的方法，而ARM和PowerPC等处理器在每条指令的编码中都加入了条件码。条件码的存在对寄存器重命名造成困难，预测一条指令总是会执行，在错误时再刷新流水线，会导致处理器的执行效率很低；Intel提出了使用硬件插入额外的指令（select-uOP指令）的解决方案。</p><h3 id="9-3-旁路网络">9.3 旁路网络</h3><p>将FU的输出端数据送到FU的输入端、物理寄存器堆、payload RAM等的通路，称为旁路网络。为降低延迟，可在读取寄存器后增加Source Drive阶段，在执行后增加Result Drive阶段。</p><p>当FU的数量增加时，旁路网络的复杂度迅速增加。多个FU可以共享前递总线，因此仲裁电路在进行选择时需要判断FU当前的资源是否可以使用。当需要增加流水级时，旁路网络也会变得更复杂。</p><h3 id="9-4-操作数的选择">9.4 操作数的选择</h3><p>需要ScoreBoard记录所有物理寄存器的信息，包括物理寄存器会在哪个FU中被计算出来，这些值是否已被写回PRF中。执行的过程需要先读取ScoreBoard来判断操作数的来源。更简单的方案是，在将一条指令的计算结果进行广播时，将这条指令的目的寄存器编号也进行广播。通过源寄存器和广播的目的寄存器的比较结果控制源寄存器的多路选择器。</p><h3 id="9-5-Cluster">9.5 Cluster</h3><p>将发射队列采用Cluster结构可以减少发射队列的端口个数，加快每个仲裁电路的速度，但跨Cluster的唤醒会经过较长的走线，增加一个bubble。在数据捕捉的结构中，payload RAM可以分Cluster实现；在非数据捕捉的结构中，物理寄存器堆可以分Cluster实现。</p><p>在旁路网络上引入Cluster结构，可以显著降低复杂度，但只有当两条连续的相关指令使用同一Cluster时，才可以背靠背执行。</p><h3 id="9-6-存储器指令的加速">9.6 存储器指令的加速</h3><h4 id="Memory-Disambiguation">Memory Disambiguation</h4><p>在部分的乱序执行中，store指令是按序执行的，处于两个store指令之间的所有load指令可以乱序执行。将已经被仲裁电路选中但还没有退休的指令存储在Store Buffer中。通过Store Buffer进行前递需要判断load和store指令的相对顺序，要对它们进行编号。</p><p>在完全的乱序执行中，load指令的操作数只要准备好了，就可以参与仲裁的过程。若提前执行的load指令得到了错误的结果，则需要抹掉这条load指令和与它有直接或间接相关关系的指令，这称为store/load违例。需要精确的load/store相关性的预测来提升乱序执行访存的性能。Intel提出了编译器和指令集配合解决load/store相关性的方案。</p><h4 id="非阻塞Cache">非阻塞Cache</h4><p>非阻塞的Cache允许处理器在发生D-Cache缺失的时候继续执行新的load/store指令。支持非阻塞的操作方式需要将产生D-Cache缺失的load/store指令保存起来，这个结构称为MSHR。MSHR主要由两部分组成，本体用来保存所有产生首次缺失的load/store指令的信息；load/store Table存储所有发生缺失的load和store指令的信息。</p><h4 id="关键字优先">关键字优先</h4><p>从缺失的字开始读取。</p><h4 id="提前开始">提前开始</h4><p>缺失的字被取出后马上恢复流水线。</p><h2 id="第10章：提交">第10章：提交</h2><h3 id="10-1-概述">10.1 概述</h3><p>只有在重排序缓存中最旧的那条指令变为已完成的状态时，这条指令才允许离开流水线，并使用它的结果对处理器的状态进行更新，此时称这条指令退休了。当一条指令没有退休之前，它的状态都是推测的。</p><h3 id="10-2-重排序缓存">10.2 重排序缓存</h3><p>ROB本质上是一个FIFO，记录指令是否完成、逻辑寄存器号、物理寄存器号、旧的物理寄存器号、PC、异常状态和类型等信息。ROB的读写端口需求很大。</p><h3 id="10-3-管理处理器的状态">10.3 管理处理器的状态</h3><p>指令集定义的状态称为Architecture State，超标量处理器内部的状态称为Speculative State，后者是程序员不可见的。可以使用ROB管理指令集定义的状态，也可以使用物理寄存器管理指令集定义的状态。</p><h3 id="10-4-特殊情况的处理">10.4 特殊情况的处理</h3><h4 id="分支预测失败的处理">分支预测失败的处理</h4><p>前端的状态恢复比较简单，只需要将流水线中重命名阶段之前的所有指令都抹掉，将分支预测器中的历史状态表进行恢复，并使用正确的地址来取指令即可。后端的状态恢复比较复杂，但其可以和新的指令在前端流动的过程并行进行。</p><p>后端的状态恢复主要是对RAT的恢复。基于ROB的寄存器重命名方式，只要将RAT中所有的内容都标记为ARF状态。基于统一的PRF进行重命名的结构中，可以将后端RAT全部复制到寄存器重命名阶段使用的RAT中。以上的方法称为Recovery at Retire，有分支预测失败惩罚过大的问题。使用Checkpoint和WALK的方式可以加快恢复进程。</p><h4 id="异常的处理">异常的处理</h4><p>精确的异常指处理器能够知道哪条指令发生了异常，并且这条发生异常的指令之后的所有指令都不允许改变处理器的状态。对于Free Register Pool，恢复的过程只需要修改读指针；对于Busy Table，可以在WALK过程中逐个修改。</p><h4 id="中断的处理">中断的处理</h4><p>中断是异步的，可以立即处理，也可以延迟处理。</p><h4 id="Store指令的处理">Store指令的处理</h4><p>可以让Store指令在真正成功写入D-Cache之前就离开ROB，只在Store Buffer中标记为retired状态，由Store Buffer将数据写回D-Cache。</p><h4 id="指令离开流水线的限制">指令离开流水线的限制</h4><p>由于资源的限制，每周期退休的同一类型的指令数量可能有限制。</p>]]></content>
    
    
    <categories>
      
      <category>读书笔记</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>1.5日票+提前入园：爆园下刷完北京环球影城</title>
    <link href="/2023/02/18/"/>
    <url>/2023/02/18/</url>
    
    <content type="html"><![CDATA[<p>2月16日客流量38680，2月17日客流量45360。靠1.5日票和环球影城大酒店住宿，我们不紧不慢地刷完了所有游乐设施，看了所有热门演出。</p><p>1.5日票可以让我们第一天晚起，中午再前往环球影城。提前入园不仅仅是提早一小时刷哈利波特区的热门项目，还可以节省大量精力；因为正常时间入园的游客都来的很早，在外面站很久，而来得晚则要排很久的队才能入园。</p><h2 id="体验感想">体验感想</h2><p>各种游乐设施和演出都不错，兼顾成年人和小朋友的需求。园区内外的餐饮也没有很离谱，以&quot;景点&quot;的标准来看还算不错。</p><p>插队的话每个项目都有四五个人，多是家庭中一个人排大项，其他人玩小项后在大项插队和家人会合。也有看着像大学生的插队，甚至在餐厅讨论插队心得。一般三四个人插队也不影响，但在《灯影传奇》还是看不下去阻止了两个幼崽插队，最后两位大人排到我们后面，两位幼崽排到前面去，勉强能接受。其实还是工作人员不足，广播已经一直在播禁止家人代排留位了，但很多人觉得&quot;没人管就是可以&quot;。</p><p>排队设施设置的不是很合理，完全可以设置折叠座位，而且很多项目在队伍短的时候不会重新放置栅栏，还是需要绕圈，可能还是工作人员不够的原因。</p><p>园区的景色设计的也不错，尤其是哈利波特区非常精致，其他一些区域的设计元素，例如变形金刚区，略显粗糙。</p><h2 id="项目总览">项目总览</h2><p>必玩：《神偷奶爸小黄人闹翻天》《哈利波特与禁忌之旅》《侏罗纪世界大冒险》《变形金刚：火种源争夺战》《霸天虎过山车》</p><p>可玩：《萌转过山车》《灯光，摄影，开拍》《鹰马飞行》《飞越侏罗纪》《功夫熊猫：神龙大侠之旅》</p><p>不必：《超萌漩漩涡》《奥利凡德》《奇遇迅猛龙》《灯影传奇》《炫转武侠》《大黄蜂回转机》</p><p>必看：《欢乐好声音巡演》《不可驯服》</p><p>可看：《环球大巡游》《霍格沃兹城堡夜间魔法庆典》</p><hr><p>好莱坞区：</p><ul><li>灯光，摄影，开拍：舞台剧，场景还行。</li></ul><p>小黄人区：</p><ul><li>萌转过山车：温和的室内过山车，排队超过40min不值得。</li><li>超萌漩漩涡：转圈，很无聊，超过20min不值得。</li><li>神偷奶爸小黄人闹翻天：固定座位的4d电影体验，排队的时候可以看小黄人问答的影片。</li></ul><p>哈利波特区：</p><ul><li>鹰马飞行：适中的过山车，看看风景还不错。</li><li>奥利凡德：舞台剧，演员的中文很抽象听不懂，不如听英文。</li><li>哈利波特与禁忌之旅：4d飞行装置，如果晕3d严重的话会犯恶心，不宜饭后乘坐。城堡内排队区有很多有趣的场景，但因为提前入园没咋排队就走马观花了。</li></ul><p>侏罗纪区：</p><ul><li>飞越侏罗纪：飞行装置，感觉一般般，超过45min不值得。</li><li>侏罗纪世界大冒险：骑乘设备，恐龙蛮逼真，还是蛮不错的，也比较温和，排队区也有一些场景，但一般。</li><li>奇遇迅猛龙：和迅猛龙合影，超过20min感觉不值得。</li></ul><p>功夫熊猫区：</p><ul><li>功夫熊猫：神龙大侠之旅：坐船，本区最值得尝试的一个，船容量大，排队一般很快。</li><li>炫转武侠：平平无奇旋转木马，超过20min不值得。</li><li>灯影传奇：转圈，超过20min不值得。</li></ul><p>变形金刚区：</p><ul><li>大黄蜂回转机：转圈，超过20min不值得。</li><li>霸天虎过山车：个人认为最值得二刷的一个项目，看着很恐怖，其实没有啥不适感。</li><li>变形金刚：火种源争夺战：3d骑乘设备，USS中我最喜欢的项目，没想到北京也有，而且比新加坡的还好一些。</li></ul><p>各种演出</p><ul><li>欢乐好声音巡演：非常值得看。</li><li>不可驯服：非常值得看。</li><li>霍格沃兹城堡夜间魔法庆典：还可以。</li><li>环球大巡游：还可以。</li><li>青蛙合唱团：如果时间上正好可以看看。</li></ul><h2 id="时间规划">时间规划</h2><p>中午12点到达环球影城大酒店办理入住，但还没有整理好的客房，先寄存了行李。前往城市大道逛街，和球合影，人不是很多。</p><p>下午2点入园，先玩《灯光，摄影，开拍》和《好莱坞见面会》合影，基本不需要排队。然后在梅尔斯餐厅买了&quot;荔枝菠萝特饮&quot;，味道还不错。</p><p>在小黄人园区《萌转过山车》排队45min，《小黄人见面会》排队20min。然后在3:35pm左右正好赶上4:00pm的《欢乐好声音巡演》的最后两个位置。出来以后在《神偷奶爸小黄人闹翻天》排队50min，结束后5:20pm正好《环球大巡游》。巡游结束后没有在第一时间去排项目，导致《超萌漩漩涡》排队40min。</p><p>之后赶上6:45pm的《霍格沃兹城堡夜间魔法庆典》，在灯光秀尾声阶段排上了《鹰马飞行》，20min。之后慢慢从哈利波特区和小黄人区转出来，这时候拍照人比较少。</p><p>晚上在&quot;阿甘虾餐厅&quot;吃饭，还以为那么多人一起出来餐厅会爆满，结果餐厅还是比较空，不需要等位。&quot;皮爷咖啡&quot;的糖葫芦山楂乌龙冰摇茶也不错。</p><hr><p>7:20am退房和寄存行李，7:30am开始排队安检，此时已经排了长队，我们大概在所有提前入园的人群中一半的位置。8:15am入园，《哈利波特与禁忌之旅》排队30min，9:00am蹲到《奥利凡德》的第一场。&quot;三把扫帚&quot;餐厅还没有开门，先去了侏罗纪区。</p><p>只有《侏罗纪世界大冒险》开门，需要排队70min。正准备排的时候看到《飞越侏罗纪》正在空车试运行，赶紧去，基本没排队就坐上了。9:40am在《侏罗纪世界大冒险》排队70min。坐完后去&quot;三把扫帚&quot;看了下要排队2h以上，于是放弃，去了&quot;哈蒙德餐厅&quot;，小汉堡一般，猪颈肉不错，恐龙蛋太甜了。</p><p>12:00pm吃完在《奇遇迅猛龙》排队40min，然后在&quot;猪头酒吧&quot;买了黄油啤酒，看&quot;青蛙合唱团&quot;。1:20pm在《灯影传奇》排队40min，在《功夫熊猫：神龙大侠之旅》排队15min，在《炫转武侠》排队30min，这一区域家长带孩子很多，插队现象严重。</p><p>3:25pm在《不可驯服》排队。看完后4:25pm在《大黄蜂回旋机》排队45min，《霸天虎过山车》显示排队70min，其实只用了50min。在6:10pm就只剩最后一个项目了，去早上没开门的《侏罗纪营地》和各种商店转转。6:35pm排《变形金刚：火种源争夺战》45min。</p><p>7:30pm提取行李出园，在&quot;囍鳯楼&quot;吃饭，味道中规中矩。在环球影城大酒店打车会方便些。</p>]]></content>
    
    
    <categories>
      
      <category>旅游攻略</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>《计算机体系结构：量化研究方法》读书笔记</title>
    <link href="/2022/10/27/"/>
    <url>/2022/10/27/</url>
    
    <content type="html"><![CDATA[<h2 id="写在前面">写在前面</h2><p>《计算机体系结构：量化研究方法》（<em>Computer Architecture: A Quantitative Approach</em>）一直被称为计算机体系结构领域的圣经。在研究生一年级组里没有布置任务，所以购买了英文第六版阅读。本书从指令级并行，数据级并行和任务级并行的角度分析了处理器的设计，并讲解了近年来热门的仓库级计算机和特定领域加速器的内容。在阅读本书之前，应该有计算机组成原理的基础知识。</p><p>本文是笔者为了日后复习所写的“索引”性质的读书笔记，因为阅读的是英文版，一些概念是作者个人的翻译，不甚准确。另外，全书贯彻了<strong>量化</strong>的思想，笔记中亦没有体现。</p><h2 id="Chapter1-Fundamentals-of-Quantitative-Design-and-Analysis">Chapter1: Fundamentals of Quantitative Design and Analysis</h2><h3 id="1-1-Introduction">1.1 Introduction</h3><p>在第一台电子计算机被发明以来的70年间，计算机技术取得了惊人的进步。更好的计算机体系结构和和更先进的集成电路技术共同推动着微处理器的进步。汇编语言的淘汰和平台无关的操作系统为新的计算机体系结构铺平了道路，促成了RISC的诞生。微处理器的发展使用户获得了更多的算力；引入了新的计算机，包括PC、手机等；取代了其他电子电路设计；催生了软件工业。</p><p>但硬件的文艺复兴可能面临终结，因为两个重要的定律不复存在。一是Dennard定律：得益于更小的晶体管尺寸，相同硅片面积下晶体管数量的增加不会引起功耗的增加。Dennard定律在2004年终结，因为电压不再随着晶体管尺寸的缩小而降低。二是Moore定律：每两年芯片上的晶体管数量会翻倍。Moore定律将于近期终结。领域特定加速可能有机会破局。</p><h3 id="1-2-Classes-of-Computers">1.2 Classes of Computers</h3><h4 id="Internet-of-Things-Embedded-Computers">Internet of Things/Embedded Computers</h4><p>IoT设备从真实世界中收集有用的数据并与真实世界进行互动，催生了很多智能应用。在嵌入式领域，价格是关键因素。</p><h4 id="Personal-Mobile-Device">Personal Mobile Device</h4><p>PMD中价格和功耗至关重要，其应用多是面向网络的或是基于媒体的。响应性和可预测性是媒体应用的关键，所以实时处理性能很重要。</p><h4 id="Desktop-Computing">Desktop Computing</h4><p>个人电脑市场目前超过一半被笔记本电脑占据，性价比在该领域是关键。</p><h4 id="Servers">Servers</h4><p>服务器领域关心可靠性和可扩展性，将吞吐量作为性能指标。</p><h4 id="Clusters-Warehouse-Scala-Computers">Clusters/Warehouse-Scala Computers</h4><p>SaaS应用的增长催生了机群和仓库级计算机，其注重功耗、性价比和可靠性。</p><h4 id="Classes-of-Parallelism-and-Parallel-Architecture">Classes of Parallelism and Parallel Architecture</h4><p>软件中有两种并行性：数据级并行和任务级并行。计算机通过四种方式挖掘软件中的并行性：指令级并行；向量架构、GPU和多媒体指令；线程级并行；任务级并行。Flynn将计算机分为四类：SISD，SIMD，MISD和MIMD。</p><h3 id="1-3-Defining-Computer-Architecture">1.3 Defining Computer Architecture</h3><p>早些年将计算机体系结构定义为指令集体系结构，这是片面的。</p><h4 id="Instruction-Set-Architecture-The-Myopic-View-of-Computer-Architecture">Instruction Set Architecture: The Myopic View of Computer Architecture</h4><p>ISA是软硬件的界面，本书中采用RISC-V作为示例：</p><ul><li>ISA的分类：寄存器-内存型和load-store型。</li><li>内存索引：按字节索引。</li><li>索引方式：寄存器、立即数、偏移量等。</li><li>操作数：字节、半字、字、双字和IEEE 754浮点数。</li><li>操作类型：数据传输、算术运算、控制流和浮点运算。</li><li>控制流指令：条件跳转、无条件跳转、过程调用和返回。</li><li>编码方式：定长和变长。</li></ul><h4 id="Genuine-Computer-Architecture-Designing-the-Organization-and-Hardware-to-Meet-Goals-and-Functional-Requirements">Genuine Computer Architecture: Designing the Organization and Hardware to Meet Goals and Functional Requirements</h4><p>组织架构或微架构指处理器的设计，包括内存系统、处理器核设计等内容，例如同一ISA的不同处理器。硬件架构指计算机的规格，例如同一系列的不同处理器。</p><h3 id="1-4-Trends-in-Technology">1.4 Trends in Technology</h3><p>五个实现技术如今正以惊人的速度改变着半导体行业：</p><ol><li>集成电路技术</li><li>半导体DRAM</li><li>半导体闪存</li><li>磁盘技术</li><li>网络技术</li></ol><h4 id="Performance-Trends-Bandwidth-Over-Latency">Performance Trends: Bandwidth Over Latency</h4><p>带宽的增长速度比延迟的降低速度更快</p><h4 id="Scaling-of-Transistor-Performance-and-Wires">Scaling of Transistor Performance and Wires</h4><p>晶体管密度随晶体管尺寸的缩小按平方增加，晶体管性能随晶体管尺寸的缩小按线性增加，但连线延迟不会随之降低，导致连线延迟如今成为棘手的问题。</p><h3 id="1-5-Trends-in-Power-and-Energy-in-Integrated-Circuits">1.5 Trends in Power and Energy in Integrated Circuits</h3><h4 id="Power-and-Energy-A-System-Perspective">Power and Energy: A System Perspective</h4><p>对于系统设计者而言，有三个问题值得关注：处理器的最高功耗是多少？处理器的正常功耗（TDP）是多少？处理器的能效比（以消耗的能量计算）是多少？</p><h4 id="Energy-and-Power-Within-a-Microprocessor">Energy and Power Within a Microprocessor</h4><p>动态功耗：</p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.667ex;" xmlns="http://www.w3.org/2000/svg" width="49.666ex" height="2.554ex" role="img" focusable="false" viewbox="0 -833.9 21952.5 1128.9" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-1-TEX-I-1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"/><path id="MJX-1-TEX-I-1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/><path id="MJX-1-TEX-I-1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"/><path id="MJX-1-TEX-I-1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"/><path id="MJX-1-TEX-I-1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"/><path id="MJX-1-TEX-I-1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"/><path id="MJX-1-TEX-N-221D" d="M56 124T56 216T107 375T238 442Q260 442 280 438T319 425T352 407T382 385T406 361T427 336T442 315T455 297T462 285L469 297Q555 442 679 442Q687 442 722 437V398H718Q710 400 694 400Q657 400 623 383T567 343T527 294T503 253T495 235Q495 231 520 192T554 143Q625 44 696 44Q717 44 719 46H722V-5Q695 -11 678 -11Q552 -11 457 141Q455 145 454 146L447 134Q362 -11 235 -11Q157 -11 107 56ZM93 213Q93 143 126 87T220 31Q258 31 292 48T349 88T389 137T413 178T421 196Q421 200 396 239T362 288Q322 345 288 366T213 387Q163 387 128 337T93 213Z"/><path id="MJX-1-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"/><path id="MJX-1-TEX-N-2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"/><path id="MJX-1-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"/><path id="MJX-1-TEX-N-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"/><path id="MJX-1-TEX-I-1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"/><path id="MJX-1-TEX-I-1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"/><path id="MJX-1-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/><path id="MJX-1-TEX-I-1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/><path id="MJX-1-TEX-N-A0" d=""/><path id="MJX-1-TEX-I-1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"/><path id="MJX-1-TEX-I-1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"/><path id="MJX-1-TEX-I-1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D438" xlink:href="#MJX-1-TEX-I-1D438"/></g><g data-mml-node="mi" transform="translate(764,0)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="mi" transform="translate(1364,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(1830,0)"><use data-c="1D45F" xlink:href="#MJX-1-TEX-I-1D45F"/></g><g data-mml-node="mi" transform="translate(2281,0)"><use data-c="1D454" xlink:href="#MJX-1-TEX-I-1D454"/></g><g data-mml-node="msub" transform="translate(2758,0)"><g data-mml-node="mi"><use data-c="1D466" xlink:href="#MJX-1-TEX-I-1D466"/></g><g data-mml-node="TeXAtom" transform="translate(523,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D451" xlink:href="#MJX-1-TEX-I-1D451"/></g><g data-mml-node="mi" transform="translate(520,0)"><use data-c="1D466" xlink:href="#MJX-1-TEX-I-1D466"/></g><g data-mml-node="mi" transform="translate(1010,0)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="mi" transform="translate(1610,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(2139,0)"><use data-c="1D45A" xlink:href="#MJX-1-TEX-I-1D45A"/></g><g data-mml-node="mi" transform="translate(3017,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(3362,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g></g></g><g data-mml-node="mo" transform="translate(6292.2,0)"><use data-c="221D" xlink:href="#MJX-1-TEX-N-221D"/></g><g data-mml-node="mn" transform="translate(7348,0)"><use data-c="31" xlink:href="#MJX-1-TEX-N-31"/></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(7848,0)"><g data-mml-node="mo"><use data-c="2F" xlink:href="#MJX-1-TEX-N-2F"/></g></g><g data-mml-node="mn" transform="translate(8348,0)"><use data-c="32" xlink:href="#MJX-1-TEX-N-32"/></g><g data-mml-node="mo" transform="translate(9070.2,0)"><use data-c="D7" xlink:href="#MJX-1-TEX-N-D7"/></g><g data-mml-node="mi" transform="translate(10070.5,0)"><use data-c="1D436" xlink:href="#MJX-1-TEX-I-1D436"/></g><g data-mml-node="mi" transform="translate(10830.5,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(11359.5,0)"><use data-c="1D45D" xlink:href="#MJX-1-TEX-I-1D45D"/></g><g data-mml-node="mi" transform="translate(11862.5,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(12391.5,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g><g data-mml-node="mi" transform="translate(12824.5,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(13169.5,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(13530.5,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(13875.5,0)"><use data-c="1D463" xlink:href="#MJX-1-TEX-I-1D463"/></g><g data-mml-node="mi" transform="translate(14360.5,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mtext" transform="translate(14826.5,0)"><use data-c="A0" xlink:href="#MJX-1-TEX-N-A0"/></g><g data-mml-node="mi" transform="translate(15076.5,0)"><use data-c="1D459" xlink:href="#MJX-1-TEX-I-1D459"/></g><g data-mml-node="mi" transform="translate(15374.5,0)"><use data-c="1D45C" xlink:href="#MJX-1-TEX-I-1D45C"/></g><g data-mml-node="mi" transform="translate(15859.5,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(16388.5,0)"><use data-c="1D451" xlink:href="#MJX-1-TEX-I-1D451"/></g><g data-mml-node="mo" transform="translate(17130.7,0)"><use data-c="D7" xlink:href="#MJX-1-TEX-N-D7"/></g><g data-mml-node="mi" transform="translate(18130.9,0)"><use data-c="1D449" xlink:href="#MJX-1-TEX-I-1D449"/></g><g data-mml-node="mi" transform="translate(18899.9,0)"><use data-c="1D45C" xlink:href="#MJX-1-TEX-I-1D45C"/></g><g data-mml-node="mi" transform="translate(19384.9,0)"><use data-c="1D459" xlink:href="#MJX-1-TEX-I-1D459"/></g><g data-mml-node="mi" transform="translate(19682.9,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(20043.9,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(20572.9,0)"><use data-c="1D454" xlink:href="#MJX-1-TEX-I-1D454"/></g><g data-mml-node="msup" transform="translate(21049.9,0)"><g data-mml-node="mi"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mn" transform="translate(499,363) scale(0.707)"><use data-c="32" xlink:href="#MJX-1-TEX-N-32"/></g></g></g></g></svg></mjx-container><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.667ex;" xmlns="http://www.w3.org/2000/svg" width="71.536ex" height="2.554ex" role="img" focusable="false" viewbox="0 -833.9 31618.9 1128.9" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-1-TEX-I-1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z"/><path id="MJX-1-TEX-I-1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"/><path id="MJX-1-TEX-I-1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"/><path id="MJX-1-TEX-I-1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/><path id="MJX-1-TEX-I-1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"/><path id="MJX-1-TEX-I-1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"/><path id="MJX-1-TEX-I-1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"/><path id="MJX-1-TEX-N-221D" d="M56 124T56 216T107 375T238 442Q260 442 280 438T319 425T352 407T382 385T406 361T427 336T442 315T455 297T462 285L469 297Q555 442 679 442Q687 442 722 437V398H718Q710 400 694 400Q657 400 623 383T567 343T527 294T503 253T495 235Q495 231 520 192T554 143Q625 44 696 44Q717 44 719 46H722V-5Q695 -11 678 -11Q552 -11 457 141Q455 145 454 146L447 134Q362 -11 235 -11Q157 -11 107 56ZM93 213Q93 143 126 87T220 31Q258 31 292 48T349 88T389 137T413 178T421 196Q421 200 396 239T362 288Q322 345 288 366T213 387Q163 387 128 337T93 213Z"/><path id="MJX-1-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"/><path id="MJX-1-TEX-N-2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"/><path id="MJX-1-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"/><path id="MJX-1-TEX-N-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"/><path id="MJX-1-TEX-I-1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"/><path id="MJX-1-TEX-I-1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"/><path id="MJX-1-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/><path id="MJX-1-TEX-I-1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/><path id="MJX-1-TEX-N-A0" d=""/><path id="MJX-1-TEX-I-1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"/><path id="MJX-1-TEX-I-1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/><path id="MJX-1-TEX-I-1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"/><path id="MJX-1-TEX-I-1D439" d="M48 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H742Q749 676 749 669Q749 664 736 557T722 447Q720 440 702 440H690Q683 445 683 453Q683 454 686 477T689 530Q689 560 682 579T663 610T626 626T575 633T503 634H480Q398 633 393 631Q388 629 386 623Q385 622 352 492L320 363H375Q378 363 398 363T426 364T448 367T472 374T489 386Q502 398 511 419T524 457T529 475Q532 480 548 480H560Q567 475 567 470Q567 467 536 339T502 207Q500 200 482 200H470Q463 206 463 212Q463 215 468 234T473 274Q473 303 453 310T364 317H309L277 190Q245 66 245 60Q245 46 334 46H359Q365 40 365 39T363 19Q359 6 353 0H336Q295 2 185 2Q120 2 86 2T48 1Z"/><path id="MJX-1-TEX-I-1D45E" d="M33 157Q33 258 109 349T280 441Q340 441 372 389Q373 390 377 395T388 406T404 418Q438 442 450 442Q454 442 457 439T460 434Q460 425 391 149Q320 -135 320 -139Q320 -147 365 -148H390Q396 -156 396 -157T393 -175Q389 -188 383 -194H370Q339 -192 262 -192Q234 -192 211 -192T174 -192T157 -193Q143 -193 143 -185Q143 -182 145 -170Q149 -154 152 -151T172 -148Q220 -148 230 -141Q238 -136 258 -53T279 32Q279 33 272 29Q224 -10 172 -10Q117 -10 75 30T33 157ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"/><path id="MJX-1-TEX-I-1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"/><path id="MJX-1-TEX-I-210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"/></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D443" xlink:href="#MJX-1-TEX-I-1D443"/></g><g data-mml-node="mi" transform="translate(751,0)"><use data-c="1D45C" xlink:href="#MJX-1-TEX-I-1D45C"/></g><g data-mml-node="mi" transform="translate(1236,0)"><use data-c="1D464" xlink:href="#MJX-1-TEX-I-1D464"/></g><g data-mml-node="mi" transform="translate(1952,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="msub" transform="translate(2418,0)"><g data-mml-node="mi"><use data-c="1D45F" xlink:href="#MJX-1-TEX-I-1D45F"/></g><g data-mml-node="TeXAtom" transform="translate(484,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D451" xlink:href="#MJX-1-TEX-I-1D451"/></g><g data-mml-node="mi" transform="translate(520,0)"><use data-c="1D466" xlink:href="#MJX-1-TEX-I-1D466"/></g><g data-mml-node="mi" transform="translate(1010,0)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="mi" transform="translate(1610,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(2139,0)"><use data-c="1D45A" xlink:href="#MJX-1-TEX-I-1D45A"/></g><g data-mml-node="mi" transform="translate(3017,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(3362,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g></g></g><g data-mml-node="mo" transform="translate(5913.2,0)"><use data-c="221D" xlink:href="#MJX-1-TEX-N-221D"/></g><g data-mml-node="mn" transform="translate(6969,0)"><use data-c="31" xlink:href="#MJX-1-TEX-N-31"/></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(7469,0)"><g data-mml-node="mo"><use data-c="2F" xlink:href="#MJX-1-TEX-N-2F"/></g></g><g data-mml-node="mn" transform="translate(7969,0)"><use data-c="32" xlink:href="#MJX-1-TEX-N-32"/></g><g data-mml-node="mo" transform="translate(8691.2,0)"><use data-c="D7" xlink:href="#MJX-1-TEX-N-D7"/></g><g data-mml-node="mi" transform="translate(9691.5,0)"><use data-c="1D436" xlink:href="#MJX-1-TEX-I-1D436"/></g><g data-mml-node="mi" transform="translate(10451.5,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(10980.5,0)"><use data-c="1D45D" xlink:href="#MJX-1-TEX-I-1D45D"/></g><g data-mml-node="mi" transform="translate(11483.5,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(12012.5,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g><g data-mml-node="mi" transform="translate(12445.5,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(12790.5,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(13151.5,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(13496.5,0)"><use data-c="1D463" xlink:href="#MJX-1-TEX-I-1D463"/></g><g data-mml-node="mi" transform="translate(13981.5,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mtext" transform="translate(14447.5,0)"><use data-c="A0" xlink:href="#MJX-1-TEX-N-A0"/></g><g data-mml-node="mi" transform="translate(14697.5,0)"><use data-c="1D459" xlink:href="#MJX-1-TEX-I-1D459"/></g><g data-mml-node="mi" transform="translate(14995.5,0)"><use data-c="1D45C" xlink:href="#MJX-1-TEX-I-1D45C"/></g><g data-mml-node="mi" transform="translate(15480.5,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(16009.5,0)"><use data-c="1D451" xlink:href="#MJX-1-TEX-I-1D451"/></g><g data-mml-node="mo" transform="translate(16751.7,0)"><use data-c="D7" xlink:href="#MJX-1-TEX-N-D7"/></g><g data-mml-node="mi" transform="translate(17751.9,0)"><use data-c="1D449" xlink:href="#MJX-1-TEX-I-1D449"/></g><g data-mml-node="mi" transform="translate(18520.9,0)"><use data-c="1D45C" xlink:href="#MJX-1-TEX-I-1D45C"/></g><g data-mml-node="mi" transform="translate(19005.9,0)"><use data-c="1D459" xlink:href="#MJX-1-TEX-I-1D459"/></g><g data-mml-node="mi" transform="translate(19303.9,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(19664.9,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(20193.9,0)"><use data-c="1D454" xlink:href="#MJX-1-TEX-I-1D454"/></g><g data-mml-node="msup" transform="translate(20670.9,0)"><g data-mml-node="mi"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mn" transform="translate(499,363) scale(0.707)"><use data-c="32" xlink:href="#MJX-1-TEX-N-32"/></g></g><g data-mml-node="mo" transform="translate(21795.7,0)"><use data-c="D7" xlink:href="#MJX-1-TEX-N-D7"/></g><g data-mml-node="mi" transform="translate(22795.9,0)"><use data-c="1D439" xlink:href="#MJX-1-TEX-I-1D439"/></g><g data-mml-node="mi" transform="translate(23544.9,0)"><use data-c="1D45F" xlink:href="#MJX-1-TEX-I-1D45F"/></g><g data-mml-node="mi" transform="translate(23995.9,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(24461.9,0)"><use data-c="1D45E" xlink:href="#MJX-1-TEX-I-1D45E"/></g><g data-mml-node="mi" transform="translate(24921.9,0)"><use data-c="1D462" xlink:href="#MJX-1-TEX-I-1D462"/></g><g data-mml-node="mi" transform="translate(25493.9,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(25959.9,0)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="mi" transform="translate(26559.9,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g><g data-mml-node="mi" transform="translate(26992.9,0)"><use data-c="1D466" xlink:href="#MJX-1-TEX-I-1D466"/></g><g data-mml-node="mtext" transform="translate(27482.9,0)"><use data-c="A0" xlink:href="#MJX-1-TEX-N-A0"/></g><g data-mml-node="mi" transform="translate(27732.9,0)"><use data-c="1D460" xlink:href="#MJX-1-TEX-I-1D460"/></g><g data-mml-node="mi" transform="translate(28201.9,0)"><use data-c="1D464" xlink:href="#MJX-1-TEX-I-1D464"/></g><g data-mml-node="mi" transform="translate(28917.9,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(29262.9,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(29623.9,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g><g data-mml-node="mi" transform="translate(30056.9,0)"><use data-c="210E" xlink:href="#MJX-1-TEX-I-210E"/></g><g data-mml-node="mi" transform="translate(30632.9,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(31098.9,0)"><use data-c="1D451" xlink:href="#MJX-1-TEX-I-1D451"/></g></g></g></svg></mjx-container><p>现代处理器提供多种方式来提升能效比：</p><ul><li>暗硅</li><li>DVFS</li><li>低功耗模式</li><li>超频</li></ul><p>随着漏电电流的增加，静态功耗也增加：</p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.464ex;" xmlns="http://www.w3.org/2000/svg" width="36.583ex" height="2.059ex" role="img" focusable="false" viewbox="0 -705 16169.7 910" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-1-TEX-I-1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z"/><path id="MJX-1-TEX-I-1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"/><path id="MJX-1-TEX-I-1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"/><path id="MJX-1-TEX-I-1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/><path id="MJX-1-TEX-I-1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"/><path id="MJX-1-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/><path id="MJX-1-TEX-I-1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"/><path id="MJX-1-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"/><path id="MJX-1-TEX-N-221D" d="M56 124T56 216T107 375T238 442Q260 442 280 438T319 425T352 407T382 385T406 361T427 336T442 315T455 297T462 285L469 297Q555 442 679 442Q687 442 722 437V398H718Q710 400 694 400Q657 400 623 383T567 343T527 294T503 253T495 235Q495 231 520 192T554 143Q625 44 696 44Q717 44 719 46H722V-5Q695 -11 678 -11Q552 -11 457 141Q455 145 454 146L447 134Q362 -11 235 -11Q157 -11 107 56ZM93 213Q93 143 126 87T220 31Q258 31 292 48T349 88T389 137T413 178T421 196Q421 200 396 239T362 288Q322 345 288 366T213 387Q163 387 128 337T93 213Z"/><path id="MJX-1-TEX-I-1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"/><path id="MJX-1-TEX-I-1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-N-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"/><path id="MJX-1-TEX-I-1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/><path id="MJX-1-TEX-I-1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"/><path id="MJX-1-TEX-I-1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"/></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D443" xlink:href="#MJX-1-TEX-I-1D443"/></g><g data-mml-node="mi" transform="translate(751,0)"><use data-c="1D45C" xlink:href="#MJX-1-TEX-I-1D45C"/></g><g data-mml-node="mi" transform="translate(1236,0)"><use data-c="1D464" xlink:href="#MJX-1-TEX-I-1D464"/></g><g data-mml-node="mi" transform="translate(1952,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="msub" transform="translate(2418,0)"><g data-mml-node="mi"><use data-c="1D45F" xlink:href="#MJX-1-TEX-I-1D45F"/></g><g data-mml-node="TeXAtom" transform="translate(484,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D460" xlink:href="#MJX-1-TEX-I-1D460"/></g><g data-mml-node="mi" transform="translate(469,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(830,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(1359,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(1720,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(2065,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g></g></g><g data-mml-node="mo" transform="translate(4996.1,0)"><use data-c="221D" xlink:href="#MJX-1-TEX-N-221D"/></g><g data-mml-node="mi" transform="translate(6051.9,0)"><use data-c="1D436" xlink:href="#MJX-1-TEX-I-1D436"/></g><g data-mml-node="mi" transform="translate(6811.9,0)"><use data-c="1D462" xlink:href="#MJX-1-TEX-I-1D462"/></g><g data-mml-node="mi" transform="translate(7383.9,0)"><use data-c="1D45F" xlink:href="#MJX-1-TEX-I-1D45F"/></g><g data-mml-node="mi" transform="translate(7834.9,0)"><use data-c="1D45F" xlink:href="#MJX-1-TEX-I-1D45F"/></g><g data-mml-node="mi" transform="translate(8285.9,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(8751.9,0)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="msub" transform="translate(9351.9,0)"><g data-mml-node="mi"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="TeXAtom" transform="translate(394,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D460" xlink:href="#MJX-1-TEX-I-1D460"/></g><g data-mml-node="mi" transform="translate(469,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(830,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(1359,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(1720,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(2065,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g></g></g><g data-mml-node="mo" transform="translate(11784.5,0)"><use data-c="D7" xlink:href="#MJX-1-TEX-N-D7"/></g><g data-mml-node="mi" transform="translate(12784.7,0)"><use data-c="1D449" xlink:href="#MJX-1-TEX-I-1D449"/></g><g data-mml-node="mi" transform="translate(13553.7,0)"><use data-c="1D45C" xlink:href="#MJX-1-TEX-I-1D45C"/></g><g data-mml-node="mi" transform="translate(14038.7,0)"><use data-c="1D459" xlink:href="#MJX-1-TEX-I-1D459"/></g><g data-mml-node="mi" transform="translate(14336.7,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(14697.7,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(15226.7,0)"><use data-c="1D454" xlink:href="#MJX-1-TEX-I-1D454"/></g><g data-mml-node="mi" transform="translate(15703.7,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g></g></g></svg></mjx-container><h4 id="The-Shift-in-Computer-Architecture-Because-of-Limits-of-Energy">The Shift in Computer Architecture Because of Limits of Energy</h4><p>能效比的追求使得DSA成为未来的希望。</p><h3 id="1-6-Trends-in-Cost">1.6 Trends in Cost</h3><h4 id="The-Impact-of-Time-Volume-and-Commoditization">The Impact of Time, Volume, and Commoditization</h4><p>电子元件的价格会随着时间下降，因为随着学习曲线，制造的良率会提升。生产量的提升也会造成价格的降低，因为更快的学习曲线，更多的谈判空间和更少的均摊成本。商品化意味着激烈的竞争，使得价格进一步降低。</p><h4 id="Cost-of-an-Integrated-Circuit">Cost of an Integrated Circuit</h4><p>集成电路的成本包括晶片成本，测试成本和封装成本。晶片成本与晶圆成本，晶片面积，良率有关。晶片面积的缩小可以有效提高良率，冗余的方法也可以提升良率。对于设计人员来说，只需要关注芯片面积，成本随芯片面积的增加呈平方增加。另外，对于低产量的芯片，掩膜成本也是不可忽视的一部分。</p><h4 id="Cost-Versus-Price">Cost Versus Price</h4><p>商品化导致利润空间缩小。</p><h4 id="Cost-of-Manufacturing-Versus-Cost-of-Operation">Cost of Manufacturing Versus Cost of Operation</h4><p>WSC中的运营成本很高。</p><h3 id="1-7-Dependability">1.7 Dependability</h3><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.912ex;" xmlns="http://www.w3.org/2000/svg" width="35.051ex" height="2.896ex" role="img" focusable="false" viewbox="0 -877 15492.6 1279.9" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-1-TEX-I-1D440" d="M289 629Q289 635 232 637Q208 637 201 638T194 648Q194 649 196 659Q197 662 198 666T199 671T201 676T203 679T207 681T212 683T220 683T232 684Q238 684 262 684T307 683Q386 683 398 683T414 678Q415 674 451 396L487 117L510 154Q534 190 574 254T662 394Q837 673 839 675Q840 676 842 678T846 681L852 683H948Q965 683 988 683T1017 684Q1051 684 1051 673Q1051 668 1048 656T1045 643Q1041 637 1008 637Q968 636 957 634T939 623Q936 618 867 340T797 59Q797 55 798 54T805 50T822 48T855 46H886Q892 37 892 35Q892 19 885 5Q880 0 869 0Q864 0 828 1T736 2Q675 2 644 2T609 1Q592 1 592 11Q592 13 594 25Q598 41 602 43T625 46Q652 46 685 49Q699 52 704 61Q706 65 742 207T813 490T848 631L654 322Q458 10 453 5Q451 4 449 3Q444 0 433 0Q418 0 415 7Q413 11 374 317L335 624L267 354Q200 88 200 79Q206 46 272 46H282Q288 41 289 37T286 19Q282 3 278 1Q274 0 267 0Q265 0 255 0T221 1T157 2Q127 2 95 1T58 0Q43 0 39 2T35 11Q35 13 38 25T43 40Q45 46 65 46Q135 46 154 86Q158 92 223 354T289 629Z"/><path id="MJX-1-TEX-I-1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"/><path id="MJX-1-TEX-I-1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"/><path id="MJX-1-TEX-I-1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"/><path id="MJX-1-TEX-I-1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/><path id="MJX-1-TEX-N-A0" d=""/><path id="MJX-1-TEX-I-1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"/><path id="MJX-1-TEX-I-1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/><path id="MJX-1-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"/><path id="MJX-1-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/><path id="MJX-1-TEX-I-1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/><path id="MJX-1-TEX-I-1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/><path id="MJX-1-TEX-I-1D439" d="M48 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H742Q749 676 749 669Q749 664 736 557T722 447Q720 440 702 440H690Q683 445 683 453Q683 454 686 477T689 530Q689 560 682 579T663 610T626 626T575 633T503 634H480Q398 633 393 631Q388 629 386 623Q385 622 352 492L320 363H375Q378 363 398 363T426 364T448 367T472 374T489 386Q502 398 511 419T524 457T529 475Q532 480 548 480H560Q567 475 567 470Q567 467 536 339T502 207Q500 200 482 200H470Q463 206 463 212Q463 215 468 234T473 274Q473 303 453 310T364 317H309L277 190Q245 66 245 60Q245 46 334 46H359Q365 40 365 39T363 19Q359 6 353 0H336Q295 2 185 2Q120 2 86 2T48 1Z"/><path id="MJX-1-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"/><path id="MJX-1-TEX-I-1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"/></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D440" xlink:href="#MJX-1-TEX-I-1D440"/></g><g data-mml-node="mi" transform="translate(1051,0)"><use data-c="1D45C" xlink:href="#MJX-1-TEX-I-1D45C"/></g><g data-mml-node="mi" transform="translate(1536,0)"><use data-c="1D451" xlink:href="#MJX-1-TEX-I-1D451"/></g><g data-mml-node="mi" transform="translate(2056,0)"><use data-c="1D462" xlink:href="#MJX-1-TEX-I-1D462"/></g><g data-mml-node="mi" transform="translate(2628,0)"><use data-c="1D459" xlink:href="#MJX-1-TEX-I-1D459"/></g><g data-mml-node="mi" transform="translate(2926,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mtext" transform="translate(3392,0)"><use data-c="A0" xlink:href="#MJX-1-TEX-N-A0"/></g><g data-mml-node="mi" transform="translate(3642,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(4171,0)"><use data-c="1D463" xlink:href="#MJX-1-TEX-I-1D463"/></g><g data-mml-node="mi" transform="translate(4656,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(5185,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(5530,0)"><use data-c="1D459" xlink:href="#MJX-1-TEX-I-1D459"/></g><g data-mml-node="mi" transform="translate(5828,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(6357,0)"><use data-c="1D44F" xlink:href="#MJX-1-TEX-I-1D44F"/></g><g data-mml-node="mi" transform="translate(6786,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(7131,0)"><use data-c="1D459" xlink:href="#MJX-1-TEX-I-1D459"/></g><g data-mml-node="mi" transform="translate(7429,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(7774,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(8135,0)"><use data-c="1D466" xlink:href="#MJX-1-TEX-I-1D466"/></g><g data-mml-node="mo" transform="translate(8902.8,0)"><use data-c="3D" xlink:href="#MJX-1-TEX-N-3D"/></g><g data-mml-node="mfrac" transform="translate(9958.6,0)"><g data-mml-node="mrow" transform="translate(1632.8,394) scale(0.707)"><g data-mml-node="mi"><use data-c="1D440" xlink:href="#MJX-1-TEX-I-1D440"/></g><g data-mml-node="mi" transform="translate(1051,0)"><use data-c="1D447" xlink:href="#MJX-1-TEX-I-1D447"/></g><g data-mml-node="mi" transform="translate(1755,0)"><use data-c="1D447" xlink:href="#MJX-1-TEX-I-1D447"/></g><g data-mml-node="mi" transform="translate(2459,0)"><use data-c="1D439" xlink:href="#MJX-1-TEX-I-1D439"/></g></g><g data-mml-node="mrow" transform="translate(220,-345) scale(0.707)"><g data-mml-node="mi"><use data-c="1D440" xlink:href="#MJX-1-TEX-I-1D440"/></g><g data-mml-node="mi" transform="translate(1051,0)"><use data-c="1D447" xlink:href="#MJX-1-TEX-I-1D447"/></g><g data-mml-node="mi" transform="translate(1755,0)"><use data-c="1D447" xlink:href="#MJX-1-TEX-I-1D447"/></g><g data-mml-node="mi" transform="translate(2459,0)"><use data-c="1D439" xlink:href="#MJX-1-TEX-I-1D439"/></g><g data-mml-node="mo" transform="translate(3208,0)"><use data-c="2B" xlink:href="#MJX-1-TEX-N-2B"/></g><g data-mml-node="mi" transform="translate(3986,0)"><use data-c="1D440" xlink:href="#MJX-1-TEX-I-1D440"/></g><g data-mml-node="mi" transform="translate(5037,0)"><use data-c="1D447" xlink:href="#MJX-1-TEX-I-1D447"/></g><g data-mml-node="mi" transform="translate(5741,0)"><use data-c="1D447" xlink:href="#MJX-1-TEX-I-1D447"/></g><g data-mml-node="mi" transform="translate(6445,0)"><use data-c="1D445" xlink:href="#MJX-1-TEX-I-1D445"/></g></g><rect width="5294" height="60" x="120" y="220"/></g></g></g></svg></mjx-container><p>冗余可以有效提升系统的可靠性。</p><h3 id="1-8-Measuring-Reporting-and-Summarizing-Performance">1.8 Measuring, Reporting, and Summarizing Performance</h3><p>不同人对性能的定义是不同的，我们坚持性能是运行真实程序的时间。时间可能是真实流逝的时间，也可能是CPU时间。</p><h4 id="Benchmarks">Benchmarks</h4><p>运行简化的程序来测试计算机的性能是不准确的。编译选项、是否允许修改源码也会影响运行基准测试程序的性能。基准测试程序套件包含许多不同的测试程序，避免将鸡蛋放在一个篮子里。SPEC推出了很多成功的基准测试程序套件。</p><p>个人电脑的测试程序分为处理器密集型和图像密集型。SPEC89是测试处理器性能的程序，已进行了6次迭代。最新的SPEC2017包含10个整数测试程序和17个浮点测试程序，但其可能不能量化21世纪的电脑性能，因为其甚至未使用动态链接。</p><p>服务器有不同的用途，也有不同的性能指标。最简单的方式是运行多个SPEC2017的拷贝来测试吞吐率，称为SPECrate。服务器通常还有大量的IO和文件操作，SPEC也提供测试文件系统、Java性能的测试程序。TPC是一套测试交易处理性能的测试程序。</p><h4 id="Reporting-Performance-Results">Reporting Performance Results</h4><p>实验要具备可重复性。</p><h4 id="Summarizing-Performance-Results">Summarizing Performance Results</h4><p>将待测电脑运行SPEC程序的时间除以参考电脑运行SPEC程序的时间，得到的比值称为SPECRatio。比较两台电脑的性能时，参考电脑的选择不会有任何影响。SPEC分数的计算使用几何平均。</p><h3 id="1-9-Quantitative-Principles-of-Computer-Design">1.9 Quantitative Principles of Computer Design</h3><h4 id="Take-Advantage-of-Parallelism">Take Advantage of Parallelism</h4><p>挖掘多个层级的并行性。</p><h4 id="Principle-of-Locality">Principle of Locality</h4><p>时间相关性和空间相关性。</p><h4 id="Focus-on-the-Common-Case">Focus on the Common Case</h4><p>优先考虑常见的情况。</p><h4 id="Amdahl’s-Law">Amdahl’s Law</h4><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -2.298ex;" xmlns="http://www.w3.org/2000/svg" width="43.073ex" height="4.255ex" role="img" focusable="false" viewbox="0 -864.9 19038.3 1880.7" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-1-TEX-I-1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"/><path id="MJX-1-TEX-I-1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"/><path id="MJX-1-TEX-I-1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/><path id="MJX-1-TEX-I-1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"/><path id="MJX-1-TEX-I-1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"/><path id="MJX-1-TEX-I-1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/><path id="MJX-1-TEX-I-1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"/><path id="MJX-1-TEX-I-1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"/><path id="MJX-1-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/><path id="MJX-1-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"/><path id="MJX-1-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/><path id="MJX-1-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"/><path id="MJX-1-TEX-I-1D439" d="M48 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H742Q749 676 749 669Q749 664 736 557T722 447Q720 440 702 440H690Q683 445 683 453Q683 454 686 477T689 530Q689 560 682 579T663 610T626 626T575 633T503 634H480Q398 633 393 631Q388 629 386 623Q385 622 352 492L320 363H375Q378 363 398 363T426 364T448 367T472 374T489 386Q502 398 511 419T524 457T529 475Q532 480 548 480H560Q567 475 567 470Q567 467 536 339T502 207Q500 200 482 200H470Q463 206 463 212Q463 215 468 234T473 274Q473 303 453 310T364 317H309L277 190Q245 66 245 60Q245 46 334 46H359Q365 40 365 39T363 19Q359 6 353 0H336Q295 2 185 2Q120 2 86 2T48 1Z"/><path id="MJX-1-TEX-I-1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"/><path id="MJX-1-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/><path id="MJX-1-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"/><path id="MJX-1-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"/><path id="MJX-1-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D446" xlink:href="#MJX-1-TEX-I-1D446"/></g><g data-mml-node="mi" transform="translate(645,0)"><use data-c="1D45D" xlink:href="#MJX-1-TEX-I-1D45D"/></g><g data-mml-node="mi" transform="translate(1148,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(1614,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(2080,0)"><use data-c="1D451" xlink:href="#MJX-1-TEX-I-1D451"/></g><g data-mml-node="mi" transform="translate(2600,0)"><use data-c="1D462" xlink:href="#MJX-1-TEX-I-1D462"/></g><g data-mml-node="msub" transform="translate(3172,0)"><g data-mml-node="mi"><use data-c="1D45D" xlink:href="#MJX-1-TEX-I-1D45D"/></g><g data-mml-node="TeXAtom" transform="translate(536,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D45C" xlink:href="#MJX-1-TEX-I-1D45C"/></g><g data-mml-node="mi" transform="translate(485,0)"><use data-c="1D463" xlink:href="#MJX-1-TEX-I-1D463"/></g><g data-mml-node="mi" transform="translate(970,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(1436,0)"><use data-c="1D45F" xlink:href="#MJX-1-TEX-I-1D45F"/></g><g data-mml-node="mi" transform="translate(1887,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(2416,0)"><use data-c="1D459" xlink:href="#MJX-1-TEX-I-1D459"/></g><g data-mml-node="mi" transform="translate(2714,0)"><use data-c="1D459" xlink:href="#MJX-1-TEX-I-1D459"/></g></g></g><g data-mml-node="mo" transform="translate(6165.6,0)"><use data-c="3D" xlink:href="#MJX-1-TEX-N-3D"/></g><g data-mml-node="mfrac" transform="translate(7221.4,0)"><g data-mml-node="mn" transform="translate(5731.7,394) scale(0.707)"><use data-c="31" xlink:href="#MJX-1-TEX-N-31"/></g><g data-mml-node="mrow" transform="translate(220,-596.1) scale(0.707)"><g data-mml-node="mo"><use data-c="28" xlink:href="#MJX-1-TEX-N-28"/></g><g data-mml-node="mn" transform="translate(389,0)"><use data-c="31" xlink:href="#MJX-1-TEX-N-31"/></g><g data-mml-node="mo" transform="translate(889,0)"><use data-c="2212" xlink:href="#MJX-1-TEX-N-2212"/></g><g data-mml-node="mi" transform="translate(1667,0)"><use data-c="1D439" xlink:href="#MJX-1-TEX-I-1D439"/></g><g data-mml-node="mi" transform="translate(2416,0)"><use data-c="1D45F" xlink:href="#MJX-1-TEX-I-1D45F"/></g><g data-mml-node="mi" transform="translate(2867,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(3396,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g><g data-mml-node="mi" transform="translate(3829,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(4190,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(4535,0)"><use data-c="1D45C" xlink:href="#MJX-1-TEX-I-1D45C"/></g><g data-mml-node="msub" transform="translate(5020,0)"><g data-mml-node="mi"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="TeXAtom" transform="translate(633,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(466,0)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="mi" transform="translate(1066,0)"><use data-c="210E" xlink:href="#MJX-1-TEX-I-210E"/></g><g data-mml-node="mi" transform="translate(1642,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(2171,0)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="mi" transform="translate(2771,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g><g data-mml-node="mi" transform="translate(3204,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(3670,0)"><use data-c="1D451" xlink:href="#MJX-1-TEX-I-1D451"/></g></g></g><g data-mml-node="mo" transform="translate(8665.8,0)"><use data-c="2B" xlink:href="#MJX-1-TEX-N-2B"/></g><g data-mml-node="mfrac" transform="translate(9443.8,0)"><g data-mml-node="mrow" transform="translate(220,588.5) scale(0.707)"><g data-mml-node="mi"><use data-c="1D439" xlink:href="#MJX-1-TEX-I-1D439"/></g><g data-mml-node="mi" transform="translate(749,0)"><use data-c="1D45F" xlink:href="#MJX-1-TEX-I-1D45F"/></g><g data-mml-node="mi" transform="translate(1200,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(1729,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g><g data-mml-node="mi" transform="translate(2162,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(2523,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(2868,0)"><use data-c="1D45C" xlink:href="#MJX-1-TEX-I-1D45C"/></g><g data-mml-node="msub" transform="translate(3353,0)"><g data-mml-node="mi"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(633,-340.4)"><g data-mml-node="mi"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(466,0)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="mi" transform="translate(1066,0)"><use data-c="210E" xlink:href="#MJX-1-TEX-I-210E"/></g><g data-mml-node="mi" transform="translate(1642,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(2171,0)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="mi" transform="translate(2771,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g><g data-mml-node="mi" transform="translate(3204,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(3670,0)"><use data-c="1D451" xlink:href="#MJX-1-TEX-I-1D451"/></g></g></g></g><g data-mml-node="mrow" transform="translate(318.3,-345) scale(0.707)"><g data-mml-node="mi"><use data-c="1D446" xlink:href="#MJX-1-TEX-I-1D446"/></g><g data-mml-node="mi" transform="translate(645,0)"><use data-c="1D45D" xlink:href="#MJX-1-TEX-I-1D45D"/></g><g data-mml-node="mi" transform="translate(1148,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(1614,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(2080,0)"><use data-c="1D451" xlink:href="#MJX-1-TEX-I-1D451"/></g><g data-mml-node="mi" transform="translate(2600,0)"><use data-c="1D462" xlink:href="#MJX-1-TEX-I-1D462"/></g><g data-mml-node="msub" transform="translate(3172,0)"><g data-mml-node="mi"><use data-c="1D45D" xlink:href="#MJX-1-TEX-I-1D45D"/></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(536,-340.4)"><g data-mml-node="mi"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(466,0)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="mi" transform="translate(1066,0)"><use data-c="210E" xlink:href="#MJX-1-TEX-I-210E"/></g><g data-mml-node="mi" transform="translate(1642,0)"><use data-c="1D44E" xlink:href="#MJX-1-TEX-I-1D44E"/></g><g data-mml-node="mi" transform="translate(2171,0)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="mi" transform="translate(2771,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g><g data-mml-node="mi" transform="translate(3204,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(3670,0)"><use data-c="1D451" xlink:href="#MJX-1-TEX-I-1D451"/></g></g></g></g><rect width="6016.7" height="60" x="120" y="220"/></g><g data-mml-node="mo" transform="translate(15700.4,0)"><use data-c="29" xlink:href="#MJX-1-TEX-N-29"/></g></g><rect width="11577" height="60" x="120" y="220"/></g></g></g></svg></mjx-container><h4 id="The-Processor-Performance-Equation">The Processor Performance Equation</h4><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.464ex;" xmlns="http://www.w3.org/2000/svg" width="76.033ex" height="2.059ex" role="img" focusable="false" viewbox="0 -705 33606.4 910" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-1-TEX-I-1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"/><path id="MJX-1-TEX-I-1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z"/><path id="MJX-1-TEX-I-1D448" d="M107 637Q73 637 71 641Q70 643 70 649Q70 673 81 682Q83 683 98 683Q139 681 234 681Q268 681 297 681T342 682T362 682Q378 682 378 672Q378 670 376 658Q371 641 366 638H364Q362 638 359 638T352 638T343 637T334 637Q295 636 284 634T266 623Q265 621 238 518T184 302T154 169Q152 155 152 140Q152 86 183 55T269 24Q336 24 403 69T501 205L552 406Q599 598 599 606Q599 633 535 637Q511 637 511 648Q511 650 513 660Q517 676 519 679T529 683Q532 683 561 682T645 680Q696 680 723 681T752 682Q767 682 767 672Q767 650 759 642Q756 637 737 637Q666 633 648 597Q646 592 598 404Q557 235 548 205Q515 105 433 42T263 -22Q171 -22 116 34T60 167V183Q60 201 115 421Q164 622 164 628Q164 635 107 637Z"/><path id="MJX-1-TEX-N-A0" d=""/><path id="MJX-1-TEX-I-1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/><path id="MJX-1-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/><path id="MJX-1-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/><path id="MJX-1-TEX-I-1D43C" d="M43 1Q26 1 26 10Q26 12 29 24Q34 43 39 45Q42 46 54 46H60Q120 46 136 53Q137 53 138 54Q143 56 149 77T198 273Q210 318 216 344Q286 624 286 626Q284 630 284 631Q274 637 213 637H193Q184 643 189 662Q193 677 195 680T209 683H213Q285 681 359 681Q481 681 487 683H497Q504 676 504 672T501 655T494 639Q491 637 471 637Q440 637 407 634Q393 631 388 623Q381 609 337 432Q326 385 315 341Q245 65 245 59Q245 52 255 50T307 46H339Q345 38 345 37T342 19Q338 6 332 0H316Q279 2 179 2Q143 2 113 2T65 2T43 1Z"/><path id="MJX-1-TEX-I-1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"/><path id="MJX-1-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/><path id="MJX-1-TEX-I-1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"/><path id="MJX-1-TEX-I-1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"/><path id="MJX-1-TEX-N-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"/><path id="MJX-1-TEX-I-1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/><path id="MJX-1-TEX-I-1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"/><path id="MJX-1-TEX-I-1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"/><path id="MJX-1-TEX-I-1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"/></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D436" xlink:href="#MJX-1-TEX-I-1D436"/></g><g data-mml-node="mi" transform="translate(760,0)"><use data-c="1D443" xlink:href="#MJX-1-TEX-I-1D443"/></g><g data-mml-node="mi" transform="translate(1511,0)"><use data-c="1D448" xlink:href="#MJX-1-TEX-I-1D448"/></g><g data-mml-node="mtext" transform="translate(2278,0)"><use data-c="A0" xlink:href="#MJX-1-TEX-N-A0"/></g><g data-mml-node="mi" transform="translate(2528,0)"><use data-c="1D447" xlink:href="#MJX-1-TEX-I-1D447"/></g><g data-mml-node="mi" transform="translate(3232,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(3577,0)"><use data-c="1D45A" xlink:href="#MJX-1-TEX-I-1D45A"/></g><g data-mml-node="mi" transform="translate(4455,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mo" transform="translate(5198.8,0)"><use data-c="3D" xlink:href="#MJX-1-TEX-N-3D"/></g><g data-mml-node="mi" transform="translate(6254.6,0)"><use data-c="1D43C" xlink:href="#MJX-1-TEX-I-1D43C"/></g><g data-mml-node="mi" transform="translate(6758.6,0)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="mi" transform="translate(7358.6,0)"><use data-c="1D460" xlink:href="#MJX-1-TEX-I-1D460"/></g><g data-mml-node="mi" transform="translate(7827.6,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(8188.6,0)"><use data-c="1D45F" xlink:href="#MJX-1-TEX-I-1D45F"/></g><g data-mml-node="mi" transform="translate(8639.6,0)"><use data-c="1D462" xlink:href="#MJX-1-TEX-I-1D462"/></g><g data-mml-node="mi" transform="translate(9211.6,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g><g data-mml-node="mi" transform="translate(9644.6,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(10005.6,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(10350.6,0)"><use data-c="1D45C" xlink:href="#MJX-1-TEX-I-1D45C"/></g><g data-mml-node="mi" transform="translate(10835.6,0)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="mtext" transform="translate(11435.6,0)"><use data-c="A0" xlink:href="#MJX-1-TEX-N-A0"/></g><g data-mml-node="mi" transform="translate(11685.6,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g><g data-mml-node="mi" transform="translate(12118.6,0)"><use data-c="1D45C" xlink:href="#MJX-1-TEX-I-1D45C"/></g><g data-mml-node="mi" transform="translate(12603.6,0)"><use data-c="1D462" xlink:href="#MJX-1-TEX-I-1D462"/></g><g data-mml-node="mi" transform="translate(13175.6,0)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="mi" transform="translate(13775.6,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mo" transform="translate(14358.8,0)"><use data-c="D7" xlink:href="#MJX-1-TEX-N-D7"/></g><g data-mml-node="mi" transform="translate(15359,0)"><use data-c="1D436" xlink:href="#MJX-1-TEX-I-1D436"/></g><g data-mml-node="mi" transform="translate(16119,0)"><use data-c="1D466" xlink:href="#MJX-1-TEX-I-1D466"/></g><g data-mml-node="mi" transform="translate(16609,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g><g data-mml-node="mi" transform="translate(17042,0)"><use data-c="1D459" xlink:href="#MJX-1-TEX-I-1D459"/></g><g data-mml-node="mi" transform="translate(17340,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(17806,0)"><use data-c="1D460" xlink:href="#MJX-1-TEX-I-1D460"/></g><g data-mml-node="mtext" transform="translate(18275,0)"><use data-c="A0" xlink:href="#MJX-1-TEX-N-A0"/></g><g data-mml-node="mi" transform="translate(18525,0)"><use data-c="1D45D" xlink:href="#MJX-1-TEX-I-1D45D"/></g><g data-mml-node="mi" transform="translate(19028,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mi" transform="translate(19494,0)"><use data-c="1D45F" xlink:href="#MJX-1-TEX-I-1D45F"/></g><g data-mml-node="mtext" transform="translate(19945,0)"><use data-c="A0" xlink:href="#MJX-1-TEX-N-A0"/></g><g data-mml-node="mi" transform="translate(20195,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(20540,0)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="mi" transform="translate(21140,0)"><use data-c="1D460" xlink:href="#MJX-1-TEX-I-1D460"/></g><g data-mml-node="mi" transform="translate(21609,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(21970,0)"><use data-c="1D45F" xlink:href="#MJX-1-TEX-I-1D45F"/></g><g data-mml-node="mi" transform="translate(22421,0)"><use data-c="1D462" xlink:href="#MJX-1-TEX-I-1D462"/></g><g data-mml-node="mi" transform="translate(22993,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g><g data-mml-node="mi" transform="translate(23426,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(23787,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(24132,0)"><use data-c="1D45C" xlink:href="#MJX-1-TEX-I-1D45C"/></g><g data-mml-node="mi" transform="translate(24617,0)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"/></g><g data-mml-node="mo" transform="translate(25439.2,0)"><use data-c="D7" xlink:href="#MJX-1-TEX-N-D7"/></g><g data-mml-node="mi" transform="translate(26439.4,0)"><use data-c="1D436" xlink:href="#MJX-1-TEX-I-1D436"/></g><g data-mml-node="mi" transform="translate(27199.4,0)"><use data-c="1D459" xlink:href="#MJX-1-TEX-I-1D459"/></g><g data-mml-node="mi" transform="translate(27497.4,0)"><use data-c="1D45C" xlink:href="#MJX-1-TEX-I-1D45C"/></g><g data-mml-node="mi" transform="translate(27982.4,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g><g data-mml-node="mi" transform="translate(28415.4,0)"><use data-c="1D458" xlink:href="#MJX-1-TEX-I-1D458"/></g><g data-mml-node="mtext" transform="translate(28936.4,0)"><use data-c="A0" xlink:href="#MJX-1-TEX-N-A0"/></g><g data-mml-node="mi" transform="translate(29186.4,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g><g data-mml-node="mi" transform="translate(29619.4,0)"><use data-c="1D466" xlink:href="#MJX-1-TEX-I-1D466"/></g><g data-mml-node="mi" transform="translate(30109.4,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"/></g><g data-mml-node="mi" transform="translate(30542.4,0)"><use data-c="1D459" xlink:href="#MJX-1-TEX-I-1D459"/></g><g data-mml-node="mi" transform="translate(30840.4,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g><g data-mml-node="mtext" transform="translate(31306.4,0)"><use data-c="A0" xlink:href="#MJX-1-TEX-N-A0"/></g><g data-mml-node="mi" transform="translate(31556.4,0)"><use data-c="1D461" xlink:href="#MJX-1-TEX-I-1D461"/></g><g data-mml-node="mi" transform="translate(31917.4,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"/></g><g data-mml-node="mi" transform="translate(32262.4,0)"><use data-c="1D45A" xlink:href="#MJX-1-TEX-I-1D45A"/></g><g data-mml-node="mi" transform="translate(33140.4,0)"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"/></g></g></g></svg></mjx-container><p>其中，时钟周期和硬件工艺、组成结构有关，CPI和组成结构、ISA有关，指令数和ISA、编译器有关。</p><h3 id="1-10-Putting-It-All-Together-Performance-Price-and-Power">1.10 Putting It All Together: Performance, Price, and Power</h3><p>比较了三个戴尔服务器的各项指标。</p><h2 id="Chapter2-Memory-Hierarchy-Design">Chapter2: Memory Hierarchy Design</h2><h3 id="2-1-Introduction">2.1 Introduction</h3><p>如今的存储器层次结构一般包含“寄存器-L1$-L2$-L3$-内存-硬盘/闪存”几部分，大部分情况下下层的存储器的内容是上层的存储器的内容的超集。尽管近年来单核性能的停滞不前使得处理器和内存之间的“剪刀差”不再扩大，但是多核的趋势其实对内存造成了更大的压力。如今的处理器通过流水化的Cache，更多的Cache层次等方式来解决内存访问的瓶颈，预计使用嵌入式DRAM实现的L4$将会是未来的一个趋势。传统意义上，设计者只需关注Cache的性能，即“内存平均访问时间”，也就是Cache的命中延迟、命中率和缺失惩罚，但如今更大的Cache造成了可观的功耗，在可移动设备的CPU中甚至达到25%-50%，功耗也成为设计者的重要考虑因素之一。</p><h4 id="Basics-of-Memory-Hierarchies-A-Quick-Review">Basics of Memory Hierarchies: A Quick Review</h4><p>一个Cache行由若干个字组成，其包含一个<code>tag</code>域。最受欢迎的Cache组织结构是组相联结构，直接映射和全相联结构是其特殊情况。Cache的写策略有写回和写穿透，两者都可以用写缓存来加速。</p><p>缺失率是Cache性能的重量衡量指标，根据3C模型将Cache缺失分为三类：强制缺失、容量缺失和冲突缺失。随着超线程和多核技术的广泛应用，我们也可以增加第四个C：一致性缺失。</p><p>用缺失率来衡量Cache性能具有误导性，设计者也会使用“每千条指令缺失数”和“内存平均访问时间”作为衡量指标。但由于动态调度和超线程，这些指标也不能和真正的程序运行时间相关联。</p><p>以下六种简单的方法可以优化Cache，但这六种方法都有一定的副作用。</p><ol><li>更大的Cache行以减小缺失率</li><li>更大的Cache以减小缺失率</li><li>更大的组相联度以减小缺失率</li><li>更多的Cache层次以减小缺失惩罚</li><li>读缺失的优先度高于写缺失以减小缺失惩罚</li><li>避免虚实地址翻译后再索引Cache以减小命中延迟</li></ol><h3 id="2-2-Memory-Technology-and-Optimizations">2.2 Memory Technology and Optimizations</h3><p>随着突发传输的广泛应用，内存延迟用两个维度来描述：访问时间和周期时间。访问时间指发送读请求到读数据返回的时间；周期时间指两个不相关的读请求之间的最小间隔。所有的计算机都用DRAM组成内存，用SRAM组成Cache。</p><h4 id="SRAM-Technology">SRAM Technology</h4><p>SRAM的访问时间和周期时间基本相同，它一般使用6个晶体管来存储一个bit。Cache的访问时间和Cache行数量呈正相关，而功耗和Cache大小（静态功耗）和Cache行数量（动态功耗）相关。</p><h4 id="DRAM-Technology">DRAM Technology</h4><p>访问DRAM的地址被分为行地址和列地址，行地址在RAS期间被使用，列地址在CAS期间被使用。DRAM在读取数据时读取线必须经过预充电，读取的一行数据被放在行缓冲中，由于读取的过程损坏了行中的数据，所以如果行缓冲中的数据要被替换，需要先将旧的数据写回到对应的行中而不是直接丢弃。由于漏电，DRAM还需要定期刷新每一行，即将它读出然后重新写入，设计者一般将刷新所用的时间控制在5%以内。</p><h4 id="Improving-Memory-Performance-Inside-a-DRAM-Chip-SDRAMs">Improving Memory Performance Inside a DRAM Chip: SDRAMs</h4><p>最早的DRAM是异步的，在90年代中期设计者加入了时钟，发明了同步DRAM（SDRAM），还加入了突发传输模式。内存带宽需求的增长使得DRAM单次传输的比特数逐渐增长，从4bits一直到16bits，在00年代还引入了DDR技术，在时钟的上升沿和下降沿都传输数据。最后，SDRAM还引入了bank来控制功耗和减少访问时间。每个bank都有单独的行缓冲，可以并行访问不同bank。</p><p>电压和SDRAM的功耗紧密相关，从DDR1到DDR4，内存电压不断下降。近期的SDRAM还支持power-down模式，屏蔽了刷新以外的所有操作。</p><h4 id="Graphics-Data-RAMs">Graphics Data RAMs</h4><p>GDDR使用更宽的数据总线和更快的时钟频率来进一步提高带宽，以满足GPU的需求。</p><h4 id="Packaging-Innovation-Stacked-or-Embedded-DRAMs">Packaging Innovation: Stacked or Embedded DRAMs</h4><p>将DRAM和处理器一起封装可以进一步降低延迟，增加带宽，这种内存称为HBM。DRAM可以直接堆叠在处理器上方（3D），也可以和处理器通过衬底相连（2.5D）。</p><h4 id="Flash-Memory">Flash Memory</h4><p>闪存是一种EEPROM，其与DRAM最大的不同在于：</p><ol><li>读取闪存是顺序的，一次读取一整页内容，其读取速度在DRAM和硬盘之间。</li><li>闪存必须先被擦除才能重新写入，擦除以块为单位，其写入速度在DRAM和硬盘之间，但比读取速度优势小得多。</li><li>闪存是非易失性的，待机功耗很小。</li><li>闪存的块只能被写入有限次，所以需要平衡写入负载。</li><li>闪存的价格在SDRAM和硬盘之间。</li></ol><p>DRAM和闪存芯片都有冗余的块用于替换损坏的块。</p><h4 id="Phase-Change-Memory-Technology">Phase-Change Memory Technology</h4><p>PCM已经被研究了数十年，它使用一个加热装置让介质在晶体和非晶体之间切换，读取数据通过检测两种状态电阻的不同来实现。</p><h4 id="Enhancing-Dependability-in-Memory-Systems">Enhancing Dependability in Memory Systems</h4><p>更大的Cache和内存使得生产过程中和使用过程中的错误发生的更频繁。电路的变化造成的错误称为hard errors或permanent faults，其可通过重映射空闲的行来解决。存储数据的随机变化称为soft errors或transient faults，其可以通过ECC解决，近年来还引入了Chipkill技术来进一步增加可靠性，其思想与RAID类似。</p><h3 id="2-3-Ten-Advanced-Optimizations-of-Cache-Performance">2.3 Ten Advanced Optimizations of Cache Performance</h3><p>我们可以从以下五个维度来提升Cache性能：</p><ol><li>减少命中延迟</li><li>增加Cache带宽</li><li>减少缺失惩罚</li><li>增加命中率</li><li>通过并行来减少缺失惩罚或缺失率</li></ol><h4 id="First-Optimization-Small-and-Simple-First-Level-Caches-to-Reduce-Hit-Time-and-Power">First Optimization: Small and Simple First-Level Caches to Reduce Hit Time and Power</h4><p>高时钟频率和功耗限制的压力使得一级Cache的大小一般不大。目前的处理器的一级Cache容量基本不再增长，设计者转而追求更高的组相联度。Cache命中的关键路径分为三部分：使用地址索引Tag SRAM，Tag对比和数据选择。CACTI可以量化Cache的命中延迟，将其表示为一个Cache大小、组相联度，读写端口数等参数的函数。功耗是Cache设计的重要因素，除了组相联度外，更少的Cache行（更大的Cache行）可以减少功耗，但这也增加了缺失率。另一个方法是将Cache分为bank实现。</p><p>如今的Cache设计注重更高的组相联度有以下三个原因：如今的处理器会花费至少2个周期来访问Cache，使得命中延迟不会是关键路径；VIPT的Cache容量受到限制，增大组相联度是增加Cache容量的最有效的方式；超线程技术使得冲突缺失变得更加频繁。</p><h4 id="Second-Optimization-Way-Prediction-to-Reduce-Hit-Time">Second Optimization: Way Prediction to Reduce Hit Time</h4><p>路预测指在每个Cache行中使用额外的bit来预测下一个Cache访问会命中哪一路，直接输出预测的路的数据，预测失败会引入一周期的惩罚。模拟器结果表明对于2路组相联Cache，预测正确率在90%以上；对于4路组相联Cache，预测正确率在80%以上；ICache的预测正确率比DCache高。如果只访问预测正确的Cache行的数据，虽然会造成预测失败时更大的惩罚，但可以显著降低Cache的功耗，在低功耗领域可以得到应用。</p><h4 id="Third-Optimization-Pipelined-Access-and-Multibanked-Caches-to-Increase-Bandwidth">Third Optimization: Pipelined Access and Multibanked Caches to Increase Bandwidth</h4><p>流水化和Multibank一般应用在L1 Cache上，因为这可以增加超标量乱序流水线的指令吞吐率。Multibank也用于L2和L3 Cache以减小功耗。ICache的流水化增加了分支预测错误的惩罚，DCache的流水化增加了Load-to-Use，但高时钟频率使现代处理器都需要多级流水访问Cache。Multibank使得对于Cache的访问可以交叠，允许Cache在一拍内处理多个读写请求。</p><h4 id="Fourth-Optimization-Nonblocking-Caches-ot-Increase-Cache-Bandwidth">Fourth Optimization: Nonblocking Caches ot Increase Cache Bandwidth</h4><p>&quot;hit under miss&quot;和&quot;miss under miss&quot;的非阻塞Cache可以显著降低超标量处理器的缺失惩罚，但优化的幅度难以量化。一般来说，乱序处理器可以弥补L1数据Cache缺失、L2数据Cache命中造成的惩罚，但是不能弥补更低层次的Cache缺失造成的惩罚。</p><p>为了实现非阻塞Cache，我们需要考察两个问题：一是仲裁命中和缺失之间的冲突，二是记录正在进行的缺失。现代处理器使用MSHR来记录一个进行中的缺失，包括数据将被写回哪个Cache行，哪些指令正在等待该缺失返回的信息。在多核处理器中，非原子的缺失和一致性请求可能会引入死锁。</p><h4 id="Fifth-Optimization-Critical-Word-First-and-Early-Restart-to-Reduce-Miss-Penalty">Fifth Optimization: Critical Word First and Early Restart to Reduce Miss Penalty</h4><ul><li>关键字优先：先发出缺失的字的读请求，再处理Cache行中的其他字。</li><li>提前重启：按原来的方式发出读请求，但在缺失的字返回时马上返回给流水线。</li></ul><p>该技术取得的性能提升取决于Cache行的大小和程序的访存行为。由于空间相关性，可能马上会收到第二个对该Cache行的访问，使得关键字优先技术不能提高Cache性能。</p><h4 id="Sixth-Optimization-Merging-Write-Buffer-to-Reduce-Miss-Penalty">Sixth Optimization: Merging Write Buffer to Reduce Miss Penalty</h4><p>写缺失会先检查写缓存中已有的Cache行，如果地址相同则将写数据合并。但I/O地址不能使用该技术。</p><h4 id="Seventh-Optimization-Compiler-Optimizations-to-Reduce-Miss-Rate">Seventh Optimization: Compiler Optimizations to Reduce Miss Rate</h4><p>按行优先/列优先数组在内存中的顺序访问数组元素。如算法不允许如此（例如矩阵乘法），也可以用分块的方式减少Cache缺失。</p><h4 id="Eighth-Optimization-Hardware-Prefetching-of-Instructions-and-Data-to-Reduce-Miss-Penalty-or-Miss-Rate">Eighth Optimization: Hardware Prefetching of Instructions and Data to Reduce Miss Penalty or Miss Rate</h4><p>在Cache缺失时可以取出当前缺失的Cache行和下一个Cache行，将下一个Cache行放入一个Buffer中。一般指令Cache只需一行Buffer，数据Cache需要多行Buffer。Intel尝试过更为激进的预取策略，但性能提升十分有限。</p><h4 id="Ninth-Optimization-Compiler-Controlled-Prefetching-to-Reduce-Miss-Penalty-or-Miss-Rate">Ninth Optimization: Compiler-Controlled Prefetching to Reduce Miss Penalty or Miss Rate</h4><p>软件预取可分为预取至寄存器/预取至Cache，可产生例外/不可产生例外，主流的做法是提供不可产生例外的预取至Cache的指令。因为预取指令的额外开销，编译器必须判断哪些访存指令容易造成Cache缺失，也要考虑预取的数据何时能够到达，这是较为困难的。</p><h4 id="Tenth-Optimization-Using-HBM-to-Extend-the-Memory-Hierarchy">Tenth Optimization: Using HBM to Extend the Memory Hierarchy</h4><p>HBM的大小可达到128MiB至1GiB，必须要足够大的Cache行来减少存储Tag的开销，但这导致两个问题：一个Cache行内的数据可能不都是有用的，导致浪费；Cache缺失会变得更多。一个解决方案是子Cache行——用多位有效位来指示一个Cache行，允许其部分有效，但这没有解决第二个问题。</p><p>若是将Tag也存在HBM中则不用担心Tag的开销问题。我们可以将每一路的Tag和数据存在SDRAM的同一行内，首先打开行，读取Tag判断命中哪一路，然后发送对应的列选择信号，这可以避免一次Cache命中读取多个SDRAM的行。也可以直接做成直接映射的Cache，一次读取一整行，包括Tag和数据，实验表明这种实现的性能最好。另一个问题是Cache缺失的惩罚过大，我们可以使用缺失预测器来解决这一问题。</p><h4 id="Cache-Optimization-Summry">Cache Optimization Summry</h4><p>从命中延迟、带宽、缺失惩罚、缺失率、功耗和复杂度几个方面总结了上述技术。</p><h3 id="2-4-Virtual-Memory-and-Virtual-Machines">2.4 Virtual Memory and Virtual Machines</h3><p>本节将侧重于保护和隐私方面的内容。</p><h4 id="Protection-via-Virtual-Memory">Protection via Virtual Memory</h4><p>包括TLB的页式内存管理是隔离不同进程的基本机制。为了隔离用户和内核进程，体系结构必须：</p><ul><li>提供至少两种模式区分内核和用户</li><li>提供用户只读，内核可读写的接口</li><li>提供在用户态和内核态之间切换的机制</li><li>提供对内存访问的限制</li></ul><p>一般内存保护通过对每一页增加权限限制来实现，包括读权限、写权限和执行权限。为了避免一次内存访问需要两倍的时间：一次读取页表项和一次读取数据，我们可以利用相关性，使用TLB作为页表的缓存。TLB由操作系统进行管理，但操作系统不可避免的也有bug，所以我们需要虚拟机。</p><h4 id="Protection-via-Virtual-Machines">Protection via Virtual Machines</h4><p>虚拟机在近些年重新获得热度，主要因为：</p><ul><li>现代系统中隔离和安全变得更重要</li><li>标准的操作系统在安全和可靠性方面表现不佳</li><li>在数据中心和云上许多不同的用户共用一台计算机</li><li>处理器速度的大幅提高使得虚拟机的额外开销变得可以接受</li></ul><p>使用虚拟机系统，多个操作系统可以共享硬件资源。提供虚拟机系统的软件称为VMM，硬件平台称为主机，它被所有客户虚拟机共享。VMM的规模比传统的操作系统更小，通常只有万行代码。一般的，用户态指令在虚拟机上运行没有额外开销，IO指令和特权指令在虚拟机上运行的额外开销较高。</p><p>除了安全性，虚拟机在以下两个方面也有优势：</p><ol><li>管理软件：虚拟机提供了完整的软件栈的抽象</li><li>管理硬件：不同的软件栈共享一套硬件</li></ol><h4 id="Requirements-of-a-Virtual-Machine-Monitor">Requirements of a Virtual Machine Monitor</h4><p>基本的两个要求是：</p><ol><li>客户软件在虚拟机上运行时和在原生硬件上运行时应该表现一致</li><li>客户软件不能直接改变真实的系统资源</li></ol><h4 id="Instruction-Set-Architecture-Support-for-Virtual-Machines">Instruction Set Architecture Support for Virtual Machines</h4><p>可以直接运行虚拟机的体系结构称为可虚拟化的。一般的，VMM可以捕获客户操作系统执行的特权指令并作出相应的支持。若硬件支持三个特权等级，客户操作系统执行特定特权指令（那些不影响其他客户操作系统的指令）时可以不经过VMM。</p><h4 id="Impact-of-Virtual-Machines-on-Virtual-Memory-and-I-O">Impact of Virtual Machines on Virtual Memory and I/O</h4><p>可将内存分为三级：虚拟内存-物理内存-机器内存。另一种实现是引入影子页表（shadow page table），影子页表捕获用户操作系统对其页表的修改，直接将虚拟内存映射到机器内存。VMM保存了所有客户操作系统的TLB内容。IO设备之间的映射可以是分时的（网口），也可以是分块的（硬盘）。</p><h4 id="Extending-the-Instruction-Set-for-Efficient-Virtualization-and-Better-Security">Extending the Instruction Set for Efficient Virtualization and Better Security</h4><p>近年来的指令集的虚拟化扩展主要关注页表和TLB处理的性能和IO性能。虚拟内存管理方面，避免了不必要的TLB刷新，采用了嵌入页表机制（nested page table）。IO方面，客户操作系统可以使用DMA，也可以直接处理中断。</p><p>安全方面，VMM提供了不同客户操作系统之间的隔离。Intel提出了SGX扩展，将代码和数据进行加密。</p><h4 id="An-Example-VMM-The-Xen-Virtual-Machine">An Example VMM: The Xen Virtual Machine</h4><p>通过修改操作系统的少量代码，VMM可以实现的更为简单高效。</p><h3 id="2-5-Cross-Cutting-Issues-The-Design-of-Memory-Hierarchy">2.5 Cross-Cutting Issues: The Design of Memory Hierarchy</h3><h4 id="Protection-Virtualization-and-Instruction-Set-Architecture">Protection, Virtualization, and Instruction Set Architecture</h4><p>保护是体系结构和操作系统的共同努力，IBM主流的硬件采取以下措施提高虚拟机的性能：</p><ol><li>减少处理器虚拟化的开销</li><li>减少因虚拟化造成的中断的额外开销</li><li>通过直接将中断传递给正确的虚拟机来减少中断的开销</li></ol><h4 id="Autonomous-Instruction-Fetch-Units">Autonomous Instruction Fetch Units</h4><p>乱序处理器一般将取指操作解耦合。取指单元一般从指令Cache中取出整个Cache行。</p><h4 id="Speculation-and-Memory-Access">Speculation and Memory Access</h4><p>猜测执行可能造成不必要的内存访问，造成Cache缺失率虚高。</p><h4 id="Special-Instruction-Caches">Special Instruction Caches</h4><p>现代处理器可以使用一个较小的Cache存储译码后的微操作。</p><h4 id="Coherency-of-Cached-Data">Coherency of Cached Data</h4><p>多核和IO都会造成一致性问题。</p><h3 id="2-6-Putting-It-All-Together-Memory-Hierarchies-in-the-ARM-Cortex-A53-and-Intel-Core-i7-6700">2.6 Putting It All Together: Memory Hierarchies in the ARM Cortex-A53 and Intel Core i7 6700</h3><h4 id="The-ARM-Cortex-A53">The ARM Cortex-A53</h4><p>Cortex-A53是一个IP核，IP核是可移动设备领域的主流形式，分为硬核和软核，前者对特定代工厂做了优化，是一个黑盒，后者可以为不同代工厂编译并做少量修改。Cortex-A53每拍可以发射两条指令，支持两级TLB和两级Cache。</p><h4 id="The-Intel-Core-i7-6700">The Intel Core i7 6700</h4><p>i7是一个四核处理器，每个核每拍可以执行4条指令，使用多发射、动态调度、超线程技术，16级流水线。它支持三个内存通道，峰值内存带宽超过25GB/s。它支持2级TLB，一级Cache使用VIPT索引，二级和三级Cache使用PIPT索引。评估该处理器的访存子系统性能是比较困难的，因为非写分配的一级数据Cache和激进的预取策略，但数据表明激进的预取策略对其性能有较大帮助。</p><h2 id="Chapter3-Instruction-Level-Parallelism-and-Its-Exploitation">Chapter3: Instruction-Level Parallelism and Its Exploitation</h2><h3 id="3-1-Instruction-Level-Parallelism-Concepts-and-Challenges">3.1 Instruction-Level Parallelism: Concepts and Challenges</h3><p>本章将探讨数据冲突和控制冲突，探讨软硬件增加指令级并行度（ILP）的方式。开发ILP有两种主要的途径：一是硬件动态的，二是软件在编译时静态的。这两种方式开发的ILP都是有上限的。</p><h4 id="What-Is-Instruction-Level-Parallelism">What Is Instruction-Level Parallelism?</h4><p>由于RISC程序的基本块都很小，而且基本块内的指令很可能有数据相关，我们能在基本块内开发的ILP非常有限，必须要在多个基本块间开发ILP。增加ILP最简单的方法是在循环的多次执行中寻找并行性。</p><h4 id="Data-Dependences-and-Hazards">Data Dependences and Hazards</h4><p>指令j对指令i数据相关，如果任意一条成立：</p><ul><li>指令j会用到指令i产生的结果</li><li>指令j对指令k数据相关，指令k对指令i数据相关</li></ul><p>数据相关的指令不能（完全地）交叠执行。数据相关是程序的固有属性，它限制了ILP的开发。数据相关可以是寄存器间的，也可以是内存间的，后者会造成更大的挑战。</p><p>名字相关指两条指令使用了相同的寄存器或内存地址，但它们之间没有数据之间的关联。对于指令i和指令j有两种名字相关，假设指令i的程序序在前：</p><ul><li>反相关指指令j写了某一寄存器或内存地址，而指令i要读取它</li><li>输出相关指指令i和指令j写了同一寄存器或内存地址</li></ul><p>当数据相关或名字相关的指令在程序中足够靠近时，它们就会发生数据冲突。我们在开发并行性的时候要避免数据冲突，保持程序序，即保持程序的输出顺序不变。我们将数据冲突分为三种：RAW，WAW和WAR。</p><h4 id="Control-Dependences">Control Dependences</h4><p>控制相关提出了两个限制：</p><ol><li>一条对分支指令控制相关的指令不能移到该分支指令之前</li><li>一条不对分支指令控制相关的指令不能移到该分支指令之后</li></ol><p>有两个关键的属性要求我们遵守数据相关和控制相关：例外和数据流。如果执行的指令不影响程序的正确性，我们也可以违反控制相关。</p><h3 id="3-2-Basic-Compiler-Techniques-for-Exposing-ILP">3.2 Basic Compiler Techniques for Exposing ILP</h3><p>编译优化来开发ILP对静态发射和静态调度的处理器来说是非常关键的。</p><h4 id="Basic-Pipeline-Scheduling-and-Loop-Unrolling">Basic Pipeline Scheduling and Loop Unrolling</h4><p>循环展开可以减少循环的额外开销，还有利于指令的调度。</p><h4 id="Summary-of-Loop-Unrolling-and-Scheduling">Summary of Loop Unrolling and Scheduling</h4><p>在实践中，进行循环展开时需要做出以下决策：</p><ul><li>循环间是不相关的</li><li>展开后使用不同寄存器来消除名字相关</li><li>消除额外的分支指令并修改循环代码</li><li>检查循环间的Load和Store指令的地址以确保它们不相关</li><li>调度代码以减少阻塞</li></ul><p>循环展开有以下限制：</p><ul><li>边际效用</li><li>代码大小</li><li>编译器限制（寄存器数量限制）</li></ul><h3 id="3-3-Reducing-Branch-Costs-With-Advanced-Branch-Prediction">3.3 Reducing Branch Costs With Advanced Branch Prediction</h3><h4 id="Correlating-Branch-Predictor">Correlating Branch Predictor</h4><p>在进行分支预测时不仅需要考察本地历史，还要考察全局历史。一个(m,n)预测器使用最近m个分支的信息索引<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="2.724ex" height="1.528ex" role="img" focusable="false" viewbox="0 -675.5 1203.8 675.5" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-1-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"/><path id="MJX-1-TEX-I-1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-1-TEX-N-32"/></g><g data-mml-node="mi" transform="translate(533,363) scale(0.707)"><use data-c="1D45A" xlink:href="#MJX-1-TEX-I-1D45A"/></g></g></g></g></svg></mjx-container>个预测表，每个预测表有若干项（用分支地址低位索引），每项用n位来预测一个分支指令。我们可以连接（或哈希）分支地址的低位和全局历史来索引整个分支预测表。GShare预测器使用分支地址的低位和全局历史的异或来索引，它的效果非常好，成为了分支预测器的baseline。</p><h4 id="Tournament-Predictors-Adaptively-Combining-Local-and-Global-Predictors">Tournament Predictors: Adaptively Combining Local and Global Predictors</h4><p>全局预测器通过全局历史进行索引，本地预测器使用分支地址进行索引，一个选择器选择它们的预测结果之一作为最终结果。一般的，每个循环都有一个2位的计数器来作为选择器。本地预测器可以做成2层，第一层使用分支地址索引，记录分支的本地历史信息，用分支的本地历史信息去索引第二层预测表，得到更准确的结果。</p><h4 id="Tagged-Hybrid-Predictors">Tagged Hybrid Predictors</h4><p>TAGE预测器使用多个用不同全局历史长度来索引的预测器，首先通过PC低位和i位全局历史的哈希来索引预测表，然后通过PC低位和i位全局历史的（另一个）哈希来对比tag。TAGE的预测结果由tag匹配的全局历史长度最长的预测器提供，第0级预测器作为后备预测器没有tag域。预测表还有use域来记录表项是否最近被使用。当预测表的容量不断增加，预测表的初始化对性能也有较大影响。</p><h4 id="The-Evolution-of-the-Intel-Core-i7-Branch-Predictor">The Evolution of the Intel Core i7 Branch Predictor</h4><p>Core i7 920使用了两级预测器，每一级包含三种不同的预测器：本地历史，全局历史和循环退出，通过竞争选择预测结果。Core i7 6700可能采用了TAGE预测器。</p><h3 id="3-4-Overcoming-Data-Hazards-With-Dynamic-Scheduling">3.4 Overcoming Data Hazards With Dynamic Scheduling</h3><p>动态调度的优点有：</p><ul><li>不用为每一种微架构编译一个二进制文件</li><li>可以解决编译时无法确定的依赖关系</li><li>解决无法预测的延迟，例如Cache缺失</li></ul><h4 id="Dynamic-Scheduling-The-Idea">Dynamic Scheduling: The Idea</h4><p>动态调度时，指令仍是按序发射的，但是当它的源操作数准备好后就可以马上执行，即指令是乱序执行，乱序结束的。乱序执行引入了WAR和WAW冲突，乱序结束引入了非精确例外的问题。</p><p>为了允许乱序执行，我们将ID级拆分为两级：</p><ul><li>发射：译码，检查结构相关</li><li>读操作数：等待数据冲突解决，读取源操作数</li></ul><p>为发挥动态调度的优势，需要多个流水的功能部件以允许多条指令同时执行。<strong>计分板</strong>是最初的动态调度算法，此处我们重点讨论<strong>Tomasulo算法</strong>，它能通过重命名寄存器解决输出相关和反相关，也可以引入猜测执行。</p><h4 id="Dynamic-Scheduling-Using-Tomasulo’s-Approach">Dynamic Scheduling Using Tomasulo’s Approach</h4><p>Tomasulo算法的基本原理是动态判断指令何时准备好执行和使用重命名寄存器来避免不必要的冲突。寄存器重命名会重命名所有目的寄存器，解决WAW和WAR冲突。Tomasulo算法的实现中，寄存器重命名通过保留站实现，保留站可以缓存指令的源操作数。指令发射时，需要它的结果的指令的源操作数被标记为它的保留站号，该指令执行完成后将结果写入这些指令的源操作数域中。</p><p>在Tomasulo算法中，冲突检测和执行控制是分开的，每个功能部件的保留站决定其中的指令是否可以执行；操作数由保留站直接提供给功能部件而不需要经过寄存器堆，意味着需要CDB将功能部件的输出载入到保留站的源操作数域中。</p><p>Tomasulo算法主要包含三步：</p><ul><li>发射（分发）：将指令从IQ中发送到保留站中（如果有空位），如果源操作数已准备好，则读取寄存器，如果未准备好，则记录相应的保留站号</li><li>执行：将准备好的指令发送到功能部件</li><li>写回：将结果发送到CDB上</li></ul><p>Tomasulo算法导致了相关的指令之间至少有一拍的延迟。</p><h3 id="3-5-Dynamic-Scheduling-Examples-and-the-Algorithm">3.5 Dynamic Scheduling: Examples and the Algorithm</h3><h4 id="Tomasulo’s-Algorithm-The-Details">Tomasulo’s Algorithm: The Details</h4><p>算法伪代码。</p><h4 id="Tomasulo’s-Algorithm-A-Loop-Based-Example">Tomasulo’s Algorithm: A Loop-Based Example</h4><p>如果Load和Store的地址不同，它们可以安全地乱序执行，但地址相同的Load和Store之间也会有RAW，WAR，WAW冲突。假设Load和Store的地址按照程序序被计算出来，那么Load需要检查Store Buffer中所有的地址，Store需要检查Load Buffer和Store Buffer中所有的地址。</p><p>Tomasulo算法在360/91之后许多年都无人使用，但随着多发射的流行，它被广泛采用，因为：</p><ul><li>需要减小Cache缺失的影响</li><li>处理器有更多的晶体管</li><li>不需要编译器对特定流水线结构优化也可以取得高性能</li></ul><h3 id="3-6-Hardware-Based-Speculation">3.6 Hardware-Based Speculation</h3><p>硬件的猜测执行有三个重要思想：</p><ol><li>动态的分支预测来选择执行哪些指令</li><li>猜测地允许指令在控制相关解决前执行</li><li>在多个基本块间动态调度</li></ol><p>为了支持猜测执行，我们需要区分指令产生（可前递的）结果和指令真正完成。在指令不再处于猜测状态时，我们才可以让它产生不可撤销的更新。真正地更新寄存器或内存的阶段称为指令提交。为了在指令产生结果和指令提交之间暂存指令的结果，我们引入了ROB，ROB可以作为重命名寄存器使用。</p><p>指令的执行有四个阶段：</p><ol><li>发射（分发）：从IQ中获取指令，将其发送到保留站和ROB中</li><li>执行：等待操作数准备好后发送到功能部件</li><li>写回：将结果发送到CDB上</li><li>提交：指令位于ROB头且结果已准备好时即可提交，若是分支预测错则取消后续指令</li></ol><p>引入ROB还可以支持精确例外。为了提高流水线的效率，分支指令预测错会在执行时就清除后续指令，因为分支指令预测错比例外出现的更多。为了维持访存指令的顺序性，我们要求：</p><ul><li>不允许Load指令开始访存，如果有效的ROB指令中有相同地址的Store指令</li><li>维持计算访存指令地址的操作是按程序序的</li></ul><h3 id="3-7-Exploiting-ILP-Using-Multiple-Issue-and-Static-Scheduling">3.7 Exploiting ILP Using Multiple Issue and Static Scheduling</h3><p>多发射处理器主要有三种类型：</p><ol><li>静态的超标量处理器</li><li>VLIW处理器</li><li>动态的超标量处理器</li></ol><h4 id="The-Basic-VLIW-Approach">The Basic VLIW Approach</h4><p>VLIW指将多个操作放入一个非常长的指令中，并要求这些操作满足一些限制。为了尽可能占满VLIW的指令槽，需要编译器调度代码。在一个基本块内调度称为本地调度技术，在多个基本块间调度称为全局调度技术。</p><p>VLIW技术的问题包括增加了指令的大小和同步操作的限制。需要大量的循环展开来有效利用指令槽，以及空闲的指令槽占用大量空间。早期的硬件没有冲突检测逻辑，VLIW指令中一个操作阻塞会造成其他操作同步阻塞。VLIW技术也有一些应用问题，包括二进制兼容性问题。</p><h3 id="3-8-Exploiting-ILP-Using-Dynamic-Scheduling-Multiple-Issue-and-Speculation">3.8 Exploiting ILP Using Dynamic Scheduling, Multiple Issue, and Speculation</h3><p>由于指令组内相关性，指令的多发射（分发）逻辑会变得非常复杂。对于n发射的处理器：对于组内的每一条指令预先分配保留站号和ROB号，分析组内相关性，若某指令与组内在它之前的指令相关，则使用预先分配的ROB号来填写保留站，无相关则用原先的保留站和ROB信息来填写保留站。指令的多提交则相对简单。</p><h3 id="3-9-Advanced-Techniques-for-Instruction-Delivery-and-Speculation">3.9 Advanced Techniques for Instruction Delivery and Speculation</h3><h4 id="Increasing-Instruction-Fetch-Bandwidth">Increasing Instruction Fetch Bandwidth</h4><p>BTB存储预测跳转的分支指令的目标地址，在取指时，通过对比PC判断是否命中BTB，若BTB中没有相应的表项，则nextPC是顺序的，若BTB中有相应的表项，则nextPC是目标地址。一类BTB的变种是存储目标地址和目标指令，这样BTB不用当拍返回结果，使得BTB可以做的更大，并应用<strong>分支折叠</strong>技术。</p><h4 id="Specialized-Branch-Predictors-Predicting-Procedure-Returns-Indirect-Jumps-and-Loop-Branches">Specialized Branch Predictors: Predicting Procedure Returns, Indirect Jumps, and Loop Branches</h4><p>返回地址栈在call指令执行时将返回地址入栈，在return指令执行时将地址出栈，有效预测返回指令的跳转地址。很多处理器也加入了预测间接跳转指令的专门预测器，而循环分支指令的预测工作近年来由Tage承担。</p><p>最近的设计将取指单元设计成一个单独的模块，拥有以下功能：</p><ul><li>分支预测单元</li><li>指令预取单元</li><li>指令缓存单元</li></ul><h4 id="Speculation-Implementation-Issues-and-Extensions">Speculation: Implementation Issues and Extensions</h4><p>除了使用ROB进行寄存器重命名外，我们也可以用额外的物理寄存器重命名。体系结构上可见的寄存器（逻辑寄存器）和指令产生的临时值都存储在物理寄存器中，ROB仅承担指令按序完成的作用。寄存器重命名表承担着映射物理寄存器和逻辑寄存器的任务。相比于ROB重命名，物理寄存器重命名的实现可以简化指令提交，它只需要修改寄存器映射表并释放旧的物理寄存器（该逻辑寄存器之前对应的物理寄存器）。同样的，组内相关性检测也是物理寄存器重命名的一个瓶颈。</p><p>现代处理器继续提高发射宽度的主要瓶颈在于：更大的发射宽度造成更复杂的组内相关性检查，使得重命名逻辑变得复杂，重命名的过程必须在一拍内完成，更高的频率限制了重命名的复杂度。</p><p>猜测执行需要消耗面积和功耗，而错误的猜测执行造成的例外事件（例如Cache缺失或TLB缺失）会降低性能。很多流水线只允许低开销的例外事件（例如L1 Cache缺失）猜测执行，昂贵的例外事件（L2 Cache缺失或TLB缺失）发生时处理器会等待它不再是猜测状态后再执行。</p><p>考虑到更高的分支频率，分支指令的聚集性和功能部件的长延迟，一拍内预测多个分支指令可以提高性能，但至2017年还没有处理器实现。</p><p>猜测执行会增加能耗，因为执行了不需要的指令，并且额外消耗了恢复状态的能量。但考虑到总体上指令执行的更快，如果不需要的指令被执行得比较少，那总体能效比可能是更优的，不过现实情况是30%的指令执行最终没有被用到，降低了能效比。</p><p>目前处理器也加入了地址预测：预测两个Store或者一个Load和一个Store的地址是不是相同的。值预测指在数据相关解决前预测指令的源操作数，尽管在学术界有诸多研究，但没有出现在真实的处理器中。</p><h3 id="3-10-Cross-Cutting-Issues">3.10 Cross-Cutting Issues</h3><h4 id="Hardware-Versus-Software-Speculation">Hardware Versus Software Speculation</h4><ul><li>为了更有效地猜测执行，我们必须消除内存引用之间的相关性，这在编译时是很难做到的。硬件支持可以让内存访问猜测执行，但需要谨慎设计以免恢复的额外开销超过猜测执行带来的优势。</li><li>基于硬件的猜测执行在执行流不可预测时更有优势，因为基于硬件的转移猜测比基于软件的转移猜测正确率更高。</li><li>基于硬件的猜测执行有利于保持精确例外。</li><li>基于软件的猜测执行可以利用更大的指令窗口。</li><li>基于硬件的猜测执行对于没有精心设计的（任意的）代码序列也可以进行动态调度。</li></ul><h4 id="Speculative-Execution-and-the-Memory-System">Speculative Execution and the Memory System</h4><p>猜测执行可能发送错误的内存访问，造成正确性和性能方面的问题。</p><h3 id="3-11-Multithreading-Exploiting-Thread-Level-Parallelism-to-Improve-Uniprocessor-Throughput">3.11 Multithreading: Exploiting Thread-Level Parallelism to Improve Uniprocessor Throughput</h3><p>线程有独立的寄存器状态和PC，但和进程内的其他线程共享内存空间。超线程指多个线程共用一个处理器而不用进行线程切换。由于动态调度难以隐藏过长的内存访问时间，设计者企图通过其他方式提高ILP。超线程允许多个线程交叠地共享一个处理器内的功能部件，但有着私有的寄存器和PC。</p><p>超线程有三种实现：细粒度超线程，粗粒度超线程和同步超线程。细粒度超线程以轮询的方式每周期切换进程，在面向多线程负载的处理器中有所应用；粗粒度超线程只在长时间阻塞的情况下才会切换线程，但由于启动的额外开销，并没有实际应用。最常见的是同步多线程（SMT），它在寄存器重命名和动态调度的时候不区分来自不同进程的指令。</p><h4 id="Effectiveness-of-Simultaneous-Multithreading-on-Superscalar-Processors">Effectiveness of Simultaneous Multithreading on Superscalar Processors</h4><p>SMT带来的性能和能耗比的提升比较有限，但也是宝贵的。</p><h3 id="3-12-Putting-It-All-Together-The-Intel-Core-i7-6700-and-ARM-Cortex-A53">3.12 Putting It All Together: The Intel Core i7 6700 and ARM Cortex-A53</h3><h4 id="The-ARM-Cortex-A53-2">The ARM Cortex-A53</h4><p>ARM Cortex-A53是一款静态双发射处理器核，有八个流水级。共有四种预测器：一项的带有2条分支目标指令的分支目标缓存，3072项的混合预测器，256项的间接分支指令预测器和8项的返回地址栈。分支预测错的惩罚是8个时钟周期。</p><h4 id="The-Intel-Core-i7-6700-2">The Intel Core i7 6700</h4><p>i7是一款激进的乱序超标量处理器核，共有14个流水级，每周期最多4条微码重命名，6条微码执行。取指单元配备多层的分支预测器和返回地址栈，每周期取出16字节的指令。16字节的指令被放入预译码缓存中，进行宏融合，然后通过预译码分为单独的x86指令并放入指令队列中。三个译码器和一个译码引擎将x86指令翻译成RISC形式的微码，并放入64项的微码缓存中，微码缓存还承担了循环检测和微融合的工作。随后指令被重命名、发射、执行，i7使用了集中式保留站。由于充足的缓存和队列，性能损失主要来自于分支预测错和Cache缺失。</p><h2 id="Chapter4-Data-Level-Parallelism-in-Vector-SIMD-and-GPU-Architectures">Chapter4: Data-Level Parallelism in Vector, SIMD, and GPU Architectures</h2><h3 id="4-1-Introduction">4.1 Introduction</h3><p>不仅在科学计算中面向矩阵的运算具有DLP，面向媒体的图像和音频处理，机器学习算法也有DLP。SIMD架构可以降低功耗，更重要的是它方便程序员以顺序思维进行编程。本章将介绍三种SIMD的变种：向量体系结构、多媒体指令扩展和GPU。</p><h3 id="4-2-Vector-Architecture">4.2 Vector Architecture</h3><p>向量体系结构将内存中分散的元素取到一个更大的寄存器堆中，对寄存器堆中的数据进行操作并将结果写回内存中。</p><h4 id="RV64V-Extension">RV64V Extension</h4><p>RV64V指RISC-V基础指令集加上向量扩展RVV。RV64V指令集由以下部分组成：</p><ul><li>向量寄存器</li><li>向量功能部件</li><li>向量访存部件</li><li>标量寄存器</li></ul><p>RV64V的创新是使用了动态寄存器类型，它可以减少向量指令的类型。动态寄存器类型还可以减少上下文切换的时间，实现隐式类型转换。</p><h4 id="How-Vector-Processor-Work-An-Example">How Vector Processor Work: An Example</h4><p>当循环中没有<strong>循环体间相关</strong>时，循环是可向量化的。向量体系结构将元素之间相关数据的前递称为<strong>链接</strong>。最大向量长度（mvl）是硬件确定的，如果向量长度不等于mvl，可以将向量长度存储在<em>vl</em>寄存器中。由较窄的数据向较宽的数据的类型转换是自动的。</p><h4 id="Vector-Execution-Time">Vector Execution Time</h4><p>向量操作的执行时间主要由以下三点确定：</p><ol><li>向量的长度</li><li>结构相关</li><li>数据相关</li></ol><p>给定向量的长度和执行速率，我们就可以算出一条向量指令执行的时间。现代的处理器的向量功能部件都有多条流水线，每周期可以产生两个甚至更多的结果。为了简化，我们的RV64V实现只有一条流水线，每拍产生一个结果，那么一条向量指令的执行时间约等于向量长度。</p><p>此处我们引入convoy的概念，一个chovoy内的指令可以并行地执行，没有结构相关，其中的数据相关由链接解决。现代处理器都实现了灵活链接，一条向量指令可以向任何正在执行的其他向量指令前递结果。一个convoy执行的时间称为chime，它忽略了发射指令的开销，因为处理器一次只能发射一条向量指令。另一类不可忽略的开销是功能部件的启动延迟（但chime也忽略了）。</p><h4 id="Multiple-Lanes-Beyond-One-Element-per-Clock-Cycle">Multiple Lanes: Beyond One Element per Clock Cycle</h4><p>使用多条通道可以加速向量指令的执行，每条通道包括向量寄存器堆的读写端口和每个向量执行部件的一条流水线。每个向量寄存器的0号元素都使用通道0，如此定位可以避免跨通道的通讯（前递），减少连线开销。</p><h4 id="Vector-Length-Registers-Handling-Loops-Not-Equal-to-32">Vector-Length Registers: Handling Loops Not Equal to 32</h4><p>*vector-length register (vl)*控制向量操作的长度。使用strip mining来处理向量长度比mvl大的情况，<em>setvl</em>指令可以简化这个过程。</p><h4 id="Predicate-Registers-Handling-IF-Statements-in-Vector-Loops">Predicate Registers: Handling IF Statements in Vector Loops</h4><p>谓词寄存器用于存储向量操作的掩码，初始为全1。</p><h4 id="Memory-Banks-Supplying-Bandwidth-for-Vector-Load-Store-Unit">Memory Banks: Supplying Bandwidth for Vector Load/Store Unit</h4><p>分Bank实现可以增加访存带宽。</p><h4 id="Stride-Handling-Multidimensional-Arrays-in-Vector-Architectures">Stride: Handling Multidimensional Arrays in Vector Architectures</h4><p>矩阵乘法中stride用于访问在内存中间隔一定距离的数组元素。</p><h4 id="Gather-Scatter-Handling-Sparse-Matrices-in-Vector-Architectures">Gather-Scatter: Handling Sparse Matrices in Vector Architectures</h4><p>gather操作将索引寄存器中的偏移量和基地址相加，将向量取至寄存器中；scatter操作则同样将索引寄存器中的偏移量和基地址相加，将向量存回内存中。gather-scatter操作需要程序员给编译器显式提示，而且执行速度远慢于常规访存。</p><h4 id="Programming-Vector-Architectures">Programming Vector Architectures</h4><p>使用向量编程的一个优势是，编译器会给出提示，指示为什么代码不能被向量化，程序员可根据提示修改程序。</p><h3 id="4-3-SIMD-Instruction-Set-Extensions-for-Multimedia">4.3 SIMD Instruction Set Extensions for Multimedia</h3><p>SIMD指令源于简单的观察：图像和声音处理系统使用的数据位宽通常小于32bits。相比向量指令，SIMD指令使用更小的寄存器堆，没有向量长度寄存器，没有stride和gather-scatter操作，也没有谓词寄存器。</p><p>MMX指令将64bits的浮点寄存器分为8个8bits或者4个16bits。SSE使用额外的128bits的寄存器（XMM寄存器）。AVX再次将寄存器位宽增加至256bits（YMM寄存器）。</p><h4 id="Programming-Multimedia-SIMD-Architectures">Programming Multimedia SIMD Architectures</h4><p>SIMD指令通常在库函数中使用。</p><h4 id="The-Roofline-Visual-Performance-Model">The Roofline Visual Performance Model</h4><p>算术密度用于衡量内存访问和浮点运算的比例，在Roofline模型中，转折点左侧（低算术密度）表示瓶颈在访存，右侧（高算术密度）表示瓶颈在计算。</p><h3 id="4-4-Graphics-Processing-Units">4.4 Graphics Processing Units</h3><p>GPU目前已非常普及，本节将介绍GPU如何进行运算。</p><h4 id="Programming-the-GPU">Programming the GPU</h4><p>英伟达研发了一个类似于C语言的编程语言和环境用于解决异构计算和多层次并行的困难，称为CUDA。OpenCL是一个类似的编程语言，致力于实现平台无关。英伟达将所有层次的并行性统一为CUDA线程，CUDA的编程模型是单指令流多数据流，多个CUDA线程形成线程块（Thread Block），执行线程块的硬件称为多线程SIMD处理器（英伟达称为流处理器SM）。</p><p>CUDA中用<code>__device__</code>和<code>__global__</code>来表示GPU，用<code>__host__</code>来表示处理器。用于GPU的函数定义语法为<code>name &lt;&lt;&lt;dimGrid, dimBlock&gt;&gt;&gt;(...parameter list...)</code>，其中<code>dimGrid</code>表示代码的维度（使用多少线程块），<code>dimBlock</code>表示线程块的维度（有多少CUDA线程）。在代码中，<code>blockIdx</code>表示线程块的ID，<code>threadIdx</code>表示线程块中的线程ID，<code>blockDim</code>等于<code>dimBlock</code>。</p><p>为简化硬件设计，线程块之间不能有相关，线程块之间的执行顺序是任意的，线程块之间不能直接通信，只能通过对全局内存的原子操作来通信。为了获得良好的性能，CUDA程序员必须时刻关心GPU的硬件结构，但这也造成了程序员的生产力降低。</p><h4 id="NVIDIA-GPU-Computational-Structures">NVIDIA GPU Computational Structures</h4><p>网格（Grid）指运行在GPU上的一段代码，由一组线程块组成。一个线程块包括多个SIMD线程（英伟达称为Wrap）。线程块调度器（英伟达称为Giga Thread Engine）将一个线程块分配给一个多线程SIMD处理器，SIMD线程调度器（英伟达称为Wrap Scheduler）在一个多线程SIMD处理器内部分配每个时钟周期执行哪个SIMD线程。多线程SIMD处理器与向量处理器类似，但向量处理器有几个流水化的功能部件，而多线程SIMD处理器有许多并行的功能部件。GPU由一个或多个多线程SIMD处理器组成。</p><p>每个SIMD线程有单独的PC，SIMD线程调度器会将准备好的SIMD线程发送给分配单元。SIMD指令的位宽是32，所以一个SIMD线程可以处理32个元素。SIMD处理器需要执行SIMD线程，因此有多条SIMD通道，类似于向量通道，例如有16个通道，那么执行一条SIMD指令需要2拍。</p><p>因为不同的SIMD线程之间是独立的，所以SIMD线程调度器可以任意选择准备好的SIMD线程执行，使用计分板跟踪至多64个SIMD线程的执行状态。一个SIMD处理器有32K至64K个寄存器，每个SIMD通道拥有独立的寄存器（例如每通道1K个）。每个SIMD线程最多使用256个向量寄存器。寄存器是动态分配给线程块的。注意一个CUDA线程是SIMD线程的投影，是SIMD线程中的一个元素的操作。</p><h4 id="NVIDIA-GPU-Instruction-Set-Architecture">NVIDIA GPU Instruction Set Architecture</h4><p>PTX指令集是硬件指令集的一个抽象，其指令描述单个CUDA线程的操作，与机器指令通常（但不绝对）是一一对应的。PTX指令使用无限多的只写一次寄存器，编译器会为这些寄存器分配物理寄存器，优化器会减少物理寄存器的使用数量。</p><p>PTX指令的格式是<code>opcode.type d, a, b, c</code>，其中d是目的寄存器（store指令除外），a、b、c是源操作数。PTX使用谓词寄存器来实现分支指令。控制流指令包括函数跳转的<code>call</code>和<code>return</code>，线程相关的<code>exit</code>和<code>branch</code>，同步指令<code>bar.sync</code>。GPU的所有访存都是gather-scatter形式的，硬件会识别其空间相关性。</p><h4 id="Conditional-Branching-in-GPUs">Conditional Branching in GPUs</h4><p>GPU相比向量处理器对分支指令有更多的硬件支持。在PTX指令层面，使用<code>branch</code>、<code>call</code>、<code>return</code>和<code>exit</code>指令和每个C线程之间的锁步。在GPU机器指令层面，除了常规的分支指令外，每个SIMD线程还有分支同步栈。对于PTX指令中简单的分支指令，编译器只需使用谓词寄存器；复杂的分支则需要使用分支同步栈，在不同CUDA线程分流时压栈，合流时出栈。分支的层数越多，GPU运算的效率越低，PTX编译器会对分支指令进行编译优化。需要注意的是，同一线程块内的CUDA线程看似是相互独立的，但是在分支中他们是相关的，只有当谓词寄存器中1的比例足够大时，程序才有较好的效率。</p><h4 id="NVIDIA-GPU-Memory-Structures">NVIDIA GPU Memory Structures</h4><p>每一个SIMD通道（即CUDA线程）有单独的内存，称为私有内存，GPU将私有内存缓存在L1和L2 Cache中。每个多线程SIMD处理器有本地内存，其容量较小（48KB左右）但延迟较低，带宽较高；本地内存是线程块动态获取的。GPU内存是所有的线程块共享的，其还能被系统处理器（CPU）读写。GPU将大量晶体管用于寄存器而非L2和L3缓存，并使用多线程来隐藏访存延迟。</p><h4 id="Innovations-in-the-Pascal-GPU-Architecture">Innovations in the Pascal GPU Architecture</h4><p>Pascal GPU的每个多线程SIMD处理器拥有两个SIMD线程调度器，每周期可以调度两个线程的SIMD指令到两组16 SIMD通道的功能部件。Pascal GPU还有以下创新：</p><ul><li>更快的单精度、双精度、半精度浮点运算；</li><li>HBM2实现更高的内存带宽；</li><li>高速的芯片间互联；</li><li>统一的虚拟内存和分页支持。</li></ul><h4 id="Similarity-and-Difference-Between-Vector-Architectures-and-GPUs">Similarity and Difference Between Vector Architectures and GPUs</h4><p>SIMD处理器和向量处理器类似，但SIMD处理器支持多线程。GPU有更多的寄存器以支持多线程，也有更多的通道以更快执行一条SIMD指令。对于访存，GPU中所有访存都是隐含的gather-scatter形式，而向量处理器则是自定义的。对于隐藏访存延迟，向量处理器的方式是均摊访存延迟至所有向量元素，GPU的方式是多线程。对于分支指令，两者都使用掩码，但GPU使用硬件和编译器处理掩码。对于GPU而言，系统处理器通过PCIe相连，访问延迟非常高，而对于向量处理器而言，标量处理器易于访问。</p><h4 id="Similarity-and-Differences-Between-Multimedia-SIMD-Computers-and-GPUs">Similarity and Differences Between Multimedia SIMD Computers and GPUs</h4><p>GPU拥有更多的SIMD通道，支持更多的线程。</p><h4 id="Summary">Summary</h4><p>虽然英伟达将所有层次的并行性统一为CUDA线程，但程序员必须了解CUDA线程是如何被组织成线程块的，32个CUDA线程是一起执行的。</p><h3 id="4-5-Detecting-and-Enhancing-Loop-Level-Parallelism">4.5 Detecting and Enhancing Loop-Level Parallelism</h3><p>挖掘循环体的并行性是提高程序执行效率的重点，本节将谈论循环体的编译优化。循环体间相关是阻碍编译器进行编译优化的主要因素，在循环的某一趟执行中产生的数据会在之后的某一趟执行中被用到，导致两趟循环不能并行执行。但是循环体间相关没有形成环时，相关性是偏序的，可以被消除。另外，识别指向同一个地址的两个引用（尤其是循环间的）从而消除不必要的访存指令也是至关重要的。</p><h4 id="Finding-Dependences">Finding Dependences</h4><p>指针和数组访问对相关性分析造成了困难。几乎所有相关性分析算法都会假设数组访问是仿射的，即<code>b[i]</code>的地址是<code>a*i+b</code>，多维数组是仿射的当且仅当每一维都是仿射的，散列访问（<code>x[y[i]]</code>）是非仿射的。判断循环中两个对同一数组的访问是否指向同一地址，只需分析仿射函数是否有相同的值即可，即判断是否存在两个<code>i</code>使得<code>a*i+b</code>等于<code>c*i+d</code>。在部分程序中，<code>a</code>、<code>b</code>、<code>c</code>、<code>d</code>这些值可能不是常量，导致相关性分析无法进行。但在大多数程序中，这些值是常量，此时若GCD(c,a)整除(d-b)时即存在循环间相关。GCD测试可能出现假阳性，因为其没有考虑循环的边界。相关性分析也存在很大的局限性，因为其假设数组访问是仿射的，而且对过程调用中的指针无能为力。</p><h4 id="Eliminating-Dependent-Computations">Eliminating Dependent Computations</h4><p>对于累加程序，我们可以将结果进行向量扩展，然后将向量进行合并（reduction）。任何具有组合律的运算都可以进行合并，但计算机中数的运算受精度和范围的限制，可能不具有组合律。</p><h3 id="4-6-Cross-Cutting-Issues">4.6 Cross-Cutting Issues</h3><h4 id="Energy-and-DLP-Slow-and-Wide-Versus-Fast-and-Narrow">Energy and DLP: Slow and Wide Versus Fast and Narrow</h4><p>通过降低频率和电压，增加更多运算资源，在保持峰值运算性能的基础上可以降低功耗，因此GPU的频率通常更低。而且向量运算通常可以简化控制单元，减少译码和相关性检测的逻辑。</p><h4 id="Banked-Memory-and-Graphics-Memory">Banked Memory and Graphics Memory</h4><p>为提高访存带宽，GPU通常使用堆叠式内存（HBM），而且访存合并的控制逻辑也更为复杂。</p><h4 id="Strided-Accesses-and-TLB-Misses">Strided Accesses and TLB Misses</h4><p>在跨步式访问中，每次访存都可能造成TLB缺失，造成性能的极大损失。</p><h3 id="4-7-Putting-It-All-Together-Embedded-Versus-Server-GPUs-and-Tesla-Versus-Core-i7">4.7 Putting It All Together: Embedded Versus Server GPUs and Tesla Versus Core i7</h3><p>由于图形应用的流行，移动终端、台式电脑和服务器中都有不同规格的GPU。</p><h4 id="Comparison-of-a-GPU-and-a-MIMD-With-Multimedia-SIMD">Comparison of a GPU and a MIMD With Multimedia SIMD</h4><p>GPU有更高的访存带宽，更高的单精度和双精度浮点运算性能，但Cache容量较小，若工作集可以完全放在多核处理器的Cache中，GPU可能处于劣势。另外，GPU缺少内存一致性模型和一些同步指令，SIMD指令缺少gather-scatter形式的访存。</p><h4 id="Comparison-Update">Comparison Update</h4><p>Intel最新的架构已加入gather-scatter形式的访存，CPU和GPU的速度也有了很大的提升。</p><h2 id="Chapter5-Thread-Level-Parallelism">Chapter5: Thread-Level Parallelism</h2><h3 id="5-1-Introduction">5.1 Introduction</h3><p>多处理器架构的流行反映出以下因素：</p><ul><li>继续增加硅面积来挖掘ILP的效率已经很低，而功耗却成为关键因素；</li><li>高端服务器的需求旺盛；</li><li>数据密集型的应用在互联网的驱动下井喷；</li><li>台式电脑继续增加性能的需求已经降低（图像处理除外）；</li><li>有效运用多处理器架构的方法论逐渐成熟；</li><li>多处理器降低开发芯片的成本。</li></ul><p>本章我们讨论线程级并行性（TLP），意为多个程序通过MIMD的形式开发并行性，主要是通过多处理器。本章讨论的多处理器是多个紧密相关的处理器核，由同一个操作系统控制并共享地址空间。在这样的多处理器上软件有两种方式开发并行性，一是多个线程合作处理同一个任务，称为并行处理；二是多个互不相关的进程同时工作，称为任务级并行。</p><p>多处理器虽然共享地址空间，但不意味着只有单一的物理内存。多处理器不仅包括单芯片的多核处理器，也包括多芯片的计算机，每一个芯片都是一个多核处理器。在下一章我们将讨论大量处理器通过网络互联的架构，称为仓库级计算机。</p><h4 id="Multiprocessor-Architecture-Issues-and-Approach">Multiprocessor Architecture: Issues and Approach</h4><p>TLP相比ILP的层次更高，通常由程序员或操作系统来识别。虽然多线程也可以挖掘DLP，但其要求每个线程的工作量足够大来减少额外开销，比起SIMD和GPU而言代价更高。</p><p>第一种多处理器系统称为对称多处理器或集中式共享内存多处理器（SMP或UMA）。这种多处理器系统通常只有32核或更少，当前的多核处理器基本都是SMP，但部分多核处理器对LLC的访问是不一致的，称为NUCA。第二种多处理器系统称为分布式共享内存多处理器（DSM或NUMA），其可能由多个多核处理器组成，处理器访问本地内存远快于远程内存。</p><p>SMP和DSM都是共享内存的，即所有处理器共享地址空间。下一章将讨论消息传递模型的多处理机系统。</p><h4 id="Challenges-of-Parallel-Processing">Challenges of Parallel Processing</h4><p>并行处理的第一个难题是程序中有限的并行性，第二个难题是通讯的高额开销。</p><h3 id="5-2-Centralized-Shared-Memory-Architectures">5.2 Centralized Shared-Memory Architectures</h3><p>多级的、容量较大的Cache减少访存带宽的需求是集中式内存多处理器流行的重要原因。但对于共享数据的缓存造成了新的问题：缓存一致性（coherence）。</p><h4 id="What-Is-Multiprocessor-Cache-Coherence">What Is Multiprocessor Cache Coherence?</h4><p>一个内存系统是一致的，如果</p><ul><li>处理器P向位置X写入值后处理器P向位置X读取值，若中间没有其他处理器向位置X写入值，则读取的值是写入的值；</li><li>一个处理器向位置X写入值后另一个处理器向位置X读取值，若中间没有其他处理器向位置X写入值，且写入和读取时足够分开的，则读取的值是写入的值；</li><li>写入操作是串行的，即两个写入的顺序对于所有处理器而言都是一致的。</li></ul><p>一个处理器写入的值何时才能被其他处理器看到也是一个重要的问题，该问题称为内存一致性（consistency）模型。缓存一致性和内存一致性是互补的，前者定义了对同一内存位置读写的行为，后者定义了对不同内存位置读写的行为。在本节中，假设写操作完成指所有处理器都看到了写操作的效果，处理器不会改变写操作的顺序。</p><h4 id="Basic-Schemes-for-Enforcing-Coherence">Basic Schemes for Enforcing Coherence</h4><p>共享数据在Cache中存在多个拷贝对性能有着很大的好处，所以硬件通过Cache一致性协议来解决Cache一致性问题。Cache一致性协议的关键是跟踪共享的数据块的状态，有两类一致性协议：</p><ol><li>基于目录的：共享数据块的状态是集中存放在目录中的，目录可以是集中的，也可以是分布的。</li><li>基于侦听的：每一个Cache行都保存共享数据块的状态，通过总线进行通讯。</li></ol><h4 id="Snooping-Coherence-Protocols">Snooping Coherence Protocols</h4><p>有两种方式来确保Cache一致性。一是在写操作之前确保对该数据块具有独占的访问权限，称为写无效协议。二是在写操作之后进行广播，更新其他Cache中的值，称为写更新协议。写更新协议的总线压力大，在现实中较少使用。</p><h4 id="Basic-Implementation-Techniques">Basic Implementation Techniques</h4><p>当处理器对共享的Cache行进行写操作时，必须在总线上广播无效请求。当两个处理器同时广播无效请求时，总线仲裁器会将其串行化。</p><p>对于写穿透Cache而言，内存中的数据总是最新的，因此缺失的Cache请求可以从内存中取回数据。对于写回Cache而言，最新的数据可能在某个处理器的Cache中，当该Cache侦听到读请求时，会提供最新的数据并取消从内存取回的数据。</p><p>除了有效位和脏位以外，我们还需要共享位来标记Cache行的状态。</p><h4 id="An-Example-Protocol">An Example Protocol</h4><p>基于侦听的Cache一致性协议通常由每个Cache行独立的有限状态机实现。本节将讨论MSI协议，包含修改、共享和无效三个状态。本节中对于总线操作的原子性假设在现实世界中是不成立的。</p><h4 id="Extensions-to-the-Basic-Coherence-Protocol">Extensions to the Basic Coherence Protocol</h4><p>MESI协议增加了独占状态，表示处理器拥有该Cache行的独占权限但未进行修改。MOESI协议增加了占有状态，表示处理器拥有该共享Cache行的最新拷贝，内存中的相应数据是过时的。</p><h4 id="Limitations-in-Symmetric-Shared-Memory-Multiprocessors-and-Snooping-Protocols">Limitations in Symmetric Shared-Memory Multiprocessors and Snooping Protocols</h4><p>当核数继续增长，每个核的内存带宽需求继续增长，任何集中式的资源都会变成瓶颈，例如总线。以下技术可以增加侦听总线的带宽：</p><ul><li>将tag进行复制</li><li>将共享LLC进行分块</li><li>在共享LLC处部署（分布式）目录</li></ul><h4 id="Implementing-Snooping-Cache-Coherence">Implementing Snooping Cache Coherence</h4><p>当前的处理器总线不止一条，造成一致性操作是非原子的，增加了额外的复杂度。</p><h3 id="5-3-Performance-of-Symmetric-Shared-Memory-Multiprocessors">5.3 Performance of Symmetric Shared-Memory Multiprocessors</h3><p>基于侦听协议的Cache系统的性能取决于单核中固有的Cache缺失的开销和一致性开销等诸多因素。一致性开销又分为真共享和假共享。</p><h4 id="A-Commercial-Workload">A Commercial Workload</h4><p>加大L3 Cache可以减少单核中固有的Cache缺失的开销，但对一致性开销无济于事。核数的增加会导致一致性开销的增加。增加Cache行大小可以减少真共享开销，但增加了假共享开销。</p><h4 id="A-Multiprogramming-and-OS-Workload">A Multiprogramming and OS Workload</h4><p>此例使用的测试集为一个编译程序的某一个阶段。</p><h4 id="Performance-of-the-Multiprogramming-and-OS-Workload">Performance of the Multiprogramming and OS Workload</h4><p>操作系统对Cache的需求更高，增加Cache行大小可以有效改善操作系统的Cache性能。</p><h3 id="5-4-Distributed-Shared-Memory-and-Directory-Based-Coherence">5.4 Distributed Shared-Memory and Directory-Based Coherence</h3><p>侦听协议没有集中式的数据结构，降低了开销，也限制了其可扩展性。近些年来访存带宽需求的增加使得分布式内存受到更多欢迎，但除非我们降低侦听协议的广播开销，否则分布式内存中Cache的一致性问题会成为累赘。有共享包含式LLC的存储系统中，只需要在LLC的每个Cache行中加入长度为核数的比特指示当前Cache行在哪些核的Cache中有备份，即可实现集中式目录协议。</p><p>要实现分布式目录协议，我们可以将目录分布在LLC的每个bank中，也可以将目录分布在每个内存中。若目录分布在每个内存中，那么目录需要记录每个内存行的状态，行大小等于LLC的行大小，空间复杂度是行数量乘以核数量，对于几百个核的计算机来说都是可以接受的。</p><h4 id="Directory-Based-Cache-Coherence-Protocols-The-Basics">Directory-Based Cache Coherence Protocols: The Basics</h4><p>在简单的目录协议中，有以下状态：共享、无效、修改。目录会和发出请求的节点、地址所在的节点和拥有该Cache行的节点进行通讯。</p><h4 id="An-Example-Directory-Protocol">An Example Directory Protocol</h4><p>状态转换图和侦听协议基本一致，除了写缺失不是在总线上广播的，而是由目录控制进行点对点的取回和无效的。目录收到某个核的请求时，可能需要改变目录的状态，向其他核发送请求。</p><h3 id="5-3-Synchronization-The-Basics">5.3 Synchronization: The Basics</h3><p>同步机制是软硬件结合实现的，本节将关注基于锁的同步机制。</p><h4 id="Basic-Hardware-Primitives">Basic Hardware Primitives</h4><p>实现同步的基础是能够原子读-修改-写的硬件原语，软件开发者一般不直接使用硬件原语，而是依靠系统开发者提供的同步库函数。最简单的硬件原语是原子交换，其他还包括TAS、原子加等。另一种实现是LL-SC。</p><h4 id="Implementing-Locks-Using-Coherence">Implementing Locks Using Coherence</h4><p>实现了TAS锁和TTAS锁。</p><h3 id="5-6-Models-of-Memory-Consistency-An-Introduction">5.6 Models of Memory Consistency: An Introduction</h3><p>内存一致性是不同处理器对不同位置的读写之间的属性。最直观的内存一致性模型是顺序一致性，对每个处理器而言内存访问是按序的，不同处理器之间的内存访问是任意交叠的。实现顺序一致性的方式是将一个内存访问的完成推迟到其他所有处理器都完成（可能需要的）无效请求。顺序一致性大大影响了性能，体系结构研究者提出了更为宽松的内存一致性协议。</p><h4 id="The-Programmer’s-View">The Programmer’s View</h4><p>对于程序员来说，无数据冒险的程序是最符合直觉的。</p><h4 id="Relaxed-Consistency-Models-The-Basics-and-Release-Consistency">Relaxed Consistency Models: The Basics and Release Consistency</h4><p>放松一致性模型的核心是允许读写操作乱序完成，但提供强制按序执行的同步原语。根据放松的程度不同，有许多不同的一致性模型。顺序一致性维护所有四种顺序：R-&gt;W，R-&gt;R，W-&gt;W，W-&gt;R。</p><ul><li>放松W-&gt;R的模型称为TSO或处理器一致性模型。</li><li>放松W-&gt;R和W-&gt;W的模型称为PSO。</li><li>放松所有四种顺序的模型有很多种，包括弱一致性模型和宽松一致性模型。</li></ul><p>宽松一致性模型将对共享变量的同步操作分为获取和释放。</p><h3 id="5-7-Cross-Cutting-Issues">5.7 Cross-Cutting Issues</h3><h4 id="Compiler-Optimization-and-the-Consistency-Model">Compiler Optimization and the Consistency Model</h4><p>编译器不能交换对不同变量的读和写之间的顺序，因为这可能改变程序的语义。这极大地限制了编译优化的效果。</p><h4 id="Using-Speculation-to-Hide-Latency-in-Strict-Consistency-Models">Using Speculation to Hide Latency in Strict Consistency Models</h4><p>可以在处理器内部将访存指令乱序执行，按序提交，在不符合内存一致性的操作出现时进行回滚。</p><h4 id="Inclusion-and-Its-Implementation">Inclusion and Its Implementation</h4><p>包含式的Cache可以减少一致性协议的通讯开销，但不同层次的Cache有不同的块大小，增加了复杂度。</p><h4 id="Performance-Gains-From-Multiprocessing-and-Multithreading">Performance Gains From Multiprocessing and Multithreading</h4><p>初步分析超线程技术的性能优势。</p><h3 id="5-8-Putting-It-All-Together-Multicore-Processors-and-Their-Performance">5.8 Putting It All Together: Multicore Processors and Their Performance</h3><h4 id="Performance-of-Multicore-Based-Multiprocessors-on-a-Multiprogrammed-Workload">Performance of Multicore-Based Multiprocessors on a Multiprogrammed Workload</h4><p>介绍了IBM Power8、Intel Xeon E7和Fujitsu SPARC64 X+。</p><h4 id="Scalability-in-an-Xeon-MP-With-Different-Workload">Scalability in an Xeon MP With Different Workload</h4><p>分析了Java服务器、虚拟机和科学计算三种负载在多核下的表现。</p><h4 id="Performance-and-Energy-Efficiency-of-the-Intel-i7-920-Multicore">Performance and Energy Efficiency of the Intel i7 920 Multicore</h4><p>多核和超线程将能效比的负担更多地转移给了程序员。</p><h2 id="Chapter6-Warehouse-Scale-Computers-to-Expoilt-Request-Level-and-Data-Level-Parallelism">Chapter6: Warehouse-Scale Computers to Expoilt Request-Level and Data-Level Parallelism</h2><h3 id="6-1-Introducion">6.1 Introducion</h3><p>WSC的体系结构和服务器的体系结构有很多相似之处，它们都关注性价比、能效比、可靠性、网络带宽和交互式、批处理工作性能。WSC的体系结构也有不同，例如更充分的并行性（数据并行和请求并行），更关注运营开销、选址、低负载时的能效比和规模问题。WSC和HPC、数据中心也有很大不同。</p><h3 id="6-2-Programming-Models-and-Workloads-for-Warehouse-Scale-Computers">6.2 Programming Models and Workloads for Warehouse-Scale Computers</h3><p>MapReduce是WSC上常用的操作，WSC对执行MapReduce的稳定性做了优化。</p><h3 id="6-3-Computer-Architecture-of-Warehouse-Scale-Computers">6.3 Computer Architecture of Warehouse-Scale Computers</h3><p>一个机柜中有40-80台服务器，机柜顶部有交叉开关用以连接不同的机柜。</p><h4 id="Storage">Storage</h4><p>硬盘可以放在机柜中，不同机柜间通过网络互联访问；也可以使用NAS等结构。</p><h4 id="WSC-Memory-Hierarchy">WSC Memory Hierarchy</h4><p>访问本地存储设备、机柜内的存储设备和机柜间的存储设备有不同的带宽和延迟。</p><h3 id="6-4-The-Efficiency-and-Cost-of-Warehouse-Scale-Computers">6.4 The Efficiency and Cost of Warehouse-Scale Computers</h3><p>实践中不会有所有服务器同时处于最高负载的情况，因此可以安全地削减40%的电能供应。</p><h4 id="Measuring-Efficiency-of-a-WSC">Measuring Efficiency of a WSC</h4><p>PUE是所有设备的功耗除以IT装备的功耗，其越大表示WSC的能效比越低。虽然WSC的设计者更关心带宽，但软件和用户日渐关心延迟。体系结构学者提出了SLO的概念，表示绝大部分的请求（例如99.9%）都要在阈值范围内完成。</p><h4 id="Cost-of-a-WSC">Cost of a WSC</h4><p>运营开销称为OPEX，建造开销称为CAPEX。</p><h3 id="6-5-Cloud-Computing-The-Return-of-Utility-Computing">6.5 Cloud Computing: The Return of Utility Computing</h3><p>WSC的单价比起小规模的数据中心更低，但中小企业无法承担分布式WSC的开销，因此云计算成为新趋势。</p><h4 id="Amazon-Web-Services">Amazon Web Services</h4><p>亚马逊云服务能够成功的原因有：虚拟机的支持，低售价，开源软件的支持，无保证的服务等。目前亚马逊提供种类众多的不同性能和优化方向的云服务器实例。使用云服务器最大的优点是按需使用，无需在创业时就将大量资金投入服务器的采购，而是根据企业的发展逐步增加购买的云服务器实例的数量。</p><h4 id="How-Big-Is-the-AWS-Cloud">How Big Is the AWS Cloud</h4><p>目前微软、亚马逊和谷歌在各个大洲都有大量WSC。</p><h3 id="6-6-Cross-Cutting-Issues">6.6 Cross-Cutting Issues</h3><h4 id="Preventing-the-WSC-Network-From-Being-a-Bottleneck">Preventing the WSC Network From Being a Bottleneck</h4><p>大厂正在自研交换机。</p><h4 id="Using-Energy-Efficiently-Inside-the-Server">Using Energy Efficiently Inside the Server</h4><p>电源损耗和低功耗时的能效比仍有提升空间。</p><h3 id="6-7-Putting-It-All-Together-A-Google-Warehouse-Scale-Computer">6.7 Putting It All Together: A Google Warehouse-Scale Computer</h3><h4 id="Power-Distribution-in-a-Google-WSC">Power Distribution in a Google WSC</h4><p>WSC配备UPS甚至发电机。</p><h4 id="Cooling-in-a-Google-WSC">Cooling in a Google WSC</h4><p>利用风扇和水进行散热的系统。</p><h4 id="Racks-of-a-Google-WSC">Racks of a Google WSC</h4><p>UPS是分布式的。</p><h4 id="Networking-in-a-Google-WSC">Networking in a Google WSC</h4><p>谷歌的网络拓扑系统称为Clos。</p><h4 id="Servers-in-a-Google-WSC">Servers in a Google WSC</h4><p>基于Intel Haswell处理器。</p><h4 id="Conclusion">Conclusion</h4><p>现在的WSC更加节能。</p><h2 id="Chapter7-Domain-Specific-Architectures">Chapter7: Domain-Specific Architectures</h2><h3 id="7-1-Introduction">7.1 Introduction</h3><p>摩尔定律和登纳德缩放定律面临终结，领域特定加速器（DSA）成为继续提升计算机性能的重要途径。</p><h3 id="7-2-Guidelines-for-DSAs">7.2 Guidelines for DSAs</h3><ul><li>使用指定的内存区域以减少数据移动。</li><li>将晶体管更多地用于运算单元和内存。</li><li>利用该领域最简单的并行性。</li><li>减少数据类型的大小。</li><li>使用特定领域的语言以方便代码移植。</li></ul><h3 id="7-3-Example-Domain-Deep-Neural-Networks">7.3 Example Domain: Deep Neural Networks</h3><p>机器学习需要大量的数据和算力，目前DNN是机器学习中的热门。</p><h4 id="The-Neurons-of-DNNs">The Neurons of DNNs</h4><p>介绍了神经元、激活函数和隐藏层的概念。</p><h4 id="Training-Versus-Inference">Training Versus Inference</h4><p>介绍了监督学习、反向传播和SGD。</p><h4 id="Multilayer-Perceptron">Multilayer Perceptron</h4><p>MLP是全连接神经网络。</p><h4 id="Convolutional-Neural-Network">Convolutional Neural Network</h4><p>CNN将上一层神经元的输出中临近的部分作为本层神经元的输入，利用空间相关性。</p><h4 id="Recurrent-Neural-Network">Recurrent Neural Network</h4><p>RNN在DNN中增加了状态机。LSTM是目前最流行的RNN。</p><h4 id="Batches">Batches</h4><p>将多个数据一起输入DNN进行训练可以提高效率，这些数据称为一个Batch。</p><h4 id="Quantization">Quantization</h4><p>将浮点数转为定点数进行操作可以节约资源。</p><h4 id="Summary-of-DNNs">Summary of DNNs</h4><p>对于DNN加速的硬件需要矩阵向量乘、矩阵矩阵乘、非线性函数等运算能力。</p><h3 id="7-4-Google’s-Tensor-Processing-Unit-an-Inference-Data-Center-Accelerator">7.4 Google’s Tensor Processing Unit, an Inference Data Center Accelerator</h3><p>TPU的核心是65536个8位的ALU用于计算矩阵乘法。</p><h4 id="TPU-Origin">TPU Origin</h4><p>TPU最初起源于语音识别的需求。</p><h4 id="TPU-Architecture">TPU Architecture</h4><p>TPU是PCIe通道上的协处理器，有CPU发送指令并由DMA搬运数据。</p><h4 id="TPU-Instruction-Set-Architecture">TPU Instruction Set Architecture</h4><p>因为指令由PCIe通道传输，因此遵循CISC风格，没有程序计数器和分支指令，以下五个指令最为常用：</p><ol><li><code>Read_Host_Memory</code></li><li><code>Read_Weights</code></li><li><code>MatrixMultiply/Convolve</code></li><li><code>Activate</code></li><li><code>Write_Host_Memory</code></li></ol><h4 id="TPU-Microarchitecture">TPU Microarchitecture</h4><p>不同的指令有不同的功能部件，可以并行执行。使用脉动运行的方式以减少缓存的读取和写入。</p><h4 id="TPU-Implementation">TPU Implementation</h4><p>大部分面积用于缓存和运算单元，而不是控制逻辑。</p><h4 id="TPU-Software">TPU Software</h4><p>TPU的软件栈与CPU和GPU相同，使用TensorFlow。TPU和GPU一样，使用用户空间驱动和核心驱动，核心驱动只负责内存管理和中断，是轻量级的。用户空间驱动管理TPU的运行，负责处理数据，将API调用转化为TPU指令等，用户空间驱动经常更新。</p><h4 id="Improving-the-TPU">Improving the TPU</h4><p>提升内存带宽最有效。</p><h4 id="Summary-How-TPU-Follows-the-Guidelines">Summary: How TPU Follows the Guidelines</h4><p>参考<a href="#7-2-Guidelines-for-DSAs">7.2节</a>。</p><h3 id="7-5-Microsoft-Catapult-a-Flexible-Data-Center-Accelerator">7.5 Microsoft Catapult, a Flexible Data Center Accelerator</h3><p>微软将FPGA连接至PCIe通道，并使用专用网络连接不同的FPGA。</p><h4 id="Catapult-Implementation-and-Architecture">Catapult Implementation and Architecture</h4><p>数据中心中一半的机柜配备Catapult加速板，低速的网络将一个机柜内的48个FPGA连接起来。</p><h4 id="Catapult-Software">Catapult Software</h4><p>开发者需要编写RTL来使用FPGA。</p><h4 id="CNNs-on-Catapult">CNNs on Catapult</h4><p>微软提供了一个可配置的CNN加速器作为Catapult的应用。</p><h4 id="Search-Acceleration-on-Catapult">Search Acceleration on Catapult</h4><p>使用FPGA可以加速Bing搜索引擎的文档排序功能。</p><h4 id="Catapult-Version-1-Deployment">Catapult Version 1 Deployment</h4><p>微软先进行了小规模的测试。</p><h4 id="Catapult-Version-2">Catapult Version 2</h4><p>第二版将FPGA放置在CPU和NIC之间，以利用原有网络拓扑。</p><h4 id="Summary-How-Catapult-Follows-the-Guidelines">Summary: How Catapult Follows the Guidelines</h4><p>参考<a href="#7-2-Guidelines-for-DSAs">7.2节</a>。</p><h3 id="7-6-Intel-Crest-a-Data-Center-Accelerator-for-Training">7.6 Intel Crest, a Data Center Accelerator for Training</h3><p>Crest的目标是加速DNN的训练。</p><h3 id="7-7-Pixel-Visual-Core-a-Personal-Mobile-Device-Image-Processing-Unit">7.7 Pixel Visual Core, a Personal Mobile Device Image Processing Unit</h3><p>Pixel是可编程、可扩展的图像处理和计算视觉加速器。</p><h4 id="ISPs-the-Hardwired-Predecessors-of-IPUs">ISPs, the Hardwired Predecessors of IPUs</h4><p>几乎所有移动设备中都有ISP，它可以处理拍摄的照片，消除噪点，提升图像质量。但ISP的可扩展性不足。</p><h4 id="Pixel-Visual-Core-Software">Pixel Visual Core Software</h4><p>Pixel将ISP中的核心流水线转化为了有向无环图，Pixel程序使用Halide语言编写。</p><h4 id="Pixel-Visual-Core-Architecture-Philosophy">Pixel Visual Core Architecture Philosophy</h4><p>Pixel需要将功耗降到最低，除了<a href="#7-2-Guidelines-for-DSAs">7.2节</a>提到的原则，以下原则也指导了Pixel的设计：</p><ul><li>二维比一维好。</li><li>近比远好。</li></ul><p>Pixel的可扩展性体现在以下方面：</p><ul><li>使用二维的PE实现二维的SIMD架构。</li><li>每个PE都有单独的缓存。</li><li>NESW四个方向都可以作为数据输入。</li></ul><h4 id="The-Pixel-Visual-Core-Halo">The Pixel Visual Core Halo</h4><p>使用简化的PE来处理边缘处的留白。</p><h4 id="A-Processor-of-the-Pixel-Visual-Core">A Processor of the Pixel Visual Core</h4><p>Pixel组成的处理器包含2个或更多Pixel核心，使用mesh网络连接，包含访存单元SHG，标量流水SCL，单独的指令内存和DMA。</p><h4 id="Pixel-Visual-Core-Instruction-Set-Architecture">Pixel Visual Core Instruction Set Architecture</h4><p>和GPU一样，Pixel采用两趟编译的风格，先将目标语言（Halide）编译成vISA，再将vISA编译为pISA。vISA是超长指令字风格，对于图像大小、寄存器分配和内存大小没有限制。</p><h4 id="Pixel-Visual-Core-Example">Pixel Visual Core Example</h4><p>vISA代码实例。</p><h4 id="Pixel-Visual-Core-Processing-Element">Pixel Visual Core Processing Element</h4><p>halo的额外开销相对较小。</p><h4 id="Two-Dimensional-Line-Buffers-and-Their-Controller">Two-Dimensional Line Buffers and Their Controller</h4><p>LB负责存储不同Kernel之间的中间结果。</p><h4 id="Pixel-Visual-Core-Implementation">Pixel Visual Core Implementation</h4><p>初代的Pixel是一个单独的芯片。</p><h4 id="Summary-How-Pixel-Visual-Core-Follows-the-Guidelines">Summary: How Pixel Visual Core Follows the Guidelines</h4><p>参考<a href="#7-2-Guidelines-for-DSAs">7.2节</a>。</p><h3 id="7-8-Cross-Cutting-Issues">7.8 Cross-Cutting Issues</h3><h4 id="Heterogeneity-and-System-on-a-Chip-SOC">Heterogeneity and System on a Chip (SOC)</h4><p>IP化的趋势。</p><h4 id="An-Open-Instruction-Set">An Open Instruction Set</h4><p>DSA通常需要与CPU绑定，也就是与特定指令集绑定。</p><h3 id="7-9-Putting-It-All-Together-CPUs-Versus-GPUs-Versus-DNN-Accelerators">7.9 Putting It All Together: CPUs Versus GPUs Versus DNN Accelerators</h3><p>利用6个DNN测试集比较Intel Haswell，NVIDIA K80和TPU的性能。</p><h4 id="Performance-Rooflines-Response-Time-and-Throughput">Performance: Rooflines, Response Time, and Throughput</h4><p>将计算密度重新定义为每次读取权重后的运算次数，可以用Roofline模型展示DNN的计算性能。由于响应时间的限制，CPU和GPU并不能达到理想的吞吐量。</p><h4 id="Cost-Performance-TCO-and-Performance-Watt">Cost-Performance, TCO, and Performance/Watt</h4><p>TCO是衡量服务器芯片价格的较好指标。</p><h4 id="Evaluating-Catapult-and-Pixel-Visual-Core">Evaluating Catapult and Pixel Visual Core</h4><p>Pixel性能较低。</p><h2 id="写在最后">写在最后</h2><p>虽然有体系结构的基础，并实现过超标量乱序处理器核，但本书阅读下来收获非常大。一是对“量化研究”有了更深的理解；二是补充了自己的知识面，例如以前了解不深的向量指令集扩展和特定领域加速器。另外也震惊于本书的前卫，例如书中对HBM、虚拟化技术等的叙述。但是本书也有一些地方阐述的不够全面，例如虚拟化技术和内存一致性模型等，想要对特定内容加深理解还需要阅读更多参考资料。</p>]]></content>
    
    
    <categories>
      
      <category>读书笔记</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>关于《深入理解计算机系统》</title>
    <link href="/2022/10/20/"/>
    <url>/2022/10/20/</url>
    
    <content type="html"><![CDATA[<p>书架上一直放着《深入理解计算机系统》（CSAPP）一书，今天才有空拿出来看。从前言、目录和第一章可以看出它是一本计算机科学的导论书籍。想起我校本科的计算机科学导论课程，它是全体本科生的必修课，所以更加注重“计算思维”的培养。若能将计算机系的导论课程教材换为CSAPP，我觉得会对后续的专业课程学习提供很大的帮助。</p><p><img src="/2022/10/20/pic.png" alt="课程"></p>]]></content>
    
    
    <categories>
      
      <category>读书笔记</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>对体系结构知识体系的理解</title>
    <link href="/2022/09/22/"/>
    <url>/2022/09/22/</url>
    
    <content type="html"><![CDATA[<p>胡老师上课时提到，体系结构研究者要“上知天文，下知地理”。近几日经常思考要不要系统地学习电路方面的知识，但限于时间和精力没有开始学习，趁现在有空整理一下我理解的体系结构方面的知识体系，供自己参考。</p><p><img src="/2022/09/22/pic.png" alt="知识体系"></p>]]></content>
    
    
    <categories>
      
      <category>体系结构学习</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>历时10个月合作开发超标量乱序处理器核的一些感想</title>
    <link href="/2022/09/12/"/>
    <url>/2022/09/12/</url>
    
    <content type="html"><![CDATA[<h2 id="Overview">Overview</h2><p><a target="_blank" rel="noopener" href="https://gitee.com/liangliang678/ZhengLiu">“争流”处理器</a></p><p><img src="/2022/09/12/overview.png" alt="Overview"></p><h2 id="Timeline">Timeline</h2><p><img src="/2022/09/12/timeline.png" alt="Timeline"></p><h2 id="准备阶段">准备阶段</h2><p>我在本科的体系结构课程中阅读过胡伟武老师的《计算机体系结构》，在体系结构研讨课中按照汪文祥老师的《CPU设计实战》完成了一个五级流水处理器核。之后我也和三位同学组队参加了“龙芯杯”竞赛，为体系结构研讨课中的处理器核添加Cache和双发射支持。</p><p>在毕设开始阶段我们与汪文祥老师沟通，在他的建议下学习了姚永斌的《超标量处理器设计》，对乱序超标量处理器的总体架构，SRAT、ARAT、发射队列、ROB、重命名模块等关键部件有了一定的理解。另外，组内的师兄师姐正在尝试使用<a target="_blank" rel="noopener" href="https://spinalhdl.github.io/SpinalDoc-RTD/master/index.html">SpinalHDL</a>进行开发，我们在老师的建议下也学习了<a target="_blank" rel="noopener" href="https://spinalhdl.github.io/SpinalDoc-RTD/master/index.html">SpinalHDL</a>。</p><p>该项目是三个人合作完成，所以我们采用前后端分离式设计，将整个项目分为前端、后端和访存子系统三个部分，我负责访存子系统部分。我们按照自己的理解画出了顶层设计方案，并对各个模块的设计进行了初步阐述。虽然架构图画的非常简陋，但我们开发过程中基本参考此图。</p><center><img src="/2022/09/12/draft.png" width="70%"></center><h2 id="代码工作">代码工作</h2><p>总体来说，有Verilog代码经验的情况下，SpinalHDL上手较快，且SpinalHDL开发明显快于Verilog。访存子系统代码量较其他两部分少，我率先完成了代码工作。在等待处理器核拼接的时间里，我参考SpinalHDL的文档设计了一些简单的testbench对访存子系统进行了初步验证，修复了不少问题。</p><p>由于毕业论文和答辩的压力，我们决定先不加入例外处理的逻辑。三部分代码拼接完成时，<a target="_blank" rel="noopener" href="https://gitee.com/loongson-edu/chiplab">chiplab</a>正在集成difftest测试环境。所以我们先设计了简单的testbench对整个处理器核进行了初步的验证，修复若干问题后，处理器核终于可以退休第一条指令。</p><h2 id="测试工作和性能调优">测试工作和性能调优</h2><p>我们首先使用chiplab中只包含用户态指令的测试程序对处理器核的所有用户态指令进行测试，调通后我们开始调试运行只包含用户态指令的coremark基准性能测试程序。第一次调通coremark时，我们的分数只有2.4分/MHZ，低于chiplab中的五级流水处理器核。</p><p>为了毕业论文和答辩，我们优先进行了性能调优。经过分析，性能瓶颈主要在于前端的分支预测正确率过低，前端采用了BTB、TAGE、ITTAGE等多种预测器，运行coremark的分支预测正确率应该在90%左右，所以问题应该在分支预测器的性能bug。由于直接使用coremark修复分支预测器较为困难，我们编写了一些典型的多重for循环，运行后对照波形分析并修复分支预测器的问题。经过修复，前端的分支预测正确率有了大幅提高，但TAGE的原理较为复杂，我们没能找到很好的测试方法。</p><p>在毕设答辩前夕，我发现过多的访存违例对处理器的性能造成了很大的影响，于是紧急添加了waittable结构，完成后运行coremark的分数达到了3.6分/MHz，较好地完成了既定目标。</p><h2 id="启动Linux内核">启动Linux内核</h2><p>毕设答辩后北京的疫情开始变得严重起来，居家办公模式下工作效率降低不少。我们首先使用chiplab中包含所有指令的测试程序对处理器核的中断和例外功能进行测试，终于在暑假前完成了这一工作。回家后工作效率趋近于0，不过我们的验证工作也陷入了困境。由于SpinalHDL编译生成的Verilog代码非常膨胀，代码量达到了80万行以上，导致verilator的仿真非常慢，运行2天以上才能遇到bug，经计算需要15天左右才能仿真启动Linux内核，debug效率过低。</p><p>在老师和学长的建议下，我们首先使用了一些小技巧将编译生成的Verilog的代码量降低到50万行以下，然后使用chiplab中的随机指令测试验证TLB相关内容和边角情况。仿真运行Linux内核在进入用户态后才会出现TLB缺失等例外，使用随机指令测试验证该内容可以提高验证效率。不过在调通第一组测试后，其他的201组测试基本没有出现问题。</p><p>完成随机指令测试后，我们继续尝试启动Linux内核，但无奈我的电脑稳定性不行，运行2~3天后电脑会自动重启，一直没能找到很好的解决办法。回到学校后，我使用Ubuntu系统进行仿真，对仿真过程进行了一些优化，并启用多线程仿真，将仿真启动Linux的时间缩短到了2.5天。在修复了数个bug后，终于在9月初启动了Linux内核。</p><p><img src="/2022/09/12/linux.png" alt="Linux"></p><h2 id="总结和感想">总结和感想</h2><p>虽然只是一个玩具级别的处理器核，但设计该处理器核帮助我快速掌握了如今主流的超标量乱序处理器核的结构，为研究生阶段的学习做好了准备。另外我也意识到了技能树上还有很多待点亮的技能点，包括敏捷设计的思想、面向对象的思想、多核设计和一致性问题的理解、分离式前端等前沿技术的了解、EDA工具的使用等等。希望在研究生阶段可以学到这些技能。</p><p>回到项目本身，在该项目的开发中，我真正体会到了验证工作的复杂性。difftest的使用还是大大加快了我们的验证进度，相比于两年前龙芯杯的环境，我们的debug效率有了大幅的提高，尤其是启动Linux内核过程中完全不需要了解内核的代码，只靠difftest就能定位RTL的错误，减轻了我们的负担。“磨刀不误砍柴工”，我们的开发环境还是相对简陋，组内的师兄师姐也在探索能够实现更快迭代的开发环境。</p><p>项目的进度远落后于预期，我觉得主要原因有：</p><ul><li>超标量乱序架构本身较为复杂，我们缺乏相关经验</li><li>指令测试覆盖不够完整，很多指令未测试边角情况</li><li>仿真速度慢，未使用断点机制</li></ul>]]></content>
    
    
    <categories>
      
      <category>体系结构学习</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>新国立访学笔记——回国篇</title>
    <link href="/2021/12/15/"/>
    <url>/2021/12/15/</url>
    
    <content type="html"><![CDATA[<p>因为大使馆要求确诊冠病后需要观察3.5个月才允许回国，而部分航空公司又有拒载的情况，所以直到上飞机前都非常焦虑和紧张，生怕自己回不去。加上新加坡眼上很多网友分享自己的惨痛经历，让我更加紧张。不过好在我和我的朋友们都顺利回国。</p><h2 id="申请绿码">申请绿码</h2><p>三天前的检测我在金文泰的Parkway Shenton做，诊所人很多，检测的时候只捅了一边鼻子，而且也比较浅。检测结果超过24h才出来，而且也不上传到HealthHub，挺无语的。两天前的检测我在荷兰村的来福士做，人不是很多，而且有专门做检测的区域，感觉挺专业。检测结果当天傍晚就出了，而且在HealthHub上也可以查询。</p><p>拿到两份报告后按要求申请绿码，大概20分钟后就审核完毕。第一次审核人员嫌我健康监测的字写的不清晰，未通过；重写后第二次审核通过。</p><h2 id="离开新加坡">离开新加坡</h2><p>到机场后排队值机，先测温和检查绿码，值机时再次检查绿码，然后填写海关健康申报并截图保存。通过新加坡海关时不会敲章，然后在里面可以买伴手礼/奢侈品。大概起飞前90分钟可以通过安检到达候机区。上飞机时乘务员也会测量体温。</p><p>大概40%的旅客穿了防护服，我没有穿。飞机上也会发面包，不过我没有吃。看有些人穿着防护服却摘口罩吃面包，疑惑，你这样搞穿防护服还有什么意义？</p><h2 id="到达上海">到达上海</h2><p>飞机10:00pm左右到达停机位，大概过了45min才下飞机（大概是海关要先带曾确诊人员/有症状旅客下去，我也不清楚）。下飞机后填写采样同意书，进行核酸检测，通过海关就可以按目的地等待大巴车送至隔离点。前往浙江的旅客很少，我是最后一批，和一位新加坡人共2个人一辆大巴车。大概一个多小时后到达金山区的隔离酒店，大概2:30am安顿好。</p><h2 id="隔离">隔离</h2><p>我选择了3+11的隔离模式，在上海隔离3天后转运至嘉兴隔离11天。</p><p>在上海隔离的酒店在金山区，可以快递，不允许外卖熟食奶茶，可以外卖生活用品和包装食品。房费230/天，餐费60/天或100/天。100元每天的餐标如下，的确价格高了些，不过就3天勉强能吃。房间的话就是如家，不过设施比较陈旧了，花洒漏水，毛巾架也锈迹斑斑。</p><p><img src="/2021/12/15/%E4%B8%8A%E6%B5%B71.jpg" alt="上海"><br><img src="/2021/12/15/%E4%B8%8A%E6%B5%B72.jpg" alt="上海"><br><img src="/2021/12/15/%E4%B8%8A%E6%B5%B73.jpg" alt="上海"></p><p>在嘉兴隔离的酒店在海宁市，可以快递和外卖小件生活必需品，其他一律不允许。房费200/天，餐费80/天。真是没有对比就没有伤害，房间的面积是上海的隔离酒店的两倍还不止，房费却比上海还便宜；餐费比上海便宜的情况下菜好了很多。另外可以点酒店餐饮部的菜，也自带小卖部，价格虽然高了点，但也可以理解。在嘉兴的隔离算是体验最好的了。</p><p><img src="/2021/12/15/%E5%98%89%E5%85%B41.jpg" alt="嘉兴"><br><img src="/2021/12/15/%E5%98%89%E5%85%B42.jpg" alt="嘉兴"><br><img src="/2021/12/15/%E5%98%89%E5%85%B43.jpg" alt="嘉兴"><br><img src="/2021/12/15/%E5%98%89%E5%85%B44.jpg" alt="嘉兴"><br><img src="/2021/12/15/%E5%98%89%E5%85%B45.jpg" alt="嘉兴"></p><p>回到兰溪就是噩梦的开始，我最大的错误就是选择了一个小县城作为我的入境目的地。浙江省的政策是14天集中隔离+7天居家隔离+7天日常健康监测，刚开始社区通知我的是后两个7天为+7天集中隔离+7天日常健康监测。虽然我符合居家隔离的条件，但反正加码也是司空见惯了，这种程度的加码尚可以理解。但是入住兰溪市国际大酒店后酒店工作人员告诉我需要在这呆14天，我随即向社区工作人员求证，她表示政策有变化，我返回兰溪的的前一天开始收到金华通知，两个+7天都需要集中隔离。不过随后隔离群里有人指出同属于金华的义乌市还是+7天集中隔离+7天日常健康监测，等于说是兰溪市自己将第二个+7的日常健康监测加码为了集中隔离。总结如下：</p><ul><li>省里：14天集中隔离+7天居家隔离+7天日常健康监测</li><li>市里：14天集中隔离+7天集中隔离+7天日常健康监测</li><li>县里：14天集中隔离+7天集中隔离+7天集中隔离</li></ul><p>好在在兰溪隔离并不需要自费，房间和上海隔离的酒店差不多，但是伙食好了不少；而且已经在家门口了，也可以让家人送点生活用品，比较方便。没想到兰溪市的魔幻操作不止于此。在第6天（总计第20天），国际酒店通知我们需要马上转移到郊区的一家酒店，国际大酒店需要清空用于隔离上虞转移过来的人。也不知道为什么不安排上虞的人住郊区，要大费周章把我们转运走，转运本身就有很大的风险，而且我们没有预想到还要转移，都让家里人送了很多生活用品。</p><p>转运没有大巴车，全程用两辆救护车进行，大家饿着肚子等到晚上7点。一辆救护车要坐4个人，加上境外回来行李较多，非常拥挤。到了新的隔离酒店后，境外返回的人住在8楼，没有电梯，我搬了3趟才将所有行李搬上楼，期间还发现有一个袋子落在旧的隔离酒店，已被集中处理，好在没有什么重要物品。新的隔离酒店是一家新装修好的酒店，我检查了一下我的房间，除了地上有比较多的石灰等装修造成污渍，烧水壶中还有剩余的水外，其他都还算正常，床上三件套也比较干净。但不是每个人都那么幸运了，有的人房间里还有上一个人留下的泡面在桌上，有的人房间里还有上一个人喝过的茶在杯子里，有的人房间里还有上一个人的头发在床单上，有的人房间里还有上一个人的排泄物在马桶里。这不免让人担心，连卫生都如此之差，他们真的做好消杀工作了吗？其实他们接到通知后半小时我们就被转移过来了，根本没有时间做充足的打扫和消杀工作。我连忙拿出酒精进行消毒。非常认同群友的一句话：“在国外没感染在家门口不要有事到时候又讲境外输入。”</p><p>由于我们来的突然，酒店也没有准备好，房间内没有凳子，我的房间里有一整箱电视遥控器，WiFi也是有信号没网络。第二天工作人员紧急采购了些凳子给我们，在群友的要求下工作人员也取走了我房间的遥控器分发给大家，但网络问题一直没有得到解决，这几天只能使用流量。最后也算是在2021年的最后一天解除隔离。</p><p>总结一下：在上海的隔离用一个词总结就是“严格”，24小时都有人坐在走廊上看着，体温计也要医护人员来看；在嘉兴的隔离用一个词总结就是“服务”，大家都很友善，工作人员很热情；在兰溪的隔离用一个词总结就是“形式”。</p>]]></content>
    
    
    <categories>
      
      <category>访学笔记</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>新国立访学笔记——疫情篇</title>
    <link href="/2021/12/14/"/>
    <url>/2021/12/14/</url>
    
    <content type="html"><![CDATA[<p>在新加坡的四个月赶上了新加坡政府决定与冠病共存，疫情可以说是每日生活中最重要的部分之一。</p><h2 id="8月">8月</h2><p>在前往新加坡前的一个礼拜，新加坡疫情反弹，每日新增病例破百，政府的解封计划也推迟进行。在刚到达新加坡的一周，所有餐厅和小贩中心禁止堂食（但学校食堂除外），还是比较不方便。不过新加坡快速控制了疫情，从8月10日起进入高警戒解封第二阶段，允许完成疫苗接种的人五人一组在餐厅堂食，允许所有人两人一组在小贩中心堂食。</p><p>关于“完成疫苗接种者”的判断，卫生部的标准是Ⅰ.在新加坡接种两剂疫苗14天后；Ⅱ.在海外接种两剂疫苗并在新加坡完成抗体检测后。于是我前往诊所做了抗体检测，检测阳性后在卫生部的HealthHub上可以查询到接种记录。在新加坡进出公共场所需要使用TraceTogether登记，疫苗状态也会显示在TraceTogether中，不过TraceTogether要在八月底才能接入海外疫苗接种数据，在八月我暂时还不能在TraceTogether上查询疫苗接种记录。</p><p><img src="/2021/12/14/%E7%96%AB%E8%8B%97.jpg" alt="疫苗接种记录"></p><p>各个餐厅对这项政策执行的情况也大有不同。部分餐厅只要提供“疫苗接种凭证”即可，就算是中国的凭证也行。部分餐厅要求在HealthHub或TraceTogether上的查询结果。极少部分餐厅必须要TraceTogether上的查询结果，HealthHub都不行。不过在八月底TraceTogether上即可成功查询。</p><p><img src="/2021/12/14/TT.jpg" alt="TT"></p><p>在公共场合大家都会带着口罩，这点还是比较让人放心。另外，虽然小贩中心允许堂食，但我感觉人太多，人流量也比较大，我一般选择外带回家吃。</p><p>另外，NUS也作为试点要求所有学生和职员进行ART自助快速检测，学校免费提供检测盒。已完成疫苗接种且居住在校外的学生每20个在校日检测一次。</p><h2 id="9月">9月</h2><p>实施高警戒解封措施以来，新加坡的疫情情况急转直下，但政府表示解封计划暂不调整。9月10日全岛每日新增超过500例，9月18日全岛每日新增超过1000例，9月底每日新增接近3000例。新加坡的疫苗接种率已经超过80%，但大规模放开的情况下还是挡不住疫情的爆发。</p><p>当然我也是比较担心被感染。一来在美国访学的同学被感染后出现味觉嗅觉问题，显然新冠不是“感冒”；二来感染后IgM会阳性一段时间，回国也许受到影响。原来我计划每周都出门旅游一天，9月中旬也因担心疫情旅游计划暂停。9月中旬以来我也只在需接种疫苗才能堂食的餐厅（例如学校食堂）堂食，在小贩中心则选择打包回家吃。</p><p>在九月底新加坡政府终于调整了解封措施，将堂食的人数从5人一组降至2人一组，并对办公场所等政策做出调整。NUS方面也将ART自助快速检测的频率增至每周一次。不过每日新增依然居高不下。</p><h2 id="10月">10月</h2><p>10月1日新加坡卫生部公布了“疫情地图”，幸运的是我住的小区所在地区和学校所在地区都为“0-10例”，相对比较安全。</p><p>尽管MOH已经收紧了政策，但每日新增依然居高不下，保持在每日3000例左右，另外每日的死亡病例也基本超过10例。另一方面我关注了中国驻新加坡大使馆的微信公众号，了解到如果确诊新冠肺炎，需要在康复后观察3个月才能回国。这就意味着我若在此时被感染，不仅要在新加坡过年，而且会面临学生签证过期的情况下非法滞留在新加坡的风险（不知道大使馆对这种情况有何解决方案）。说实话在了解这项政策后我连续几天睡不好，发展到现在感染冠病甚至已经是一个概率问题了，也就是说我既然在新加坡，就有一定的概率回不了家，非法滞留在这。在看到《前维和军人脑出血加染冠病，贫病交加受困狮城》一文后更是感到失望。</p><p>在十月下旬我还出现了鼻塞的症状，当时真的非常紧张，感觉自己随时可能要在这过年。但在每周的ART自助检测中我都测出阴性，另外几个礼拜以来也没有出现其他症状，所以我相信只是一般的感冒或者鼻炎。我觉得从这时起我的心理问题比身体问题要严重的多，当我开始担心疫情的时候，就会感觉自己哪都不舒服，感觉自己得了冠病；但当我开始做其他事情，又感觉自己身体很好，没什么异常。</p><p>不过为了缓解焦虑我买了20个N95口罩，一些防护面罩和一个额温枪。我想我能做的只有更注意个人卫生，少出门，出门时尽量不要摘口罩喝水。到家或者在食堂堂食，摘口罩前先洗手或者使用消毒液。希望能在一个多月后顺利回国。</p><h2 id="11月">11月</h2><p>说实话疫情发展到现在，我对每日的确诊病例数已经麻木了，只是一个数字罢了。8月的时候还在说新增破百疫情严重，现在看着每天3千的新增心里却毫无波澜，在某一天看到新增5千才会感慨下疫情严重。另一方面，大使馆也收紧了回国政策，新增一次核酸检测要求，并在之后发文表示“误诊按确诊处理”。看来成功回国越来越像一个概率问题了。</p><p>学期的最后一周Week13我最后一次前往学校图书馆自习和在学校食堂吃饭，Week13的周末前往各处买了送给国内朋友的纪念品和礼物，之后我打算宅在家里两个多礼拜，正好尝试下自己做饭。一来是响应大使馆行前14天非必要不出门的要求，二来也是想让自己更安心。祈祷自己能在几个礼拜后顺利回国。说实话，除了祈祷你还能做什么？</p><p>十一月底新加坡的疫情形势好转，每日新增大约控制在1000例，但omicron毒株的出现又让形势变得不确定。好在我两次检测正常，拿到了大使馆的绿码并顺利回国，之后的形势也与我无关了。果然之前的一切焦虑都是白担心，真不错。</p>]]></content>
    
    
    <categories>
      
      <category>访学笔记</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>新国立访学笔记——生活篇</title>
    <link href="/2021/12/13/"/>
    <url>/2021/12/13/</url>
    
    <content type="html"><![CDATA[<h2 id="在公寓">在公寓</h2><p>公寓对面有菜市场和熟食中心，FairPrice和ColdStorage也不算太远，FairPrice附近有KFC和麦当劳，ColdStorage位于荷兰村非常繁华，总的来说还是比较方便。一般在家时我选择到对面小贩中心买饭带回来吃。我也在最后两周自己买菜做饭。去购物时也偶尔在KFC和麦当劳堂食。偶尔我们也会在家/在小贩中心/在餐厅聚餐。</p><p><img src="/2021/12/13/%E5%B8%82%E5%9C%BA.jpg" alt="市场"></p><p>实测从公寓大约8分钟走到Farrer Road MRT，坐地铁12分钟到达Kent Ridge MRT，共计20分钟，所以我比较喜欢去学校自习和吃饭。</p><h2 id="在学校">在学校</h2><p>在Kent Ridge MRT可以坐免费的校内穿梭巴士到达学校各处，非常方便。</p><p>有了国科大作为对比，NUS的食堂真是又多又好吃。我尝试了Flavours(UTown)，Fine Food(UTown)，Frontier(Science)，Techno Edge(Engineering)，Central Square(YIH)。PGP的食堂因为疫情管控措施没有机会尝试。一般每个食堂都有：中餐，西餐，意大利面，沙拉，素食，鸡排，鸡饭，酿豆腐，麻辣香锅，面条。Utown的食堂普遍比其他食堂贵一些，不过环境也会好一些。</p><p><img src="/2021/12/13/%E8%B4%A1%E8%8C%B6.jpg" alt="食堂内的贡茶"></p><p>NUS的图书馆和自习室很多，受疫情影响开放的座位有限，在期中和期末考试前若下午前往自习可能会找不到位置。我比较喜欢的自习室是Utown ERC，楼顶、二楼和一楼都有自习室，一楼PC和MAC机房也有不少自习的位置；若需要讨论可以在二楼室外的桌子坐着，也有不少插座可以使用。若选择不去Utown，我一般在Central Library/Chinese Library自习。</p><h2 id="Daily-Routine">Daily Routine</h2><p>在前两个礼拜我还偶尔早起去学校吃个早饭，但对我来说没有早课根本不可能每天早起！所以后面除了单周周四12点有研讨课会稍早起床前往学校吃早饭外，再也没有吃过早饭……</p><p>我会在每周星期一至星期四前往学校，尽管大部分课程在线通过Zoom进行，但毕竟机会难得而且我只在NUS学习4个月，所以尽量多前往学校。一般中饭时间前往学校，在食堂吃完中饭后找地方自习，自习到晚饭时间，吃完晚饭后回家。</p><p>三天的周末我会用一天来旅游。在学期中的最后几个礼拜因为疫情更加严重所以我选择周四也在家里自习，所以一周只去三天学校。在回国前两周，也就是Reading Week和Exam Week，我选择一直呆在家里减少风险。</p><h2 id="文化">文化</h2><p>其实在来新加坡之前我不知道新加坡的人口中3/4都是华人，很多人都会说中文。语言方面年长的华人中文都讲的比较好，年轻人可能中文非常一般；英文的话年长者就讲的不太好，但年轻人其实都算是native speaker。不过这边的中文和我们的中文有一些使用上的不同，口音也有一点区别。英文方面新加坡人其实讲的是singlish。刚开始时其实我根本听不懂singlish，但慢慢也就习惯了，甚至觉得完全没有口音？</p><p>因为在NUS选了一门新加坡社会相关的人文课，在小组合作中和本地学生也有比较多的讨论，所以我对新加坡的教育、种族和谐、社区等等也算有些了解和思考。不过我觉得值得在这讲的应该是种族和谐问题。新加坡沿用殖民政府的CMIO分类，将新加坡人分为华人、马来人、印度人和其他。所以公共节假日包含了各个民族的传统节日。本地华人的文化和中国还是很相似的。（不过说实话我觉得表面上和谐，很多新加坡人心里还是不希望和其他种族的人走得太近。）</p><h2 id="饮食">饮食</h2><p>新加坡全岛各地都有小贩中心，所以对于不会做饭的人来说吃饭问题还是非常好解决的。不过外卖配送费往往需要4SGD元以上，所以外卖还是不如国内友好。因为地处热带所以新加坡人每餐都喝饮料，从老人到小孩都喝咖啡和美禄或者是拉茶，当然年轻人也喝很多奶茶。每个小贩中心都会有好几家饮料店。</p><p>早餐的话饮料档口有面包咖啡，也有卖粥和油条的档口。正餐方面一般有饭菜档口、煮炒档口、肉挫面/叻沙、鸡饭，还有一些我不太会尝试的清真档口和印度菜档口。如果是比较大型的小贩中心或者学校食堂，还会有酿豆腐、西餐、石锅拌饭等等。总体来说是比较符合中国人胃口的。</p><p>当然商场里面也有火锅、中餐、酒吧等等，和国内的商场差不多。不过在外面吃饭（小贩中心和咖啡店除外）往往很贵。</p><h2 id="关于支付方式">关于支付方式</h2><p>这里大多数商家都有扫码支付，而且一个码可以兼容所有支付软件。部分二维码只支持本地的支付方式，例如PayNow和NETS等，需要本地银行卡；也有一些码支持支付宝，支付宝会自动将新币转为人民币结算，汇率和银行差不多甚至还更优惠。另外签证有效期少于6个月的不允许办理本地银行卡，所以若房租/学费不支持支付宝和信用卡的话只能通过电汇，手续费会比较高。</p><p>超市、便利店一般都支持信用卡支付。不同的信用卡的使用方法不同，我带了一张学生卡和一张父母的白金卡：我自己的卡支持swipe/touch/insert全部三种刷卡方式，而父母的卡只支持swipe。我前两个月都在用父母的白金卡，消费时会自动转换为人民币结算，比较方便。使用学生卡的话，我们的学生卡虽宣传可以自动以人民币结算，但只有透支额度支持该特性，余额则需要手动购买外汇后使用，所以在零额度下使用非常不便（仅指工行）。若学生卡有透支额度也是可以方便地使用。另外有些地方虽然支持信用卡，但不支持中国的信用卡（例如地铁卡充值）。最后网购使用信用卡时需要手机验证码，工行的验证码系统有时会重定向错误导致无法支付，建行没有出现过这种情况。</p><p>还是有很多地方不支持支付宝和信用卡（学校食堂/杂货店），所以现金的使用还是比较多的。这里的私营货币兑换公司手续费很高，建议从国内银行换好多带点。</p>]]></content>
    
    
    <categories>
      
      <category>访学笔记</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>新国立访学笔记——学习篇</title>
    <link href="/2021/12/12/"/>
    <url>/2021/12/12/</url>
    
    <content type="html"><![CDATA[<h2 id="课程列表">课程列表</h2><p>刚开始时询问访学办公室，老师表示至少50%是专业课，所以我选择了2门人文课和2门专业课。之后计算机学院告诉我至多选择一门人文课，而此时已经只能退选不能增选了，所以我只选上了3门课。就当是过一个轻松的学期吧，事实也的确是专业课并学不到什么。</p><table><thead><tr><th>课程编号</th><th>课程名称</th></tr></thead><tbody><tr><td>GES1005</td><td>Everyday Life of Chinese Singaporeans: Past &amp; Present</td></tr><tr><td>CS3237</td><td>Introduction to Internet of Things</td></tr><tr><td>CS4223</td><td>Multi-core Architectures</td></tr></tbody></table><h2 id="GES1005">GES1005</h2><p>这是一门人文课，主要讲解新加坡的历史和普通人的生活，所以比较轻松。正课完全是录播的形式，看不看都可以；研讨课共有5节，提前看完阅读材料在课堂时间发言讲自己的看法就可以。因为我完全不了解新加坡的历史和文化，所以还是很认真地看完了所有录像和阅读材料。</p><p>作业和考试方面，第一项是3或4人一组，采访后写两篇故事描写新加坡普通人的每日生活，然后为其中一位受访者拍个3分钟的vlog；第二项是看完一部纪录片后写观后感，个人独立完成。考试也是对特定话题写一篇论文，限时90分钟。所有的故事/论文都是1k词，我之前没有写过那么长的英文作文，英语也不够好经常要用翻译软件，所以写着有些吃力。不过得分还算友好。</p><p>总的来说对我是一门非常有意思的课，队友也很nice。最后取得B+，算是符合预期。</p><h2 id="CS3237">CS3237</h2><p>这门课前半部分讲解机器学习，后半部分讲解IoT系统，实验课会有相应的代码要写。前半部分内容对我来说比较陌生，不过我觉得很有意义，因为对于非机器学习方向的计算机学生，学习一些机器学习还是很有必要的，而这课的前半部分注重于实践应用，对原理性内容简单介绍，非常符合我的需求。后半部分说实话啥也没学到。</p><p>除了实验课以外最主要的就是大作业，四人一组使用TI CC2650 SensorTag实现一个IoT系统。我个人感觉如果是喜欢这方面的话，是个不错的大作业，但我不太喜欢。</p><p>总的来说课程前半部分内容不错，其他我不喜欢。最后取得B+，算是符合预期。</p><h2 id="CS4223">CS4223</h2><p>这门课讲硬件，终于到了我擅长的部分。虽然课程名称是多核，但其实就是体系结构+并行程序设计，所讲的内容我基本上都了解，就当复习巩固。虽有研讨课但教授从来不上。</p><p>一共有5个小测，说实话如果不是我了解这些内容，还是挺痛苦的。NUS的计系学生其实不太了解体系结构，那这样的小测强度还是令人头痛。作业的话第一个就是一个实验，比较简单；第二个是写一个Cache一致性模拟器，还是比较困难的，2人一组，但我基本一人完成。</p><p>最大的问题其实是教授非常业余+拖延。说明天上传资料可能一个礼拜才上传，email从来不回，课件照搬原来上这门课的教授但自己都没理解透彻，经常讲不出。（不想上课就别上啊！！）最后取得A，预期是A+，略有遗憾。</p><h2 id="总结">总结</h2><p>对比国科大的话，我觉得workload方面，NUS的专业课（含lab）比UCAS的专业课（理论课+实验课）小一些，比UCAS的专业课（理论课，无实验课）大一些。人文课比UCAS任务多。另外NUS给人一种“正常的大学”的感觉，不过这主要还是因为UCAS太不正常了。</p>]]></content>
    
    
    <categories>
      
      <category>访学笔记</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>新国立访学笔记——入境篇</title>
    <link href="/2021/12/11/"/>
    <url>/2021/12/11/</url>
    
    <content type="html"><![CDATA[<h2 id="背景">背景</h2><p>笔者在中国科学院大学申请了前往新加坡国立大学的访学项目，访学时间是大四下学期（2021年8月-12月），国科大提供访学的学费和学杂费。本次国科大共有6位同学前往NUS访学。</p><h2 id="前期准备">前期准备</h2><h3 id="办理签证（IPA）">办理签证（IPA）</h3><p>学校会发送一封邮件提供ICA网站的账号和办理指南。提交eForm16后我才发现邮件附件中说明了RACE一栏应该填写CHINESE，而我填写了汉族。本想着按照指南不交申请费一周后申请就会撤回，我再对eForm进行修改，结果一周后什么也没有发生，我还是可以正常交申请费。和ICA和NUS邮件交流后他们让我交申请费继续申请即可，若需要后续更正会联系我。几天后就顺利拿到了IPA，没有被要求提供额外材料。</p><h3 id="申请EA-一些其他材料-购买机票">申请EA &amp; 一些其他材料 &amp; 购买机票</h3><p>其他材料的办理都比较简单，学校发的指南都有详细的说明。购买机票倒是比较tricky。因为疫情的原因，从国内飞往新加坡的航班数量很少，而大多数软件的搜索功能只能搜索某城市-某城市的机票，而不能搜索大陆-新加坡的机票，因此搜索机票就非常麻烦（不过最后发现某软件可以搜索中国到新加坡的机票）。然后非常奇怪的一点是，不同平台的机票是不同的：可能A平台显示X航班余票充足，而B平台显示X航班机票已售罄。总的来说还是要在多个平台之间对比，才能买到心仪的机票。</p><h3 id="申请宿舍-租房">申请宿舍 &amp; 租房</h3><p>今年（2021年）的疫情还是非常严重，新加坡政府征用了PGPR宿舍区的一部分作为隔离场所，让本就困难的宿舍申请雪上加霜。在宿舍申请中，我除了第一次登录申请系统成功外，后续一直显示登录错误，Google了一下发现是后台的技术问题。使用Office of Student Affairs的官方问答社区，到星期五还没有得到回复。最后只能打电话给他们询问，第一次打电话发现我根本听不懂他们的口音，只能到访学办公室让老师帮我询问下这事。最后在星期五下午问题得到了解决。</p><p>不出所料我们一行6个人的宿舍申请都没有成功，只能考虑在外租房。新加坡一般的住房分为两种：组屋（HDB）和公寓（Condo），前者由政府建设，一般没有“小区”的概念，最短租期6个月；后者有私人开发商建设，小区中有一些公共设施，最短租期3个月。除了整套出租外，也可以房间出租，如果房东也住在这套房内，那很可能不能使用厨房等设施；如果房东不住在这套房内，一般所有的租户可以共享厨房。另外新加坡政府规定一套房内不能居住超过6人。</p><p>我一直在propertyguru上寻找房源，微信等中文平台转租比较多，而转租在新加坡是不受法律保障的。开始时我希望整租一套房，一行6个人住在一起也更方便。问了十几套房源后发现房东大都不愿意整租的租期太短。于是我退而求其次，开始找一套房内有多个房间出租的房源。最后找到了CC20 Farrar Road MRT附近小区的一间五居室公寓，其中四个卧室available。在和中介讨论的过程中，房东表示还要考虑下租期的问题。幸运的是最后房东同意租给我们2间master room（带独立卫浴）和1间common room（不带独立卫浴），一共可以住4个人。</p><h3 id="办理visa卡-换取新币">办理visa卡 &amp; 换取新币</h3><p>很多银行都推出了零额度的“大学生信用卡”，我办了一张工商银行的星座系列校园卡，颜值还算不错，我还让父母办了一张建设银行的白金卡，两张都带上以防万一。换取外币需要和银行预约，随后拿现金换外币就行。因为就在新加坡呆四个多月，我可能不会（实际上是不能）办理当地的银行卡，所以多带了一些。</p><h2 id="入境新加坡">入境新加坡</h2><h3 id="在中国">在中国</h3><p>我提前三小时到达了白云机场，排队值机的队伍已经超出了指定的排队区域。大约排了一个小时，成功托运行李，排队期间工作人员会让填写健康声明以及在海关的小程序上申报出境。随后进行安检，通过海关和边检。在过海关时我体温达到了37.5℃，不能通过。当时也挺紧张的，要是过不了海关就全完了，好在休息了一会后体温恢复了正常。</p><p>总结一下，需要打印的文件包括IPA、EA和Offer，当然护照要带好。</p><p><img src="/2021/12/11/%E7%99%BD%E4%BA%91%E6%9C%BA%E5%9C%BA.jpg" alt="白云机场值机"></p><h3 id="在新加坡">在新加坡</h3><p>落地后一路都有指示，不会迷路。在过海关前可以办理电话卡，想着赶紧用上网络，我就在这就办理了。费用是前三个月65SGD，后续每月15SGD，套餐包含40GB流量、300分钟通话和300条短信，赠送一张含5SGD的公交地铁卡。使用下来感觉很多地方的4G信号不太好，不过我要求也不高。过海关时也只用到了护照、IPA、EA和Offer。</p><p><img src="/2021/12/11/%E6%96%B0%E5%8A%A0%E5%9D%A1%E6%B5%B7%E5%85%B3.jpg" alt="新加坡海关"></p><p>随后提取行李+核酸检测，就可以到地下停车库打车到隔离酒店了。在地下停车库可以用打车软件打车，也可以直接坐在那等的出租车。出租车有“普通车”和“高档车”，当时被分配到了一辆“高档车”上，也没多想就上车了，费用还是挺贵的。</p><p><img src="/2021/12/11/%E5%87%BA%E7%A7%9F%E8%BD%A6.jpg" alt="出租车费用"></p><h2 id="入住出租屋-换取STP">入住出租屋 &amp; 换取STP</h2><h3 id="住宾馆">住宾馆</h3><p>从隔离酒店出来后我又在NUS附近住了三天宾馆，因为开始时中介告诉我们将IPA换为STP后才能入住出租屋，我想也就住个两三天宾馆，问题不大，就同意了。不过和我一起租房的同学的航班被取消，只能预约到一个月后的slot换取STP，住一个月的宾馆不太能接受。于是他和ICA、HDB、URA等部门联系，确认是否有条例规定“只有长期准证持有者才能入住出租屋，IPA不被允许”。最后URA表示唯一的guideline是租期，IPA可以作为有效证件入住。提供和URA的电话录音后，中介和房东最后同意我们入住。</p><p><img src="/2021/12/11/%E5%87%BA%E7%A7%9F%E5%B1%8B.jpg" alt="出租屋"></p><h3 id="换取STP">换取STP</h3><p>在ICA四楼取号后等着被叫号即可，整个流程还是很简单的，第一次被叫号后提交材料、采集指纹；第二次被叫号发STP。我按照网上的攻略准备了很多材料，不过我的同学只带了IPA和护照，也顺利拿到了STP。</p>]]></content>
    
    
    <categories>
      
      <category>访学笔记</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>新国立访学笔记——旅游篇Ⅶ：街区&amp;美术馆&amp;历史建筑</title>
    <link href="/2021/11/05/"/>
    <url>/2021/11/05/</url>
    
    <content type="html"><![CDATA[<p>旅游计划的最后一天，打算逛一逛小印度、甘榜格南和牛车水三个著名的街区。但因为疫情之下没有在外面吃饭，也没有进入寺庙参观，所以只用了半个下午就逛完了三个街区，于是前往之前被我移出旅游清单的国家美术馆和一些历史建筑看看。</p><h2 id="小印度">小印度</h2><p>因为昨天是排灯节，所以小印度还是有不错的节日氛围。先进入竹脚中心看了看，一层是湿巴刹和熟食中心，二层是服装店，因为人很多赶紧溜了。沿着实龙岗路一路都是小商铺，主要卖些传统的印度服装以及廉价的短袖、太阳镜等。其中Campbell Lane算是比较传统的一条小巷。维拉马卡里拉曼庙没有想象中的壮观。整条街道还是能感受到印度人聚居区的氛围。</p><p><img src="/2021/11/05/%E5%B0%8F%E5%8D%B0%E5%BA%A61.jpg" alt="小印度"><br><img src="/2021/11/05/%E5%B0%8F%E5%8D%B0%E5%BA%A62.jpg" alt="小印度"></p><h2 id="甘榜格南">甘榜格南</h2><p>刚到的时候感觉和小印度一模一样，难道新加坡的历史街区是一个模子刻出来的？总的来说甘榜格南更像一个正常的商业街区，各种饭店、小商品再加一点艺术气息。</p><p><img src="/2021/11/05/%E7%94%98%E6%A6%9C%E6%A0%BC%E5%8D%971.jpg" alt="甘榜格南"><br><img src="/2021/11/05/%E7%94%98%E6%A6%9C%E6%A0%BC%E5%8D%972.jpg" alt="甘榜格南"></p><h2 id="牛车水">牛车水</h2><p>牛车水算是非常大的一片街区。前几天新闻才报道牛车水美食街因疫情倒闭，不过牛车水的美食还是很多的，除了新加坡最大的熟食中心牛车水大厦，著名的Maxwell熟食中心外，街边也都是中国特色的餐厅，到处都是东北菜和火锅烤肉。另外牛车水的佛堂寺庙真的很多，感觉没走几步就能遇到一个。</p><p><img src="/2021/11/05/%E7%89%9B%E8%BD%A6%E6%B0%B41.jpg" alt="牛车水"><br><img src="/2021/11/05/%E7%89%9B%E8%BD%A6%E6%B0%B42.jpg" alt="牛车水"></p><h2 id="新加坡国家美术馆">新加坡国家美术馆</h2><p>和国家博物馆一样新加坡人/PR/公立学校学生可以免费参观，美术馆包括了很多主题艺术展，每个艺术展的内容很多，比如东南亚艺术展有十多个展厅，也有些展览正在布置无法参观。不过我不太理解艺术，尤其是现代艺术，所以等于是走马观花。</p><p><img src="/2021/11/05/%E7%BE%8E%E6%9C%AF%E9%A6%86.jpg" alt="美术馆"></p><h2 id="历史建筑">历史建筑</h2><p>参观了圣安德烈教堂、旧最高法院、最高法院、维多利亚剧院、旧国会大厦和国会大厦。说是参观实际上就是在门口拍照打卡。其中圣安德烈教堂之前路过过一次，这次找了个更好的角度拍照，旧最高法院其实是国家美术馆的一部分。</p><p><img src="/2021/11/05/%E5%89%A7%E9%99%A2.jpg" alt="维多利亚剧院"><br><img src="/2021/11/05/%E6%B3%95%E9%99%A2.jpg" alt="新旧最高法院"><br><img src="/2021/11/05/%E6%97%A7%E5%9B%BD%E4%BC%9A.jpg" alt="旧国会大厦"><br><img src="/2021/11/05/%E5%9B%BD%E4%BC%9A.jpg" alt="国会大厦"></p><h2 id="费用总计">费用总计</h2><table><thead><tr><th>项目</th><th>费用</th><th>备注</th></tr></thead><tbody><tr><td>饮料</td><td>1.8</td><td></td></tr><tr><td>总计</td><td>1.8</td><td>不含交通费</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>访学笔记</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>新国立访学笔记——旅游篇Ⅵ：乌敏岛</title>
    <link href="/2021/10/23/"/>
    <url>/2021/10/23/</url>
    
    <content type="html"><![CDATA[<p>乌敏岛在新加坡岛的东北侧，樟宜机场北边，需要在Changi Point Ferry Terminal乘坐渡船上岛。建议带现金、防晒霜、驱蚊液、饮用水和中暑药。</p><p>因为离我们的住处很远，所以7点就出发了，先前往亚坤尝尝有名的咖椰吐司，然后继续坐50+站公交车到达码头。前往乌敏岛的渡船是类似于“海上出租车”的类型，人满即走，船也比较破，疫情期间一船最多12人，单程票价4元。大概十点钟到达乌敏岛。</p><p><img src="/2021/10/23/%E4%B9%8C%E6%95%8F%E5%B2%9B%E5%85%A5%E5%8F%A3.jpg" alt="乌敏岛入口"></p><p>入口处就有好几家自行车租赁店和乌敏岛的地图。山地自行车有8元、15元和20元的，我们租了15元的自行车，前齿轮3档后齿轮7档，在乌敏岛完全够用了。也有租赁带车斗的普通自行车甚至两个人能一起骑的自行车的，不过岛上山路和土路比较多，不建议租这种车。乌敏岛东部主要是Sensory Trail和Chek Jawa Wetlands，西部是山地车公园和Puaka Hill，可以看着岛内的地图自行规划路线，我认为东部的风景更好所以可以考虑先去东部再去西部。岛内几乎每个岔路口也都有地图指引，所以不用担心找不到路。</p><p>前往Chek Jawa Wetlands的路基本上都是土路，一路上比较颠簸而且上上下下，运动量还是比较大的，因为比较热感觉自己快要中暑了。路上也有些地方有猴子挡道，要注意食物别被它们抢走。不过Chek Jawa Wetlands的风景也的确很好，在延申到海里的木板路上不仅可以吹海风还能看到降落樟宜机场的飞机。在周边也有红树林，还可以到观景台上一览热带森林的风貌。</p><p><img src="/2021/10/23/%E4%B9%8C%E6%95%8F%E5%B2%9B%E5%9C%9F%E8%B7%AF.jpg" alt="乌敏岛土路"><br><img src="/2021/10/23/%E4%B9%8C%E6%95%8F%E5%B2%9B%E9%A3%8E%E6%99%AF1.jpg" alt="乌敏岛风景"><br><img src="/2021/10/23/%E4%B9%8C%E6%95%8F%E5%B2%9B%E9%A3%8E%E6%99%AF2.jpg" alt="乌敏岛风景"><br><img src="/2021/10/23/%E4%B9%8C%E6%95%8F%E5%B2%9B%E9%A3%8E%E6%99%AF3.jpg" alt="乌敏岛风景"><br><img src="/2021/10/23/%E4%B9%8C%E6%95%8F%E5%B2%9B%E9%A3%8E%E6%99%AF4.jpg" alt="乌敏岛风景"></p><p>在乌敏岛的西部都是水泥路，基本没有土路。主要可以在Puaka Hill的山顶看岛内的湖水和远处的海水呼应，另外山地车公园看着不错，不过朋友在水泥路下坡时摔车受伤+我也是新手所以没有尝试。</p><p><img src="/2021/10/23/%E4%B9%8C%E6%95%8F%E5%B2%9B%E9%A3%8E%E6%99%AF5.jpg" alt="乌敏岛风景"><br><img src="/2021/10/23/%E4%B9%8C%E6%95%8F%E5%B2%9B%E9%A3%8E%E6%99%AF6.jpg" alt="乌敏岛风景"></p><p>另外也可以品尝下路边饮料摊位的椰子。在岛内吃饭的话和外面物价基本一样，不过味道的确一般。另外若想在岛内露营也有不少的露营地可供选择（不过因为疫情目前并不开放），若不露营需要在晚饭前回去，不然太晚可能就没有渡船了。</p><h2 id="费用总计">费用总计</h2><table><thead><tr><th>项目</th><th>费用</th><th>备注</th></tr></thead><tbody><tr><td>船费</td><td>8</td><td></td></tr><tr><td>吃吃喝喝</td><td>17.05</td><td>早饭+椰子+午饭</td></tr><tr><td>自行车</td><td>15</td><td></td></tr><tr><td>总计</td><td>40.05</td><td>不含交通费</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>访学笔记</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>新国立访学笔记——旅游篇Ⅴ：动物园</title>
    <link href="/2021/10/17/"/>
    <url>/2021/10/17/</url>
    
    <content type="html"><![CDATA[<h2 id="新加坡动物园">新加坡动物园</h2><p>新加坡的四个动物园中的三个都在一个地方，不过离市区比较远。看到网上说浏览大约需要3-4小时，所以我中饭后出发，约下午1:30到达。由于天气非常热+背了个书包，所以下午略微有点中暑，影响了参观的速度，最后5:30才参观完全部区域。</p><p>新加坡动物园的动物种类还是比较多的（大致如地图所示），不过为了保护动物，动物园为动物们营造了类似于它们栖息地的环境，动物的活动空间也很大。像斑马、长颈鹿、狒狒这些动物看的比较清楚也适合拍照。猴子、老虎、狮子之类的有些时候藏得比较好，看的看不到得看运气。我的浏览路径大致如下。</p><p>因为疫情的原因，三个演出每场只开放50个座位，需要手机抢票，一个演出暂停。我因为手速不够一个演出也没看成，略微有点遗憾。大部分动物的介绍只有英文，体验略微有点影响。另外动物园有观光车，车上会有动物们的介绍（有中文），因为另外收费所以我觉得没有必要。</p><p><img src="/2021/10/17/sz%E5%9C%B0%E5%9B%BE.jpg" alt="地图"></p><h2 id="夜间野生动物园">夜间野生动物园</h2><p>夜间野生动物园下午7:15开门，不过大概6:30就可以前往排队（还是在疫情下只有本地游客的情况），大约7:00可以进入。演出共有四场，每场限50人且先到先得，第一场没有赶上所以我先乘坐了观光车。因为疫情的关系原本的多语言观光车取消，只有英语讲解。观光车一圈大概需要半小时。因为天还没有完全黑所以大部分动物还是看的比较清楚的，也有些动物藏得比较好所有看不见，体验的好差还得看运气。</p><p>在7:35重新回到入口处时，8:30的演出已经几乎满员了，在只有最后一个座位时因为其他人都是家庭游而我独自来玩，所以非常幸运的得到了最后的门票。演出大概持续半小时，大概是介绍一些夜间动物习性+宣传保护野生动物（英文）。</p><p>之后沿着步行道走了一圈，能看到的动物远比在观光车上的多，不过因为动物藏得比较好+照明光线很暗，想要看到动物或者拍照还是靠动物们赏脸。最后我想看看在天色全黑的情况下乘坐观光车能不能看到动物。的确很多动物看的不清楚而且好多大象已经睡觉了！还是早点坐观光车体验更好。</p><p><img src="/2021/10/17/ns%E5%9C%B0%E5%9B%BE.jpg" alt="地图"></p><p>算是拍的比较好的一张：<br><img src="/2021/10/17/%E8%80%81%E8%99%8E.jpg" alt="老虎"></p><h2 id="裕廊飞禽公园">裕廊飞禽公园</h2><p>裕廊飞禽公园和其他三个动物园距离略远，离我家也不方便直达，所以干脆找了家Toast Box吃个早午饭，大约12:30进入公园。飞禽公园的体验比我预期的好很多，一来路线很合理，沿着导览车路线走就可以覆盖绝大部分展区；二来展示的鸟类品种很多，而且基本都能找得到，不像新加坡动物园或夜间野生动物园一样看不到动物。不过鸟类不比其他动物，只能用大型笼子关在指定区域，而且为了防止鸟撞上玻璃，公园内极少有玻璃墙，因此拍照的效果不好。不过也有适合拍照的动物们，例如火烈鸟和鹈鹕。</p><p><img src="/2021/10/17/jbp%E5%9C%B0%E5%9B%BE.jpg" alt="地图"><br><img src="/2021/10/17/%E7%8A%80%E9%B8%9F.jpg" alt="犀鸟"><br><img src="/2021/10/17/%E7%81%AB%E7%83%88%E9%B8%9F.jpg" alt="火烈鸟"></p><p>另外有展翅高飞秀和空中禽王秀两场演出，和其他动物园一样需要提前两小时在网上抢票，每场限50人。这次非常幸运两场都抢到门票，演出还是值得一看的，算是动物园的重要体验之一。</p><p>大约4:30离开公园，正好到换乘站所在的Jurong Point吃个晚饭。不过裕廊算是新冠高风险区，也没有在商场内过多停留，吃完赶紧回家。</p><h2 id="河川生态园">河川生态园</h2><p>因为公交车坐反，下午1:15才到达河川生态园。河川生态园的参观路线固定，没有岔路。目前免费的游船暂停，只有付费的游船（亚马逊河探索），费用是5SGD。个人认为比较有意思的是长江展区，可以看到很多中华鲟。当然大熊猫也值得一看。亚马逊河探索比较无聊。</p><p>个人认为这个动物园相比其他三个内容略少，不太推荐。大约只用了2个小时就全部看完了。当然也有可能是我高强度去动物园已经审美疲劳了。</p><p><img src="/2021/10/17/rw%E5%9C%B0%E5%9B%BE.jpg" alt="地图"><br><img src="/2021/10/17/%E5%A4%A7%E7%86%8A%E7%8C%AB.jpg" alt="大熊猫"></p><h2 id="总结">总结</h2><p>个人推荐：裕廊飞禽公园&gt;新加坡动物园=夜间野生动物园&gt;河川生态园</p><h2 id="费用总计">费用总计</h2><table><thead><tr><th>项目</th><th>费用</th><th>备注</th></tr></thead><tbody><tr><td>动物园套票</td><td>74.1</td><td>新加坡动物园+夜间野生动物园</td></tr><tr><td>晚饭</td><td>9.1</td><td></td></tr><tr><td>裕廊飞禽公园门票</td><td>32.3</td><td></td></tr><tr><td>早午饭+晚饭</td><td>21.2</td><td></td></tr><tr><td>河川生态园门票</td><td>36.1</td><td></td></tr><tr><td>亚马逊河探索船票</td><td>5</td><td></td></tr><tr><td>饮料</td><td>2.5</td><td></td></tr><tr><td>总计</td><td>180.3</td><td>不含交通费，共计三个下午+一个晚上</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>访学笔记</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>新国立访学笔记——旅游篇Ⅳ：海洋馆</title>
    <link href="/2021/10/03/"/>
    <url>/2021/10/03/</url>
    
    <content type="html"><![CDATA[<h2 id="圣淘沙海洋馆">圣淘沙海洋馆</h2><p>海洋馆的内容非常丰富，有各种各样的海洋生物以及中文的介绍，既有科普内容也有保护海洋环境的呼吁。用时大约1.5小时。</p><p><img src="/2021/10/03/%E6%B5%B7%E6%B4%8B%E9%A6%861.jpg" alt="海洋馆"><br><img src="/2021/10/03/%E6%B5%B7%E6%B4%8B%E9%A6%862.jpg" alt="海洋馆"><br><img src="/2021/10/03/%E6%B5%B7%E6%B4%8B%E9%A6%863.jpg" alt="海洋馆"></p><h2 id="圣淘沙斜坡滑车">圣淘沙斜坡滑车</h2><p>算是一个值得推荐的游乐设施。斜坡滑车共有四条线路。2次票25元，3次票28元，4次票30元，建议直接购买4次票。</p><h2 id="老巴刹">老巴刹</h2><p>因为珍宝海鲜人均70-100元的价格还是略高于我的消费水平，于是和同学一起去了比较有名的巴刹吃辣椒螃蟹。说实话味道一般，可能这就是一分钱一分货吧。</p><p><img src="/2021/10/03/%E8%9E%83%E8%9F%B9.jpg" alt="螃蟹"></p><h2 id="超级树灯光秀">超级树灯光秀</h2><p>弥补了之前只看了白天的超级树的遗憾。每天晚上7:45和8:45都有音乐灯光秀，英语和华语歌都有，时长大概15分钟。可以在连接金沙酒店和滨海湾花园的天桥的末端看全景，也可以直接在超级树下感受氛围。也可以到OCBC Skyway上看，不过我上次在白天已经上去过了。</p><p><img src="/2021/10/03/%E8%B6%85%E7%BA%A7%E6%A0%91%E5%A4%9C%E9%97%B4.jpg" alt="超级树夜间"></p><h2 id="费用总计">费用总计</h2><table><thead><tr><th>项目</th><th>费用</th><th>备注</th></tr></thead><tbody><tr><td>圣淘沙海洋馆</td><td>35</td><td></td></tr><tr><td>圣淘沙斜坡滑车</td><td>30</td><td>4次票</td></tr><tr><td>晚饭</td><td>36</td><td></td></tr><tr><td>总计</td><td>101</td><td>不含交通费</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>访学笔记</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>新国立访学笔记——旅游篇Ⅲ：博物馆&amp;金沙酒店</title>
    <link href="/2021/10/02/"/>
    <url>/2021/10/02/</url>
    
    <content type="html"><![CDATA[<h2 id="新加坡国家博物馆">新加坡国家博物馆</h2><p>新加坡国家博物馆是典型的新古典主义建筑，经历了多次扩建才形成现在的结构。博物馆对新加坡人/永久居民/公立学校学生免费。在检查学生证时工作人员告诉我半小时后有免费的华语guided tour，半小时内没有其他华人来参观博物馆，所以我非常幸运地获得了一对一讲解。义务讲解员是一位北师大毕业的移民新加坡的台湾老师，她带领我参观新加坡历史馆的过程中详细介绍了新加坡从16世纪至今的历史以及和展览品的关联，不停地讲了一个多小时。真的非常幸运能遇到那么认真负责知识渊博的讲解员。</p><p>参观完一楼的新加坡历史馆后，我参观了地下层的两个临展厅，今天展出的主题是“新冠肺炎疫情下人们的生活”以及“1950年代至今新加坡人的每日生活”。然后前往二楼参观了四个新加坡生活馆和玻璃圆楼。说实话没有人讲解的情况下让我看英文介绍还是有点困难，所以大多展厅也就走马观花。</p><p><img src="/2021/10/02/%E5%9B%BD%E5%AE%B6%E5%8D%9A%E7%89%A9%E9%A6%861.jpg" alt="国家博物馆"></p><h2 id="艺术科学博物馆">艺术科学博物馆</h2><p>艺术科学博物馆的造型比较独特，像一朵盛开的莲花，不过里面的内容一般，比较适合亲子游。博物馆三楼是VR Gallery，比较热门需要提前预订门票所以没有参观。二楼是一个关于声音的免费展厅（官网说要收费，难道我逃票了？……）。地下层是《超跃未来：艺术与科学汇聚点》和《虚拟之境：电游的转化》，前者是永久展厅，后者是限时展厅，我选择参观了前者，学生证可以获得优惠票价。展厅的内容主要是一些可以根据人的动作变化的艺术作品，非常符合副标题“艺术与科学汇聚点”。</p><p><img src="/2021/10/02/%E8%89%BA%E6%9C%AF%E7%A7%91%E5%AD%A6%E5%8D%9A%E7%89%A9%E9%A6%861.jpg" alt="艺术科学博物馆"></p><h2 id="红点设计博物馆">红点设计博物馆</h2><p>谷歌地图告诉我博物馆10点关门，结果是6点关门。而且该博物馆10月1日起闭馆装修，怕是无缘参观了。</p><h2 id="金沙空中观景台">金沙空中观景台</h2><p>观景台的入口位于酒店入口的另一侧（从购物中心方向，观景台入口在最左侧，酒店入口在最右侧）。非住户只能在“帆船的甲板”区域活动，票价26元。我大概在日落前15分钟上楼，在56楼看日落和夜景真的很不错。</p><p><img src="/2021/10/02/%E9%87%91%E6%B2%991.jpg" alt="金沙"><br><img src="/2021/10/02/%E9%87%91%E6%B2%992.jpg" alt="金沙"><br><img src="/2021/10/02/%E9%87%91%E6%B2%993.jpg" alt="金沙"></p><h2 id="费用总计">费用总计</h2><p>中午去了松发肉骨茶，晚上去了莆田餐厅，都很好吃！</p><table><thead><tr><th>项目</th><th>费用</th><th>备注</th></tr></thead><tbody><tr><td>吃吃喝喝</td><td>31.32</td><td>中饭+晚饭</td></tr><tr><td>艺术科学博物馆</td><td>12</td><td>超跃未来展厅</td></tr><tr><td>空中观景台</td><td>26</td><td></td></tr><tr><td>总计</td><td>69.32</td><td>不含交通费</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>访学笔记</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>新国立访学笔记——旅游篇Ⅱ：植物园&amp;滨海湾</title>
    <link href="/2021/09/03/"/>
    <url>/2021/09/03/</url>
    
    <content type="html"><![CDATA[<h2 id="植物园">植物园</h2><p>新加坡植物园也算是小有名气。不过这个景点不太适合我，而且当天还下了暴雨。</p><p>我的路线和一些照片：<br><img src="/2021/09/03/%E6%A4%8D%E7%89%A9%E5%9B%AD%E8%B7%AF%E7%BA%BF.jpg" alt="植物园路线"></p><p><img src="/2021/09/03/%E6%A4%8D%E7%89%A9%E5%9B%AD1.jpg" alt="植物园"><br><img src="/2021/09/03/%E6%A4%8D%E7%89%A9%E5%9B%AD2.jpg" alt="植物园"></p><h2 id="滨海湾">滨海湾</h2><h3 id="滨海艺术中心">滨海艺术中心</h3><p>来到滨海湾的第一站，我选择了滨海艺术中心：榴莲形状的剧院。没有演出可以看，在楼顶看看风景和接下来要去的景点也不错。</p><p><img src="/2021/09/03/%E5%89%A7%E9%99%A21.jpg" alt="剧院"><br><img src="/2021/09/03/%E5%89%A7%E9%99%A22.jpg" alt="剧院"></p><h3 id="鱼尾狮公园">鱼尾狮公园</h3><p>从滨海艺术中心出来过一座桥就到达了鱼尾狮公园。感觉鱼尾狮公园是新加坡最标志性的景点了吧。不过滨海湾金沙酒店的造型我最初是从柯南里看到的？</p><p><img src="/2021/09/03/%E9%B1%BC%E5%B0%BE%E7%8B%AE1.jpg" alt="鱼尾狮公园"><br><img src="/2021/09/03/%E9%B1%BC%E5%B0%BE%E7%8B%AE2.jpg" alt="鱼尾狮公园"><br><img src="/2021/09/03/%E9%B1%BC%E5%B0%BE%E7%8B%AE3.jpg" alt="鱼尾狮公园"></p><p>感觉用手机拍出来的滨海湾金沙酒店还差点意思，肉眼看的效果更好。</p><h3 id="滨海湾金沙购物中心">滨海湾金沙购物中心</h3><p>从鱼尾狮公园出来沿着河边走一段路就可以到达滨海湾金沙购物中心。商场里基本是奢侈品，还有一个赌场。对我这种学生来说只能喝杯喜茶顺便在美食广场吃个午饭了。不过这个指南倒是给我答疑了……</p><p><img src="/2021/09/03/%E5%92%96%E5%95%A1.jpg" alt="咖啡"></p><h3 id="滨海湾花园">滨海湾花园</h3><p>从购物中心后门出来就到了滨海湾花园。先去了Supertree，说实话在远处看比在近处看效果好点。原计划是白天去OCBC SkyWay，晚上灯光秀去Supertree Observatory，所以我先买了OCBC SkyWay的门票。说实话我还挺恐高的，走到中间窄的地方不太敢往下看。现场有个小朋友不敢往前，她妈拿她没办法最后还是从入口出去了。</p><p><img src="/2021/09/03/%E8%B6%85%E7%BA%A7%E6%A0%911.jpg" alt="超级树"><br><img src="/2021/09/03/%E8%B6%85%E7%BA%A7%E6%A0%912.jpg" alt="超级树"><br><img src="/2021/09/03/%E8%B6%85%E7%BA%A7%E6%A0%913.jpg" alt="超级树"></p><p>然后去了Flower Dome，说实话对我来说和植物园一样无聊。</p><p><img src="/2021/09/03/%E8%8A%B1%E7%A9%B9.jpg" alt="花穹"></p><p>最后去了Cloud Forest，这个就好多了。是一个人造的中空假山，附加一些步行道。</p><p><img src="/2021/09/03/%E4%BA%91%E9%9B%BE%E6%9E%971.jpg" alt="云雾林"><br><img src="/2021/09/03/%E4%BA%91%E9%9B%BE%E6%9E%972.jpg" alt="云雾林"><br><img src="/2021/09/03/%E4%BA%91%E9%9B%BE%E6%9E%973.jpg" alt="云雾林"></p><h2 id="F1赛道">F1赛道</h2><p>穿过螺旋桥可以到达摩天轮附近。摩天轮下面就是F1的p房和赛道，最后几个弯角+发车直道+一二三号弯是封闭路段，有些市民在这骑自行车，其他路段是公路。</p><p>最后一次新加坡大奖赛还是2019年，在这还能看到霍肯伯格和库比卡的照片。可惜今年的新加坡大奖赛也取消了。</p><p><img src="/2021/09/03/%E8%B5%9B%E9%81%931.jpg" alt="赛道"><br><img src="/2021/09/03/%E8%B5%9B%E9%81%932.jpg" alt="赛道"><br><img src="/2021/09/03/%E8%B5%9B%E9%81%933.jpg" alt="赛道"></p><h2 id="摩天轮">摩天轮</h2><p>说实话我没有想到摩天轮那么棒，上面的风景真的太好了！！不过拍出来的照片颜色有点失真，还是肉眼看效果比较好。</p><p><img src="/2021/09/03/%E6%91%A9%E5%A4%A9%E8%BD%AE1.jpg" alt="摩天轮"><br><img src="/2021/09/03/%E6%91%A9%E5%A4%A9%E8%BD%AE2.jpg" alt="摩天轮"><br><img src="/2021/09/03/%E6%91%A9%E5%A4%A9%E8%BD%AE3.jpg" alt="摩天轮"></p><p>本来还想继续在晚上看Supertree的灯光秀以及到滨海湾金沙酒店楼顶看夜景的，但手机没电+比较累，只能下次再继续了~</p><h2 id="费用总计">费用总计</h2><table><thead><tr><th>项目</th><th>费用</th><th>备注</th></tr></thead><tbody><tr><td>吃吃喝喝</td><td>37.1</td><td>中饭+喜茶+晚饭</td></tr><tr><td>滨海湾花园</td><td>28</td><td>OCBC SkyWay+Flower Dome+Cloud Forest</td></tr><tr><td>摩天轮</td><td>33</td><td></td></tr><tr><td>总计</td><td>98.1</td><td>不含交通费</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>访学笔记</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>新国立访学笔记——旅游篇Ⅰ：圣淘沙</title>
    <link href="/2021/08/23/"/>
    <url>/2021/08/23/</url>
    
    <content type="html"><![CDATA[<h2 id="前往圣淘沙">前往圣淘沙</h2><p>从Farrar Road坐黄线一路到达终点站HabourFront，穿过VivoCity换乘Sentosa Express，进入圣淘沙。我一路坐到终点站Beach Station。</p><h2 id="Siloso-Beach">Siloso Beach</h2><p>因为疫情的原因环球影城12:00才开门，趁早上多云的天气逛逛沙滩。进入沙滩前需要扫码登记，听工作人员指导就好。</p><p><img src="/2021/08/23/%E6%B2%99%E6%BB%A91.jpg" alt="沙滩"><br><img src="/2021/08/23/%E6%B2%99%E6%BB%A92.jpg" alt="沙滩"><br><img src="/2021/08/23/%E6%B2%99%E6%BB%A93.jpg" alt="沙滩"></p><h2 id="缆车">缆车</h2><p>圣淘沙共有两条缆车，Sentosa Line在岛内，Mt Faber Line连接圣淘沙岛和花芭山。从Beach Station逛完Siloco Beach后到达了Siloso Point，正好可以坐缆车返回到名胜世界附近。从缆车上看沙滩又是不一样的风景。</p><p><img src="/2021/08/23/%E7%BC%86%E8%BD%A61.jpg" alt="缆车"><br><img src="/2021/08/23/%E7%BC%86%E8%BD%A62.jpg" alt="缆车"></p><h2 id="名胜世界">名胜世界</h2><p>名胜世界的景点很多，但我只买了环球影城的票。中午前先逛逛商店顺便吃个饭。</p><p><img src="/2021/08/23/%E4%B9%90%E9%AB%981.jpg" alt="乐高"><br><img src="/2021/08/23/%E4%B9%90%E9%AB%982.jpg" alt="乐高"><br><img src="/2021/08/23/%E9%A9%AC%E6%9D%A5%E8%A5%BF%E4%BA%9A%E7%BE%8E%E9%A3%9F%E8%A1%971.jpg" alt="马来西亚美食街"><br><img src="/2021/08/23/%E9%A9%AC%E6%9D%A5%E8%A5%BF%E4%BA%9A%E7%BE%8E%E9%A3%9F%E8%A1%972.jpg" alt="马来西亚美食街"></p><h2 id="环球影城">环球影城</h2><p>终于到达了今天的重点——环球影城。新加坡环球影城在疫情期间的营业时间是12:00-19:00。在景区内可以通过Universal SG APP导航。</p><p>部分设施在维护，包括著名的<strong>太空堡垒™双轨过山车：人类战队对抗机械战队</strong>，<strong>未来水世界</strong>，<strong>史瑞克4D影院</strong>等等，还是比较可惜。不过好处就是疫情下人比较少，排队时间不算太长，从5分钟-40分钟不等。因此当天开放的12个项目我都体验了。</p><ul><li>芝麻街之意大利面太空战</li><li>木乃伊复仇记™</li><li>马达加斯加：木箱漂流记</li><li>旋转飞盘™</li><li>恐龙骑士</li><li>天幕飞行™</li><li>《鞋猫剑客历险记》</li><li>变形金刚3D对决之终极战斗</li><li>寻宝奇兵™</li><li>侏罗纪河流探险™</li><li>小龙飞行学校</li><li>朱利安国王旋转舞会</li></ul><p>其中最刺激的是<strong>木乃伊复仇记™</strong>，最有趣的是<strong>变形金刚3D对决之终极战斗</strong>。</p><p>在2点前天气都不错，多云到阴天的样子。从<strong>木乃伊复仇记™</strong>出来后天上飘来黑压压的云，几分钟后就开始暴雨，室外项目全部暂停。我正好打算玩室内项目，还算幸运。一个半小时后雨小了些，可以冒雨玩室外项目，于是我淋着雨玩了<strong>小龙飞行学校</strong>（不能穿雨衣），<strong>侏罗纪河流探险™</strong>可以穿雨衣玩。</p><p>一些照片：</p><p><img src="/2021/08/23/%E7%8E%AF%E7%90%83%E5%BD%B1%E5%9F%8E1.jpg" alt="环球影城"><br><img src="/2021/08/23/%E7%8E%AF%E7%90%83%E5%BD%B1%E5%9F%8E2.jpg" alt="环球影城"><br><img src="/2021/08/23/%E7%8E%AF%E7%90%83%E5%BD%B1%E5%9F%8E3.jpg" alt="环球影城"><br><img src="/2021/08/23/%E7%8E%AF%E7%90%83%E5%BD%B1%E5%9F%8E4.jpg" alt="环球影城"><br><img src="/2021/08/23/%E7%8E%AF%E7%90%83%E5%BD%B1%E5%9F%8E5.jpg" alt="环球影城"></p><h2 id="回家">回家</h2><p>坐Mt Faber Line可以从空中俯瞰新加坡，然后到达HabourFront换乘地铁。<br><img src="/2021/08/23/%E5%A4%9C%E6%99%AF.jpg" alt="夜景"></p><h2 id="费用总计">费用总计</h2><table><thead><tr><th>项目</th><th>费用</th><th>备注</th></tr></thead><tbody><tr><td>环球影城门票</td><td>56</td><td>国庆节特价</td></tr><tr><td>雨衣</td><td>5</td><td></td></tr><tr><td>中餐&amp;晚餐</td><td>34</td><td></td></tr><tr><td>缆车</td><td>35</td><td></td></tr><tr><td>总计</td><td>130</td><td>不含交通费</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>访学笔记</category>
      
    </categories>
    
    
  </entry>
  
  
  
  
</search>
